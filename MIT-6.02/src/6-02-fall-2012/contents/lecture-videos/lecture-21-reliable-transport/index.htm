<!DOCTYPE html><html lang="en">
      
      
        
    
    
    
    

      
      
      <head>
        <meta charset="utf-8">
        <meta name="format-detection" content="telephone=no">  
        
        <title>Lecture 21: Reliable Transport | Lecture Videos | Introduction to EECS II: Digital Communication Systems | Electrical Engineering and Computer Science | MIT OpenCourseWare</title>
    <!-- Begin Automatic Metadata Insertion -->
    <meta content="6-02-introduction-to-eecs-ii-digital-communication-systems-fall-2012" name="WT.cg_n">
    <meta content="Lecture 21: Reliable Transport" name="WT.cg_s">
    <meta content="This lecture covers implementation of TCP and providing reliable data transfer. The stop-and-wait and sliding window protocols are discussed with their benefits and disadvantages in preventing lost or duplicate packets." name="Description">
    <meta content="Balakrishnan, Hari" name="Author">
    <meta content="Verghese, George" name="Author">
    <meta content="6.02,transmission control protocol,TCP,acknowledgement,sender,receiver,stop-and-wait,sliding window,retransmission,timeout,pipelining,Computer Networks,Digital Systems,Signal Processing,Telecommunications" name="keywords">
    <meta content="6.02 Introduction to EECS II: Digital Communication Systems | Lecture 21: Reliable Transport" name="Search_Display">
    <meta content="Computer Networks" itemprop="about">
    <meta content="Digital Systems" itemprop="about">
    <meta content="Signal Processing" itemprop="about">
    <meta content="Telecommunications" itemprop="about">
    <!-- End Automatic Metadata Insertion -->

	<link title="default" rel="stylesheet" type="text/css" href="../../../common/styles/grid.css">
<link title="default" rel="stylesheet" type="text/css" href="../../../common/styles/base.css">
<link title="default" rel="stylesheet" type="text/css" href="../../../common/styles/menu.css">
<link title="default" rel="stylesheet" type="text/css" href="../../../common/styles/jquery.bubblepopup.css">
<link title="default" rel="stylesheet" type="text/css" href="../../../common/styles/search.css">
<link title="default" rel="stylesheet" type="text/css" href="../../../common/styles/courses.css">
<link title="default" rel="stylesheet" type="text/css" href="../../../common/styles/courses_new.css">
<link title="default" rel="stylesheet" type="text/css" href="../../../common/styles/jquery.jscrollpane.css">
<link title="default" rel="stylesheet" type="text/css" href="../../../common/styles/media_tabs.css">
	<link href="../../../common/xml/ocwcc.rdf" type="application/rdf+xml" rel="metadata">
	<link rel="canonical" href="https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-02-introduction-to-eecs-ii-digital-communication-systems-fall-2012/lecture-videos/lecture-21-reliable-transport/">
	<link rel="apple-touch-icon" href="../../../common/images/apple-touch-icon.png">
	
	
      
	
	<script type="text/javascript" src="../../../common/scripts/jquery.js"></script>
	<script type="text/javascript" src="../../../common/scripts/ocw-media-utils-offline.js"></script>
	<script type="text/javascript" src="../../../common/scripts/ocw-offline.js"></script>
	<script type="text/javascript" src="../../../common/scripts/jquery.bubblepopup.min.js"></script>
	<script type="text/javascript" src="../../../common/scripts/jquery-ui.min.js"></script>
	<script type="text/javascript" src="../../../common/scripts/jquery.jscrollpane.min.js"></script>
	<script type="text/javascript" src="../../../common/scripts/expandy.js"></script>
	<script type="text/javascript" src="../../../common/scripts/bubble-popup-offline.js"></script>
	
	
	
    <script type="text/javascript">
      $(document).ready(function() {
        $("#tabs").tabs();
        IpadScroller();
      });
    </script>
    
    
    
    
    
    
      
       
		 

        
        
        

        
        
        
        
        
        
        
        
        
      </head>
    <body itemscope itemtype="http://schema.org/WebPage">
        
	

        <header id="top">
			<div id="grid">
				
				
					
<div id="portletwrapper-6f63772e746f70706f72746c65746d616e616765720a636f6e746578740a2f506c6f6e650a736974652d686561646572" class="portletWrapper kssattr-portlethash-6f63772e746f70706f72746c65746d616e616765720a636f6e746578740a2f506c6f6e650a736974652d686561646572">
<div class="portletStaticText portlet-static-site-header">
<!--googleoff: index-->
<div class="grid_6 alpha" id="banner"><a href="https://ocw.mit.edu/"><img src="../../../common/images/ocw_mast.png" class="logo" alt="MIT OpenCourseWare, Massachusetts Institute of Technology"></a></div>
<div class="grid_6 omega" id="subscribe">
<aside class="module" aria-label="Connect with OCW">
<table class="social">
    <tbody>
        <tr>
            <td class="socialbutton"><a aria-label="Subscribe to the OCW Newsletter" href="https://ocw.mit.edu/subscribe/index.htm?utm_source=header"><img src="../../../common/images/trans.gif" alt="An icon depicting an envelope.">Subscribe to the OCW Newsletter</a></td>
            <td>
<a aria-label="Facebook" href="https://facebook.com/mitocw"><img src="../../../common/images/icon_fb.png" alt="Click to visit our Facebook page."></a>  <a aria-label="Instagram" href="https://www.instagram.com/mitocw/"><img src="https://ocw.mit.edu/images/icon_ig.png" alt="Click to visit our Instagram page."></a> <a aria-label="Twitter" href="https://twitter.com/mitocw"><img src="https://ocw.mit.edu/images/icon_twitter.png" alt="Click to visit our Twitter feed."></a><a aria-label="YouTube" href="https://www.youtube.com/mitocw" style="font-size: 12.208px;"><img src="https://ocw.mit.edu/images/icon_yt.png" alt="Click to visit our YouTube page."></a><span style="font-size: 12.208px;">   </span><a aria-label="Open Matters blog on WordPress" href="https://www.ocw-openmatters.org/" style="font-size: 12.208px;"><img src="https://ocw.mit.edu/images/icon_wp.png" alt="Click to visit our blog on WordPress."></a>
</td>
        </tr>
    </tbody>
</table>
</aside><nav aria-label="Help Links" class="helplinks">     <a aria-label="OCW Site Help" href="https://ocw.mit.edu/help">Help</a><span aria-hidden="true">|</span>     <a href="../../../common/about/contactus.htm">Contact Us</a>   </nav>
</div>
<div class="clear"> </div>
<!--googleon: index-->
</div>

</div>

<div id="portletwrapper-6f63772e746f70706f72746c65746d616e616765720a636f6e746578740a2f506c6f6e650a6d6567612d6d656e75" class="portletWrapper kssattr-portlethash-6f63772e746f70706f72746c65746d616e616765720a636f6e746578740a2f506c6f6e650a6d6567612d6d656e75">
<div class="portletStaticText portlet-static-mega-menu"><div><nav id="mega" class="grid_8 alpha" aria-label="Site">
<ul id="menu" role="presentation">
    <li id="menu_home">
<a href="https://ocw.mit.edu/" aria-label="Homepage"><img src="../../../common/images/top-nav_home.png" class="home_icon" alt="Click for site home page."></a><!-- Begin Home Item -->
</li>
    <!-- End Home Item -->
    <li id="drop_1" aria-label="Find Courses">
<a href="#" aria-hidden="true">FIND COURSES</a><!-- Begin 5 columns Item -->
    <div class="dropdown_5columns-a mega-courses">
    <div class="col_1a">
    <div class="row_1a">
<nav aria-labelledby="mm-find-courses-by">     <span id="mm-find-courses-by" class="nav" aria-hidden="true">Find courses by:</span>
    <ul class="find_by" role="presentation">
        <li><a href="https://ocw.mit.edu/courses/find-by-topic/">Topic</a></li>
        <li><a href="https://ocw.mit.edu/courses/find-by-number/">MIT Course Number</a></li>
        <li><a href="https://ocw.mit.edu/courses/find-by-department/">Department</a></li>
    </ul>
    </nav>     <nav aria-labelledby="mm-collections">     <span id="mm-collections" class="nav" aria-hidden="true">Collections</span>
    <ul role="presentation">
        <li><a href="https://ocw.mit.edu/courses/new-courses/">New Courses</a></li>
        <li><a href="https://ocw.mit.edu/courses/most-visited-courses/">Most Visited Courses</a></li>
        <li><a href="https://ocw.mit.edu/courses/ocw-scholar/">OCW Scholar Courses</a></li>
        <li><a href="https://ocw.mit.edu/courses/audio-video-courses/">Audio/Video Lectures</a></li>
        <li><a href="https://ocw.mit.edu/courses/online-textbooks/">Online Textbooks</a></li>
        <li><a href="https://ocw.mit.edu/resources/">Supplemental Resources</a></li>
        <li><a href="https://ocw.mit.edu/high-school/">OCW Highlights for High School</a></li>
        <li><a href="https://ocw.mit.edu/courses/mitx-related-courseware/">MITx &amp; Related OCW Courses</a></li>
        <li><a href="https://ocw.mit.edu/courses/mit-open-learning-library/">MIT Open Learning Library</a></li>
    </ul>
    </nav>     <nav class="col_1b" aria-labelledby="mm-translated-courses">     <span id="mm-translated-courses" class="nav" aria-hidden="true" style="line-height: 1.3;">Cross-Disciplinary Topic Lists</span>
    <ul role="presentation">
        <li><a href="https://ocw.mit.edu/courses/energy-courses">Energy</a></li>
        <li><a href="https://ocw.mit.edu/courses/entrepreneurship">Entrepreneurship</a></li>
        <li><a href="https://ocw.mit.edu/courses/environment-courses">Environment</a></li>
        <li><a href="https://ocw.mit.edu/courses/intro-programming">Introductory Programming</a></li>
        <li><a href="https://ocw.mit.edu/courses/life-sciences">Life Sciences</a></li>
        <li><a href="https://ocw.mit.edu/courses/transportation-courses">Transportation</a></li>
    </ul>
    </nav>
</div>
    <div class="row_1b"><nav aria-labelledby="mm-cross-disciplinary-topic-lists">     <span id="mm-cross-disciplinary-topic-lists" class="nav" aria-hidden="true">Translated Courses</span>
    <ul role="presentation">
        <li><a href="https://ocw.mit.edu/courses/translated-courses/traditional-chinese" aria-label="Traditional Chinese">繁體字 / Traditional Chinese</a></li>
        <li><a href="https://ocw.mit.edu/courses/translated-courses/turkish" aria-label="Turkish">Türkçe / Turkish</a></li>
        <li><a href="https://ocw.mit.edu/courses/translated-courses/korean" aria-label="Korean">(비디오)한국 / Korean</a></li>
    </ul>
    </nav></div>
    </div>
    </div>
    </li>
    <li id="drop_2">
<a href="#" aria-label="For Educators">For Educators</a>
    <div class="dropdown_1column-a" style="width: 270px;"><nav aria-labelledby="mm-find-courses-by">
    <ul role="presentation">
        <li><a href="https://ocw.mit.edu/educator/chalk-radio-podcast">Chalk Radio Podcast</a></li>
        <li><a href="https://ocw.mit.edu/educator/">OCW Educator Portal</a></li>
    </ul>
    <ul role="presentation">
        <li><a href="https://ocw.mit.edu/courses/instructor-insights/">Instructor Insights by Department</a></li>
        <li><a href="https://openlearning.mit.edu/campus/digital-innovations/">Residential Digital Innovations </a></li>
    </ul>
    <ul role="presentation">
        <li><a href="https://ocw.mit.edu/high-school/">OCW Highlights for High School</a></li>
    </ul>
    <ul role="presentation">
        <li><a href="https://ocw.mit.edu/educator/additional-resources/">Additional Resources</a></li>
    </ul>
    </nav></div>
    </li>
    <li id="drop_3">
<a href="#" aria-hidden="true">Give Now</a>
    <div class="dropdown_1column-a"><nav class="col_1" aria-label="Donate">
    <ul role="presentation">
        <li><a href="https://ocw.mit.edu/give/">Make a Donation</a></li>
        <li><a href="https://ocw.mit.edu/give/why-give/">Why Give?</a></li>
        <li><a href="https://ocw.mit.edu/give/our-supporters/">Our Supporters</a></li>
        <li><a href="https://ocw.mit.edu/give/other-ways-to-contribute/">Other Ways to Contribute</a></li>
        <li><a href="https://ocw.mit.edu/support/">Become a Corporate Sponsor</a></li>
    </ul>
    </nav></div>
    </li>
    <li id="drop_4">
<a href="#" aria-hidden="true">About</a>
    <div class="dropdown_1column-a"><nav class="col_1" aria-label="About">
    <ul role="presentation">
        <li><a href="https://ocw.mit.edu/about/">About MIT OpenCourseWare</a></li>
        <li><a href="https://ocw.mit.edu/about/site-statistics/">Site Statistics</a></li>
        <li><a href="https://ocw.mit.edu/about/ocw-stories/">OCW Stories</a></li>
        <li><a href="https://ocw.mit.edu/about/newsletter/">Newsletter</a></li>
        <li><a href="https://chalk-radio.simplecast.com/">Chalk Radio Podcast</a></li>
        <li><a href="https://www.ocw-openmatters.org/">Open Matters Blog</a></li>
    </ul>
    </nav></div>
    </li>
</ul>
</nav></div></div>

</div>





<!--googleoff: index-->
<script>
  (function() {
	var cx = '012626166551961672889:owjdpuboktq';
	var gcse = document.createElement('script');
	gcse.type = 'text/javascript';
	gcse.async = true;
	gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
	var s = document.getElementsByTagName('script')[0];
	s.parentNode.insertBefore(gcse, s);
  })();
  window.onload = function(){
	document.getElementById('gsc-i-id1').placeholder = 'Search';	
  };

$(document).ready(function(){

$('.advanceSearch a').keydown(function(event){showSearchTips($(this),event);})
$('#searchTipsModal').keydown(function(event){showSearchTips($(this),event);})

function showSearchTips(obj,evt) {
// if pressed enter key
	if ( evt.which == 13 || evt.which == 32) {
		showModal();
		ga('send', 'pageview', "AdvanceSearch");
		$(".advanceSearch a").attr('aria-expanded', 'true');
		$('.searchTipsModal').focus();
		evt.preventDefault();
		}
	if ( evt.which == 27 ) {
		hideModal();
		$(".advanceSearch a").attr('aria-expanded', 'false');
		var modal = document.getElementById('searchTipsModal');
		modal.style.display = "none";
		$(".advanceSearch a").focus();
		evt.preventDefault();
		}
}

});
function showModal(){
	var modal = document.getElementById('searchTipsModal');
	modal.style.display = "block";
	ga('send', 'pageview', "AdvanceSearch");
	document.getElementById("searchTipsBtn").setAttribute("aria-expanded", true);
	window.setTimeout(function () {
    document.getElementById('searchTipsModal').focus(); }, 0);
}

function hideModal(){
	var modal = document.getElementById('searchTipsModal');
	modal.style.display = "none";
	document.getElementById("searchTipsBtn").setAttribute("aria-expanded", false);
}
</script>
<div id="search" role="search" class="grid_4 omega">
    	<table class="search">
				<tbody>
					<tr>
						<td><div class="searchboxheader"><searchbox-only resultsurl="/search/ocwsearch.htm"></searchbox-only></div></td>
						<td>
							<div class="advanceSearch">
								<a id="searchTipsBtn" onclick="showModal();" href="#" role="button" aria-label="search tips" aria-expanded="false" aria-describedby="searchtips">Search Tips</a>

								<!-- The Modal -->
								<div id="searchTipsModal" class="modal" tabindex="-1">
								  <!-- Modal content -->
									<div class="modal-content">
										<div class="modal-body">
											<button class="close" onclick="hideModal();" aria-label="close">X</button>
											<span>
												<b>Exclude words from your search</b>
												<br>Put - in front of a word you want to leave out. For example, jaguar speed -car
												<br><br>
												<b>Search for an exact match</b>
												<br>Put a word or phrase inside quotes. For example, "tallest building".
												<br><br>
												<b>Search for wildcards or unknown words</b>
												<br>Put a * in your word or phrase where you want to leave a placeholder. For example, "largest * in the world".
												<br><br>
												<b>Search within a range of numbers</b>
												<br>Put .. between two numbers. For example, camera $50..$100.
												<br><br>
												<b>Combine searches</b>
												<br>Put "OR" between each search query. For example,  marathon OR race.
												<br><br>
											</span>
										</div>
								  </div>
								</div>
							</div>
						</td>
					</tr>
				</tbody>
		</table>
</div>
<div class="clear"></div>
<!--googleon: index-->
<!-- *end header* -->

				
				
			</div>
<!-- top grid end -->
		</header><!-- top end -->
			
		<div id="center_media">
      	<div id="grid">
      		<div id="left">
        		<nav id="breadcrumb_media" aria-label="Breadcrumb">
                	<p>

    <a href="https://ocw.mit.edu/">Home</a>
    
        »
        
    
    
        
            <a href="https://ocw.mit.edu/courses">Courses</a>
            
                »
                
            
            
         
    
    
        
            <a href="https://ocw.mit.edu/courses/electrical-engineering-and-computer-science">Electrical Engineering and Computer Science</a>
            
                »
                
            
            
         
    
    
        
            <a href="../../../contents/index.htm">Introduction to EECS II: Digital Communication Systems</a>
            
                »
                
            
            
         
    
    
        
            <a href="../../../contents/lecture-videos/index.htm">Lecture Videos</a>
            
                »
                
            
            
         
    
    
        
            
            
            Lecture 21: Reliable Transport
         
    
</p>

            	</nav>
            	<div class="clear"></div>
        		<div id="media_title">
        		<h1 class="title" itemprop="name" property="dct:title">
        <span class="" id="parent-fieldname-title">
            Lecture 21: Reliable Transport
        </span>
    </h1>
        		</div>
           		<div class="clear"></div>
           		<div id="course_wrapper_media">
           			<nav id="course_nav" aria-label="Course">
           				<script language="javascript" type="text/javascript">
function toggleMenu(objID) {
  if (!document.getElementById) return;
  var ob = document.getElementById(objID);
  ob.className = (ob.className == 'selected')?'': 'selected';
}
function toggleClass(id)
{
  var divtoggleClass= document.getElementById(id);
  divtoggleClass.className = (divtoggleClass.className == 'mO')?'mC': 'mO';
  return false;
}
function changeAlt(id)
{
  id.alt = (id.alt == 'Expand Menu')?'Collapse Menu' : 'Expand Menu';
  id.title = (id.title == 'Expand Menu')?'Collapse Menu' : 'Expand Menu';
}
</script>
<!--Left Nav Starts -->


	<ul>			  
	
	    	
	    	    <li class="">
			   			<a href="../../../contents/index.htm">
		                  Course Home  			                
	                    </a>
		        </li>
		    
         	
	
	
	    	
         	<li class="">
       		<div class="tlp_links">
	        	<div id="syllabus" class="mO">
						<a href="#" class="" onclick="toggleMenu('menusyllabus'); toggleClass('syllabus'); return false">
		                  <img src="../../../common/images/trans.gif" class="expandCollapseTrans" border="0" width="10" height="12" onclick="changeAlt(this)" alt="Expand Menu" title="Expand Menu">
		                </a>
		                <a href="../../../contents/syllabus/index.htm" class="">
		                  Syllabus  			                
	                    </a>
	                 			                
	            </div>
			    
	        	<ul id="menusyllabus" class="">
					               
		            <li class="">
				 		<a href="../../../contents/syllabus/software/index.htm" class="">Software</a>
		            </li>
			    </ul>
			    
			</div>
			</li>
	
	
	    	
	    	    <li class="">
			   			<a href="../../../contents/calendar/index.htm">
		                  Calendar  			                
	                    </a>
		        </li>
		    
         	
	
	
	    	
	    	    <li class="">
			   			<a href="../../../contents/readings/index.htm">
		                  Readings  			                
	                    </a>
		        </li>
		    
         	
	
	
	    	
	    	    <li class="">
			   			<a href="../../../contents/lecture-slides/index.htm">
		                  Lecture Slides  			                
	                    </a>
		        </li>
		    
         	
	
	
	    	
	    	    <li class="selected">
			   			<a href="../../../contents/lecture-videos/index.htm">
		                  Lecture Videos  			                
	                    </a>
		        </li>
		    
         	
	
	
	    	
	    	    <li class="">
			   			<a href="../../../contents/tutorials/index.htm">
		                  Tutorials  			                
	                    </a>
		        </li>
		    
         	
	
	
	    	
	    	    <li class="">
			   			<a href="../../../contents/assignments/index.htm">
		                  Assignments  			                
	                    </a>
		        </li>
		    
         	
	
	
	    	
	    	    <li class="">
			   			<a href="../../../contents/exams/index.htm">
		                  Exams  			                
	                    </a>
		        </li>
		    
         	
	
	
	    	
	    	    
		    
         	
	<!--second tal block close-->  
	
</ul>


<!--Left Nav Ends -->





           			</nav>
           			<main id="course_inner_media" aria-labelledby="media_title">
      					 
        <div class="" id="parent-fieldname-text">
            
            
        </div>
    
      					     
    
    



<script type="text/javascript">var caption_embed_1 ={'English - US': '/courses/electrical-engineering-and-computer-science/6-02-introduction-to-eecs-ii-digital-communication-systems-fall-2012/lecture-videos/lecture-21-reliable-transport/qpYjftJbGYI.srt'}</script>     
     <div id="media-embed">
         <div class="attention_message" id="embed_1">
<p>Flash and JavaScript are required for this feature.</p>
<p>Download the video from <a href="https://itunes.apple.com/us/itunes-u/introduction-to-eecs-ii-digital/id835987738">iTunes U</a> or the <a href="http://www.archive.org/download/MIT6.02F12/MIT6_02F12_lec21_300k.mp4">Internet Archive</a>.</p>
</div>
     </div>
    
     <script type="text/javascript">ocw_embed_chapter_media('embed_1', 'https://www.youtube.com/v/qpYjftJbGYI', 'youtube', '/courses/electrical-engineering-and-computer-science/6-02-introduction-to-eecs-ii-digital-communication-systems-fall-2012/lecture-videos/lecture-21-reliable-transport', 'https://img.youtube.com/vi/qpYjftJbGYI/0.jpg',0,0, 'https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-02-introduction-to-eecs-ii-digital-communication-systems-fall-2012/lecture-videos/lecture-21-reliable-transport/qpYjftJbGYI.srt')</script>
	 
	 
	 		
	 		<div id="transcript1"></div>
				 <script type="text/javascript">createThreePlayParams(2, 5889878, "embed_1", 0, 0)</script>
			 
	

     <div id="media_resource_next_prev_nav" style="margin-top: 1em;">
        <p>
        
            <a href="../../../contents/lecture-videos/lecture-20-network-routing-with-failures/index.htm">
                <img src="../../../common/images/btn_previous_resource.png" style="margin: 0 30px 0 50px;" alt="Previous track" title="Previous track"></a>
     	
     	
        
            <a href="../../../contents/lecture-videos/lecture-22-sliding-window-analysis-littles-law/index.htm"> 
                <img src="../../../common/images/btn_next_resource.png" alt="Next track" title="Next track"></a>
       
       </p>
     </div>
 


<script type="text/javascript">
		window.onload=function(){
		init();
		
		}
		var tabLinks = new Array();
		var contentDivs = new Array();
		function init() {
		  // Grab the tab links and content divs from the page
		  var tabListItems = document.getElementById('tabs').childNodes;
		  for ( var i = 0; i < tabListItems.length; i++ ) {
			if ( tabListItems[i].nodeName == "LI" ) {
			  var tabLink = getFirstChildWithTagName( tabListItems[i], 'A' );
			  var id = getHash( tabLink.getAttribute('href') );
			  tabLinks[id] = tabLink;
			  contentDivs[id] = document.getElementById( id );
			}
		  }
		  // Assign onclick events to the tab links, and
		  // highlight the first tab
		  var i = 0;
		  for ( var id in tabLinks ) {
			tabLinks[id].onclick = showTab;
			tabLinks[id].onfocus = function() { this.blur() };
			if ( i == 0 ) tabLinks[id].className = 'selected';
			i++;
		  }
		  // Hide all content divs except the first
		  var i = 0;
		  for ( var id in contentDivs ) {
			if ( i != 0 ) contentDivs[id].className = 'tabContent hide';
			i++;
		  }
		}
		function showTab() {
		  var selectedId = getHash( this.getAttribute('href') );
		  // Highlight the selected tab, and dim all others.
		  // Also show the selected content div, and hide all others.
		  for ( var id in contentDivs ) {
			if ( id == selectedId ) {
			  tabLinks[id].className = 'selected';
			  contentDivs[id].className = 'tabContent';
			} else {
			  tabLinks[id].className = '';
			  contentDivs[id].className = 'tabContent hide';
			}
		  }
		  // Stop the browser following the link
		  return false;
		}
		function getFirstChildWithTagName( element, tagName ) {
		  for ( var i = 0; i < element.childNodes.length; i++ ) {
			if ( element.childNodes[i].nodeName == tagName ) return element.childNodes[i];
		  }
		}
		function getHash( url ) {
		  var hashPos = url.lastIndexOf ( '#' );
		  return url.substring( hashPos + 1 );
		}
 </script>	
 

  <div id="media_tabs">
     
        <ul id="tabs">
            <li class="first">
                <a href="#vid_about" class="selected">About this Video</a>
            </li>
            <li class="">
                <a href="#vid_index" class="">Playlist</a>
            </li>
            <li class="">
                <a href="#vid_playlist" class="">Transcript</a>
            </li>
            <li class="">
                <a href="#vid_related" class="">Download this Video</a>
            </li>
        </ul>
   
        <div id="vid_about" itemprop="description" class="tabContent">
<p><strong>Description:</strong> This lecture covers implementation of TCP and providing reliable data transfer. The stop-and-wait and sliding window protocols are discussed with their benefits and disadvantages in preventing lost or duplicate packets.</p>
<p><strong>Instructor:</strong> Hari Balakrishnan</p>
</div>
        <div id="vid_index" itemprop="description" class="tabContent hide">
<div class="related-media-thumbnail">
<a href="../../../contents/lecture-videos/lecture-1-overview-information-and-entropy/index.htm">
<img src="https://img.youtube.com/vi/BtaVq2g17G0/default.jpg" title="Lecture 1: Overview: Information and Entropy" alt="Lecture 1: Overview: Information and Entropy">
<p>Lecture 1: Overview: Inform...</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/lecture-videos/lecture-2-compression-huffman-and-lzw/index.htm">
<img src="https://img.youtube.com/vi/WafWLM41pQ0/default.jpg" title="Lecture 2: Compression: Huffman and LZW" alt="Lecture 2: Compression: Huffman and LZW">
<p>Lecture 2: Compression: Huf...</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/lecture-videos/lecture-3-errors-channel-codes/index.htm">
<img src="https://img.youtube.com/vi/HkmAT9eVYSo/default.jpg" title="Lecture 3: Errors, Channel Codes" alt="Lecture 3: Errors, Channel Codes">
<p>Lecture 3: Errors, Channel ...</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/lecture-videos/lecture-4-linear-block-codes-parity-relations/index.htm">
<img src="https://img.youtube.com/vi/5YyUArlg8Sg/default.jpg" title="Lecture 4: Linear Block Codes, Parity Relations" alt="Lecture 4: Linear Block Codes, Parity Relations">
<p>Lecture 4: Linear Block Cod...</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/lecture-videos/lecture-5-error-correction-syndrome-decoding/index.htm">
<img src="https://img.youtube.com/vi/jNzdhBVU620/default.jpg" title="Lecture 5: Error Correction, Syndrome Decoding" alt="Lecture 5: Error Correction, Syndrome Decoding">
<p>Lecture 5: Error Correction...</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/lecture-videos/lecture-6-convolutional-codes/index.htm">
<img src="https://img.youtube.com/vi/ytGmd25_10k/default.jpg" title="Lecture 6: Convolutional Codes" alt="Lecture 6: Convolutional Codes">
<p>Lecture 6: Convolutional Codes</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/lecture-videos/lecture-7-viterbi-decoding/index.htm">
<img src="https://img.youtube.com/vi/POetF9rX7Zw/default.jpg" title="Lecture 7: Viterbi Decoding" alt="Lecture 7: Viterbi Decoding">
<p>Lecture 7: Viterbi Decoding</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/lecture-videos/lecture-8-noise/index.htm">
<img src="https://img.youtube.com/vi/JJdzY3OTzEg/default.jpg" title="Lecture 8: Noise" alt="Lecture 8: Noise">
<p>Lecture 8: Noise</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/lecture-videos/lecture-9-transmitting-on-a-physical-channel/index.htm">
<img src="https://img.youtube.com/vi/RG3CkwIDYfI/default.jpg" title="Lecture 9: Transmitting on a Physical Channel" alt="Lecture 9: Transmitting on a Physical Channel">
<p>Lecture 9: Transmitting on ...</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/lecture-videos/lecture-10-linear-time-invariant-lti-systems/index.htm">
<img src="https://img.youtube.com/vi/gF9Q0wNGENc/default.jpg" title="Lecture 10: Linear Time-Invariant (LTI) Systems" alt="Lecture 10: Linear Time-Invariant (LTI) Systems">
<p>Lecture 10: Linear Time-Inv...</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/lecture-videos/lecture-11-lti-channel-and-intersymbol-interference/index.htm">
<img src="https://img.youtube.com/vi/fQcJNoe-q-s/default.jpg" title="Lecture 11: LTI Channel and Intersymbol Interference" alt="Lecture 11: LTI Channel and Intersymbol Interference">
<p>Lecture 11: LTI Channel and...</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/lecture-videos/lecture-12-filters-and-composition/index.htm">
<img src="https://img.youtube.com/vi/jQM_gpIXBFs/default.jpg" title="Lecture 12: Filters and Composition" alt="Lecture 12: Filters and Composition">
<p>Lecture 12: Filters and Com...</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/lecture-videos/lecture-13-frequency-response-of-lti-systems/index.htm">
<img src="https://img.youtube.com/vi/Te1qKOJd8aw/default.jpg" title="Lecture 13: Frequency Response of LTI Systems" alt="Lecture 13: Frequency Response of LTI Systems">
<p>Lecture 13: Frequency Respo...</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/lecture-videos/lecture-14-spectral-representation-of-signals/index.htm">
<img src="https://img.youtube.com/vi/U1sAeMwdm6A/default.jpg" title="Lecture 14: Spectral Representation of Signals" alt="Lecture 14: Spectral Representation of Signals">
<p>Lecture 14: Spectral Repres...</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/lecture-videos/lecture-15-modulation-demodulation/index.htm">
<img src="https://img.youtube.com/vi/7kpuZgm-3GY/default.jpg" title="Lecture 15: Modulation/Demodulation" alt="Lecture 15: Modulation/Demodulation">
<p>Lecture 15: Modulation/Demo...</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/lecture-videos/lecture-16-more-on-modulation-demodulation/index.htm">
<img src="https://img.youtube.com/vi/QfaGCnfWpus/default.jpg" title="Lecture 16: More on Modulation/Demodulation" alt="Lecture 16: More on Modulation/Demodulation">
<p>Lecture 16: More on Modulat...</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/lecture-videos/lecture-17-packet-switching/index.htm">
<img src="https://img.youtube.com/vi/9HCUnJB9ovk/default.jpg" title="Lecture 17: Packet Switching" alt="Lecture 17: Packet Switching">
<p>Lecture 17: Packet Switching</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/lecture-videos/lecture-18-mac-protocols/index.htm">
<img src="https://img.youtube.com/vi/y02p8znNAKk/default.jpg" title="Lecture 18: MAC Protocols" alt="Lecture 18: MAC Protocols">
<p>Lecture 18: MAC Protocols</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/lecture-videos/lecture-19-network-routing-without-failures/index.htm">
<img src="https://img.youtube.com/vi/2QxgN2ugcMY/default.jpg" title="Lecture 19: Network Routing (without failures)" alt="Lecture 19: Network Routing (without failures)">
<p>Lecture 19: Network Routing...</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/lecture-videos/lecture-20-network-routing-with-failures/index.htm">
<img src="https://img.youtube.com/vi/EG6PPYma050/default.jpg" title="Lecture 20: Network Routing (with failures)" alt="Lecture 20: Network Routing (with failures)">
<p>Lecture 20: Network Routing...</p></a>
</div>
<div class="related-media-thumbnail-nolink">
<div class="now-playing-resource">Now Playing</div>
<img src="https://img.youtube.com/vi/qpYjftJbGYI/default.jpg" title="Lecture 21: Reliable Transport" alt="Lecture 21: Reliable Transport">
<p>Lecture 21: Reliable Transport</p>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/lecture-videos/lecture-22-sliding-window-analysis-littles-law/index.htm">
<img src="https://img.youtube.com/vi/xa38Q2_pnlQ/default.jpg" title="Lecture 22: Sliding Window Analysis, Little's Law" alt="Lecture 22: Sliding Window Analysis, Little's Law">
<p>Lecture 22: Sliding Window ...</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/lecture-videos/lecture-23-a-brief-history-of-the-internet/index.htm">
<img src="https://img.youtube.com/vi/oIezCGjxV3A/default.jpg" title="Lecture 23: A Brief History of the Internet" alt="Lecture 23: A Brief History of the Internet">
<p>Lecture 23: A Brief History...</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/lecture-videos/lecture-24-history-of-the-internet-contd-course-summary/index.htm">
<img src="https://img.youtube.com/vi/RN4gSBTANUY/default.jpg" title="Lecture 24: History of the Internet cont'd, Course Summary" alt="Lecture 24: History of the Internet cont'd, Course Summary">
<p>Lecture 24: History of the ...</p></a>
</div>
</div>
        <div id="vid_playlist" itemprop="description" class="tabContent hide">
<ul><li><a class="transcript-link" title="Open in a new window." alt="Open in a new window." style="text-decoration: none; font-size: 1.0em;" target="_blank" text-decoration: none font-size: href="../../../contents/lecture-videos/lecture-21-reliable-transport/qpYjftJbGYI.pdf"> Download English-US transcript (PDF)</a></li></ul>
<p><span m="90">The</span> <span m="180">following</span> <span m="630">content</span> <span m="1200">is</span> <span m="1320">provided</span> <span m="1800">under</span> <span m="2040">a</span> <span m="2070">Creative</span> <span m="2490">Commons</span> <span m="2910">license.</span> <span m="4059">Your</span> <span m="4200">support</span> <span m="4710">will</span> <span m="4890">help</span> <span m="5120">MIT</span> <span m="5820">OpenCourseWare</span> <span m="6360">continue</span> <span m="6870">to</span> <span m="6990">offer</span> <span m="7380">high-quality</span> <span m="8130">educational</span> <span m="8730">resources</span> <span m="9360">for</span> <span m="9540">free.</span> <span m="10720">To</span> <span m="10740">make</span> <span m="10950">a</span> <span m="10980">donation</span> <span m="11760">or</span> <span m="11940">view</span> <span m="12420">additional</span> <span m="12810">materials</span> <span m="13350">from</span> <span m="13530">hundreds</span> <span m="13950">of</span> <span m="14070">MIT</span> <span m="14460">courses,</span> <span m="15480">visit</span> <span m="15810">MIT</span> <span m="16440">OpenCourseWare</span> <span m="17290">at</span> <span m="17450">ocw.mit.edu.</span> </p>
<p><span m="26145">HARI BALAKRISHNAN:</span> <span m="26377">So,</span> <span m="26610">good</span> <span m="26730">afternoon.</span> <span m="27090">Continuing</span> <span m="27570">our</span> <span m="28080">story</span> <span m="28740">about</span> <span m="29040">networks,</span> <span m="30280">what</span> <span m="30330">we've</span> <span m="30480">seen</span> <span m="30690">so</span> <span m="30870">far</span> <span m="32060">is</span> <span m="32250">a</span> <span m="32280">story</span> <span m="32670">where</span> <span m="33660">you</span> <span m="33780">have</span> <span m="33930">a</span> <span m="33990">network</span> <span m="34470">that</span> <span m="34950">you're</span> <span m="35070">trying</span> <span m="35250">to</span> <span m="35340">connect</span> <span m="36180">computers</span> <span m="36660">to</span> <span m="36750">communicate</span> <span m="37200">together.</span> <span m="37650">And</span> <span m="38790">we</span> <span m="39060">use</span> <span m="39780">a</span> <span m="39900">network</span> <span m="40260">with</span> <span m="40680">switches</span> <span m="42600">arranged</span> <span m="42980">in</span> <span m="43110">some</span> <span m="43290">topology</span> <span m="48570">to</span> <span m="48690">allow</span> <span m="48960">us</span> <span m="49110">to</span> <span m="49440">find</span> <span m="49770">paths</span> <span m="50190">between</span> <span m="50490">computers.</span> <span m="51390">And</span> <span m="51510">so</span> <span m="51630">we</span> <span m="51750">looked</span> <span m="51960">at</span> <span m="52020">the</span> <span m="52110">routing</span> <span m="52380">problem.</span> <span m="52860">We</span> <span m="52920">looked</span> <span m="53100">at</span> <span m="53160">two</span> <span m="53280">different</span> <span m="53550">routing</span> <span m="53820">protocols</span> <span m="54300">to</span> <span m="54390">solve</span> <span m="54660">that.</span> </p>
<p><span m="57180">Earlier,</span> <span m="57600">we</span> <span m="57750">talked</span> <span m="58050">about</span> <span m="58260">this</span> <span m="58440">idea</span> <span m="58740">of</span> <span m="58830">a</span> <span m="58890">packet-switched</span> <span m="59520">network</span> <span m="60030">and</span> <span m="60160">there</span> <span m="60300">are queues</span> <span m="60585">in</span> <span m="60870">packet-switched</span> <span m="61470">networks.</span> <span m="61980">And</span> <span m="62130">when</span> <span m="63060">traffic</span> <span m="63450">comes</span> <span m="63720">in</span> <span m="63810">too</span> <span m="64019">fast,</span> <span m="64530">and</span> <span m="64709">the</span> <span m="64830">queues</span> <span m="65190">overflow,</span> <span m="65670">packets</span> <span m="65940">may</span> <span m="66210">get</span> <span m="66330">dropped.</span> <span m="67410">We</span> <span m="67530">also</span> <span m="67740">looked</span> <span m="67980">before</span> <span m="68370">at</span> <span m="68880">links</span> <span m="69270">which</span> <span m="69450">have</span> <span m="69630">errors</span> <span m="70050">on</span> <span m="70200">them.</span> <span m="70570">And</span> <span m="70670">so</span> <span m="70820">if</span> <span m="70920">you</span> <span m="71040">have</span> <span m="71250">errors</span> <span m="71640">on</span> <span m="71760">links,</span> <span m="72230">then</span> <span m="72420">your</span> <span m="73290">coding</span> <span m="73620">scheme</span> <span m="74010">isn't</span> <span m="74250">able</span> <span m="74460">to</span> <span m="74520">correct</span> <span m="74790">for</span> <span m="74940">those</span> <span m="75120">errors,</span> <span m="75810">packets</span> <span m="76170">may</span> <span m="76290">get</span> <span m="76470">lost.</span> <span m="77680">And</span> <span m="77820">when</span> <span m="77940">we</span> <span m="78030">looked</span> <span m="78270">at</span> <span m="78390">shared</span> <span m="78720">media</span> <span m="79020">networks</span> <span m="79470">with</span> <span m="79620">MAC</span> <span m="79890">protocols,</span> <span m="80760">depending</span> <span m="81120">on</span> <span m="81180">the</span> <span m="81240">MAC</span> <span m="81450">protocol</span> <span m="81780">you</span> <span m="81870">use,</span> <span m="82180">you</span> <span m="82280">may</span> <span m="82380">collisions,</span> <span m="83530">which</span> <span m="83610">means</span> <span m="83820">that</span> <span m="83910">packets</span> <span m="84270">may</span> <span m="85110">get</span> <span m="85230">lost.</span> </p>
<p><span m="86980">So</span> <span m="87030">what</span> <span m="87210">you</span> <span m="87330">have</span> <span m="87900">is</span> <span m="88320">a</span> <span m="88530">packet-switched</span> <span m="89190">network</span> <span m="89640">that</span> <span m="89850">has</span> <span m="90150">the</span> <span m="90240">property</span> <span m="90600">of</span> <span m="90660">something</span> <span m="91020">called</span> <span m="91380">a</span> <span m="91530">best-effort</span> <span m="92250">network.</span> <span m="97470">And</span> <span m="97590">what</span> <span m="97810">"best</span> <span m="98100">effort"</span> <span m="98400">means</span> <span m="98940">is</span> <span m="99180">that</span> <span m="100230">the</span> <span m="100350">network</span> <span m="100620">has</span> <span m="100860">a</span> <span m="100920">few</span> <span m="101160">properties</span> <span m="102330">that</span> <span m="102480">you</span> <span m="102540">have</span> <span m="102660">to</span> <span m="102750">cope</span> <span m="102990">with.</span> <span m="103260">The</span> <span m="103350">first</span> <span m="103560">property</span> <span m="103950">of</span> <span m="104030">a</span> <span m="104900">best-effort</span> <span m="105270">network</span> <span m="105630">is</span> <span m="105810">that</span> <span m="107280">packets</span> <span m="107580">may</span> <span m="107730">get</span> <span m="107850">lost.</span> <span m="114600">The</span> <span m="114660">second</span> <span m="114990">problem</span> <span m="115350">in</span> <span m="115430">a</span> <span m="115470">best-effort</span> <span m="116100">issue</span> <span m="116460">that</span> <span m="116580">arises</span> <span m="116970">in</span> <span m="117060">a</span> <span m="117120">best-effort</span> <span m="117630">network</span> <span m="117990">is</span> <span m="118230">that</span> <span m="120690">packets</span> <span m="121140">have</span> <span m="121350">delays,</span> <span m="122130">but</span> <span m="122280">the</span> <span m="122370">delays</span> <span m="122690">are</span> <span m="122760">variable.</span> <span m="127280">And</span> <span m="127770">particular</span> <span m="128220">queuing</span> <span m="128550">delays</span> <span m="128910">that</span> <span m="129030">happen</span> <span m="129530">in</span> <span m="129750">switches</span> <span m="130259">are</span> <span m="130919">variable</span> <span m="131400">delays.</span> </p>
<p><span m="134830">The</span> <span m="135080">good</span> <span m="135260">property</span> <span m="135680">of</span> <span m="135800">a</span> <span m="135890">packet-switched</span> <span m="136430">network</span> <span m="136730">is</span> <span m="136850">that</span> <span m="137300">each</span> <span m="137630">packet</span> <span m="138710">is</span> <span m="138890">treated</span> <span m="140030">independently</span> <span m="140570">by</span> <span m="140720">the</span> <span m="140810">network.</span> <span m="141270">So</span> <span m="141320">it</span> <span m="141410">could</span> <span m="141620">be</span> <span m="141800">that</span> <span m="141980">you</span> <span m="142070">have</span> <span m="142340">a</span> <span m="142370">stream</span> <span m="142730">of</span> <span m="142850">packets</span> <span m="143270">you</span> <span m="143360">want</span> <span m="143510">to</span> <span m="143570">send,</span> <span m="144220">say,</span> <span m="144440">belonging</span> <span m="144860">to</span> <span m="144980">a</span> <span m="145040">video</span> <span m="145850">stream</span> <span m="146330">or</span> <span m="146420">a</span> <span m="146480">file.</span> <span m="147740">And</span> <span m="148040">the</span> <span m="148160">sender</span> <span m="148460">sends</span> <span m="148820">them</span> <span m="149030">in</span> <span m="149150">some</span> <span m="149480">sequential</span> <span m="150050">order,</span> <span m="150890">but</span> <span m="151070">these</span> <span m="151280">packets</span> <span m="151700">may</span> <span m="151910">take</span> <span m="152180">different</span> <span m="152510">paths</span> <span m="152930">through</span> <span m="153140">the</span> <span m="153230">network.</span> </p>
<p><span m="154550">And</span> <span m="154790">in</span> <span m="154880">fact,</span> <span m="155160">there</span> <span m="155170">may</span> <span m="155260">be</span> <span m="155390">switches</span> <span m="155720">in</span> <span m="155780">the</span> <span m="155840">network,</span> <span m="156290">for</span> <span m="156530">whatever</span> <span m="156830">reason,</span> <span m="157190">that</span> <span m="157340">may</span> <span m="157490">not</span> <span m="157640">treat</span> <span m="157910">packets</span> <span m="158540">in</span> <span m="159380">first</span> <span m="159770">in,</span> <span m="159860">first</span> <span m="160280">out</span> <span m="160730">order.</span> <span m="161210">They</span> <span m="161240">may</span> <span m="161370">reorder</span> <span m="161780">packets.</span> <span m="162530">But</span> <span m="162710">more</span> <span m="162890">generally,</span> <span m="163370">packets</span> <span m="163760">may</span> <span m="163910">take</span> <span m="164090">different</span> <span m="164420">paths</span> <span m="164810">through</span> <span m="164990">the</span> <span m="165080">network</span> <span m="165440">because</span> <span m="166610">the</span> <span m="166730">routing</span> <span m="167000">protocol</span> <span m="167420">might</span> <span m="167540">decide</span> <span m="167870">to</span> <span m="167990">change</span> <span m="168290">the</span> <span m="168380">paths</span> <span m="168740">on</span> <span m="168890">you,</span> <span m="169550">and</span> <span m="169670">so</span> <span m="169790">packets</span> <span m="170150">make</span> <span m="170310">get</span> <span m="170420">reordered.</span> </p>
<p><span m="179120">And</span> <span m="179270">the</span> <span m="179360">fourth</span> <span m="179720">issue</span> <span m="180410">in</span> <span m="180600">a</span> <span m="181490">best-effort</span> <span m="182000">network</span> <span m="183350">is</span> <span m="183500">that,</span> <span m="183620">in</span> <span m="183710">fact,</span> <span m="183980">packets</span> <span m="184310">may</span> <span m="184520">get</span> <span m="184580">duplicated.</span> <span m="185990">So</span> <span m="186140">you</span> <span m="186260">may</span> <span m="186410">have</span> <span m="187280">the</span> <span m="187370">same</span> <span m="187610">packet</span> <span m="187940">show</span> <span m="188150">up</span> <span m="188300">multiple</span> <span m="188660">times</span> <span m="189110">even</span> <span m="189350">though</span> <span m="189470">it</span> <span m="189560">was</span> <span m="189650">sent</span> <span m="189920">only</span> <span m="190070">once</span> <span m="191210">for</span> <span m="191420">a</span> <span m="191450">bunch</span> <span m="191720">of</span> <span m="191780">reasons.</span> <span m="192240">One</span> <span m="192290">of</span> <span m="192350">them</span> <span m="192530">is</span> <span m="192680">that</span> <span m="192770">there</span> <span m="192920">could</span> <span m="193040">be</span> <span m="193130">problems</span> <span m="193580">in</span> <span m="193700">the</span> <span m="194180">implementation</span> <span m="194870">of</span> <span m="194960">the</span> <span m="195050">switches</span> <span m="195590">or</span> <span m="195710">the</span> <span m="195830">nodes</span> <span m="196190">that</span> <span m="196370">cause</span> <span m="196700">packets</span> <span m="197090">to</span> <span m="197180">get</span> <span m="197300">duplicated.</span> </p>
<p><span m="198800">But</span> <span m="198890">it</span> <span m="198980">could</span> <span m="199130">also</span> <span m="199490">be</span> <span m="199760">that</span> <span m="200060">you</span> <span m="200210">may</span> <span m="200360">have</span> <span m="200750">a</span> <span m="200930">link</span> <span m="201380">with</span> <span m="201800">a</span> <span m="202490">high</span> <span m="202910">packet</span> <span m="203270">loss</span> <span m="203600">rate,</span> <span m="203840">or</span> <span m="203930">this</span> <span m="204110">may</span> <span m="204290">be</span> <span m="204470">a</span> <span m="204560">shared</span> <span m="205310">medium</span> <span m="205790">where</span> <span m="205970">you</span> <span m="206120">have</span> <span m="206540">a</span> <span m="206600">MAC</span> <span m="206870">protocol</span> <span m="207260">that</span> <span m="207380">has</span> <span m="207560">collisions.</span> <span m="208470">So</span> <span m="208520">you</span> <span m="208670">may</span> <span m="208880">have</span> <span m="209300">a</span> <span m="209400">retransmission</span> <span m="210140">protocol--</span> <span m="210620">let</span> <span m="210770">me</span> <span m="210890">try</span> <span m="211340">to</span> <span m="211520">resend</span> <span m="211980">the</span> <span m="212060">packet</span> <span m="212390">a</span> <span m="212420">few</span> <span m="212630">times</span> <span m="213560">at</span> <span m="213680">the</span> <span m="213800">lowest</span> <span m="214160">layer</span> <span m="215140">over</span> <span m="215430">a</span> <span m="215600">shared</span> <span m="215900">medium</span> <span m="216260">or a</span> <span m="216440">link.</span> <span m="218030">And</span> <span m="218450">sometimes,</span> <span m="219080">multiple</span> <span m="219470">versions</span> <span m="219830">of the</span> <span m="220020">multiple</span> <span m="220370">copies</span> <span m="220820">of</span> <span m="220880">the</span> <span m="220970">same</span> <span m="221180">packet</span> <span m="221570">may</span> <span m="221720">get</span> <span m="221930">through.</span> <span m="222170">And</span> <span m="222290">we'll actually</span> <span m="222680">understand</span> <span m="223040">why</span> <span m="223220">that</span> <span m="223340">happens</span> <span m="224120">more</span> <span m="224390">today.</span> <span m="225140">So</span> <span m="225320">packets</span> <span m="225680">may</span> <span m="225870">get</span> <span m="226670">duplicated.</span> </p>
<p><span m="228860">So</span> <span m="229100">in</span> <span m="229220">a</span> <span m="229310">way,</span> <span m="230780">a</span> <span m="230930">packet-switched</span> <span m="231500">network</span> <span m="231690">like</span> <span m="231890">the</span> <span m="231980">internet</span> <span m="232340">is</span> <span m="232460">great</span> <span m="232760">because</span> <span m="233090">it's</span> <span m="233240">very</span> <span m="233480">easy</span> <span m="233750">to</span> <span m="233870">build.</span> <span m="234860">And</span> <span m="234950">the</span> <span m="235010">reason</span> <span m="235280">it's</span> <span m="235430">easy</span> <span m="235640">to</span> <span m="235730">build</span> <span m="235970">in</span> <span m="236060">some</span> <span m="236270">sense</span> <span m="236540">is</span> <span m="236630">because</span> <span m="237800">about</span> <span m="238070">the</span> <span m="238190">only</span> <span m="238520">property</span> <span m="239000">that</span> <span m="239150">you're</span> <span m="239240">providing</span> <span m="239720">from</span> <span m="240080">the</span> <span m="240170">design</span> <span m="240590">of</span> <span m="240680">the</span> <span m="240740">network</span> <span m="241130">is</span> <span m="241250">to</span> <span m="241370">tell</span> <span m="241820">the</span> <span m="241970">endpoints,</span> <span m="243080">oh,</span> <span m="243250">I</span> <span m="243410">might</span> <span m="243680">get</span> <span m="243890">your</span> <span m="244010">package</span> <span m="244430">through.</span> <span m="245360">There's</span> <span m="245510">no</span> <span m="245690">guarantees</span> <span m="246140">on</span> <span m="246260">anything.</span> <span m="247580">As</span> <span m="247730">long</span> <span m="247940">as</span> <span m="248030">there's</span> <span m="248180">some</span> <span m="248420">non-zero</span> <span m="248930">probability</span> <span m="249500">of</span> <span m="249590">getting</span> <span m="249830">a</span> <span m="249890">packet</span> <span m="250250">through</span> <span m="250580">from</span> <span m="250790">one</span> <span m="251030">endpoint</span> <span m="251390">to</span> <span m="251480">the</span> <span m="251630">other,</span> <span m="252380">that's</span> <span m="252590">pretty</span> <span m="252800">much</span> <span m="253010">all</span> <span m="253220">it</span> <span m="253280">takes</span> <span m="253640">to</span> <span m="253880">declare</span> <span m="254300">that</span> <span m="254450">you</span> <span m="254540">have</span> <span m="254840">a</span> <span m="254900">conforming</span> <span m="255470">best-effort</span> <span m="255950">network.</span> </p>
<p><span m="257149">So</span> <span m="257269">it's</span> <span m="257360">easy</span> <span m="257570">to</span> <span m="257630">build.</span> <span m="257930">But</span> <span m="258019">of</span> <span m="258110">course,</span> <span m="258440">it</span> <span m="258540">means</span> <span m="258649">that</span> <span m="258769">you</span> <span m="258860">have</span> <span m="259010">all</span> <span m="259130">these</span> <span m="259310">issues</span> <span m="260360">that</span> <span m="260570">you</span> <span m="260660">want</span> <span m="260839">to</span> <span m="260899">deal</span> <span m="261140">with</span> <span m="261680">if</span> <span m="261800">you</span> <span m="261890">actually</span> <span m="262160">want</span> <span m="262310">to</span> <span m="262370">run</span> <span m="262730">applications.</span> <span m="263490">So</span> <span m="263570">as</span> <span m="263630">an</span> <span m="263750">example</span> <span m="264110">of</span> <span m="264200">an</span> <span m="264290">application</span> <span m="264830">is,</span> <span m="264980">let's</span> <span m="265190">say</span> <span m="265490">you</span> <span m="265850">are</span> <span m="266330">trying</span> <span m="266570">to</span> <span m="266660">download</span> <span m="267110">a</span> <span m="267410">web</span> <span m="268490">page,</span> <span m="269450">or</span> <span m="269540">a</span> <span m="269570">set</span> <span m="269750">of</span> <span m="269870">web</span> <span m="271040">pictures</span> <span m="271520">and</span> <span m="272240">text</span> <span m="272600">on</span> <span m="272690">a</span> <span m="272750">page.</span> <span m="273650">What</span> <span m="273830">you</span> <span m="273890">would</span> <span m="274010">like</span> <span m="274550">is</span> <span m="274730">an</span> <span m="274850">abstraction</span> <span m="275630">that</span> <span m="277100">you</span> <span m="277220">can</span> <span m="277400">implement</span> <span m="278060">some</span> <span m="278330">sort of a</span> <span m="278720">scheme</span> <span m="279110">you</span> <span m="279200">can</span> <span m="279380">implement</span> <span m="280550">in</span> <span m="280730">the</span> <span m="280820">network</span> <span m="281510">or</span> <span m="281720">in</span> <span m="282275">between</span> <span m="282680">the</span> <span m="282800">endpoints</span> <span m="283760">that</span> <span m="283910">makes</span> <span m="284180">it</span> <span m="284270">so</span> <span m="284390">that</span> <span m="284600">an</span> <span m="284750">application</span> <span m="285440">sends</span> <span m="285860">a</span> <span m="285920">bunch</span> <span m="286160">of</span> <span m="286220">bytes</span> <span m="287240">or</span> <span m="287330">packets</span> <span m="288020">or</span> <span m="288500">sends</span> <span m="288740">a</span> <span m="288800">message.</span> <span m="289590">And</span> <span m="289950">at</span> <span m="290120">the</span> <span m="290210">receiving</span> <span m="290660">side,</span> <span m="291050">you</span> <span m="291140">get</span> <span m="291320">those</span> <span m="291500">bytes</span> <span m="292640">reliably.</span> </p>
<p><span m="295470">So</span> <span m="295550">that's</span> <span m="295790">what</span> <span m="295940">we're</span> <span m="296060">going</span> <span m="296210">to</span> <span m="296270">understand</span> <span m="296660">today.</span> <span m="296880">We're</span> <span m="296960">going</span> <span m="297060">to</span> <span m="297140">look</span> <span m="297320">at</span> <span m="297410">today</span> <span m="297710">and</span> <span m="297800">next</span> <span m="298070">week,</span> <span m="298340">we're</span> <span m="298430">going</span> <span m="298540">to</span> <span m="298640">look</span> <span m="298850">at</span> <span m="298910">how</span> <span m="299120">to</span> <span m="299210">implement</span> <span m="300260">a</span> <span m="300410">protocol</span> <span m="301310">that</span> <span m="301490">provides</span> <span m="302270">reliable</span> <span m="304940">data</span> <span m="305210">transport.</span> <span m="311330">And the</span> <span m="311570">ideas</span> <span m="311990">we're</span> <span m="312110">going</span> <span m="312250">to</span> <span m="312350">look</span> <span m="312590">at</span> <span m="312770">are</span> <span m="313730">probably</span> <span m="314480">the</span> <span m="314600">ideas</span> <span m="315020">that</span> <span m="315170">are</span> <span m="315290">in</span> <span m="315530">the</span> <span m="315620">world's</span> <span m="315950">most</span> <span m="316220">popular</span> <span m="316610">computer</span> <span m="316910">program.</span> <span m="318390">It's</span> <span m="318740">the</span> <span m="318860">most</span> <span m="319100">popular</span> <span m="319460">in</span> <span m="319580">that</span> <span m="319770">it</span> <span m="320060">runs</span> <span m="320420">in</span> <span m="320510">the</span> <span m="320570">most</span> <span m="320840">number</span> <span m="321080">of</span> <span m="321140">places.</span> <span m="321610">And</span> <span m="322100">it's</span> <span m="322370">a</span> <span m="322490">protocol</span> <span m="322970">called</span> <span m="323180">TCP,</span> <span m="324350">which</span> <span m="324890">stands</span> <span m="325280">for</span> <span m="325400">the</span> <span m="325490">Transmission</span> <span m="326000">Control</span> <span m="326360">Protocol.</span> </p>
<p><span m="328130">Now,</span> <span m="328460">we're</span> <span m="328610">not</span> <span m="328790">going</span> <span m="329060">through</span> <span m="329360">all</span> <span m="329600">the</span> <span m="329690">gory</span> <span m="330020">details</span> <span m="331700">of</span> <span m="331850">TCP.</span> <span m="332420">We're</span> <span m="332560">going</span> <span m="332690">to</span> <span m="332780">look</span> <span m="332960">at</span> <span m="333050">a</span> <span m="333110">simplified</span> <span m="334130">version</span> <span m="334640">of</span> <span m="334790">this</span> <span m="335030">protocol.</span> <span m="338790">So</span> <span m="338960">maybe</span> <span m="339350">it's</span> <span m="339560">TCP-lite.</span> <span m="342790">But</span> <span m="342970">it'll</span> <span m="343090">cover</span> <span m="343490">the</span> <span m="343670">main</span> <span m="344180">idea</span> <span m="345230">of</span> <span m="345440">how</span> <span m="346160">you</span> <span m="346340">can</span> <span m="346520">achieve</span> <span m="346790">reliability.</span> <span m="347210">And</span> <span m="349190">this</span> <span m="349370">particular</span> <span m="349730">program</span> <span m="351360">runs</span> <span m="351680">on</span> <span m="352190">pretty</span> <span m="352430">much</span> <span m="352640">every</span> <span m="352880">computer</span> <span m="354660">and</span> <span m="354800">every</span> <span m="354980">phone</span> <span m="355430">and</span> <span m="355520">every</span> <span m="355730">little</span> <span m="355970">device</span> <span m="356450">that's</span> <span m="356720">on</span> <span m="356870">the</span> <span m="356960">internet</span> <span m="357260">today.</span> <span m="357710">So</span> <span m="357830">it's</span> <span m="357980">really,</span> <span m="358380">really</span> <span m="358490">popular.</span> </p>
<p><span m="359730">In</span> <span m="359750">fact,</span> <span m="360180">we're</span> <span m="360200">going</span> <span m="360350">to</span> <span m="360410">start</span> <span m="360800">with</span> <span m="360980">a</span> <span m="361600">simpler</span> <span m="362060">protocol</span> <span m="362990">that</span> <span m="363470">is</span> <span m="363890">a</span> <span m="364760">reliable</span> <span m="365240">data</span> <span m="365480">transport</span> <span m="365900">protocol</span> <span m="366260">that</span> <span m="366410">isn't</span> <span m="366830">used</span> <span m="367280">between</span> <span m="368080">endpoints.</span> <span m="368840">TCP</span> <span m="369260">is</span> <span m="369350">used</span> <span m="369530">between</span> <span m="369800">endpoints.</span> <span m="370610">Now</span> <span m="370780">we're</span> <span m="370910">going</span> <span m="371030">to</span> <span m="371090">look</span> <span m="371240">at</span> <span m="371330">a</span> <span m="371390">version</span> <span m="371750">of</span> <span m="371840">a</span> <span m="371900">protocol</span> <span m="372440">that's</span> <span m="372650">a</span> <span m="372680">simple</span> <span m="372980">version</span> <span m="373640">that</span> <span m="373760">actually</span> <span m="374000">runs</span> <span m="374270">in</span> <span m="374360">every</span> <span m="374660">802.11</span> <span m="375980">device--</span> <span m="376520">your</span> <span m="376790">laptop,</span> <span m="377330">phone,</span> <span m="377810">and</span> <span m="378110">access</span> <span m="378440">points.</span> <span m="378730">So</span> <span m="378800">we'll</span> <span m="378920">study</span> <span m="379210">that</span> <span m="379370">protocol</span> <span m="379790">too</span> <span m="379940">first.</span> </p>
<p><span m="382130">In</span> <span m="382280">the</span> <span m="382340">context</span> <span m="382730">of</span> <span m="383060">end</span> <span m="383210">to</span> <span m="383390">end,</span> <span m="383750">between</span> <span m="384350">endpoints,</span> <span m="384920">reliable</span> <span m="385280">data</span> <span m="385460">transport,</span> <span m="386000">the</span> <span m="386090">problem</span> <span m="386420">is</span> <span m="386510">the</span> <span m="386570">following--</span> <span m="386970">you</span> <span m="387070">have</span> <span m="387110">some</span> <span m="387290">network</span> <span m="387620">here.</span> <span m="391040">It's</span> <span m="391220">a</span> <span m="391280">best-effort</span> <span m="391790">network</span> <span m="392090">with</span> <span m="392210">those</span> <span m="392480">properties.</span> <span m="393800">And</span> <span m="393920">what</span> <span m="394130">you</span> <span m="394220">want</span> <span m="394670">is</span> <span m="395450">you</span> <span m="395570">have</span> <span m="395720">an</span> <span m="395810">application</span> <span m="396410">at</span> <span m="396500">one</span> <span m="396740">end.</span> <span m="398170">And</span> <span m="398270">you</span> <span m="398360">have</span> <span m="398510">an</span> <span m="398600">application</span> <span m="399170">at</span> <span m="399290">another</span> <span m="399620">end</span> <span m="400670">running</span> <span m="401000">on</span> <span m="401900">some</span> <span m="402240">endpoints.</span> </p>
<p><span m="406350">What</span> <span m="406710">this</span> <span m="407730">system</span> <span m="408210">provides</span> <span m="408630">that</span> <span m="408780">we're</span> <span m="408870">doing</span> <span m="409020">this</span> <span m="409320">study</span> <span m="409710">provides</span> <span m="410670">is</span> <span m="411030">an</span> <span m="411150">abstraction</span> <span m="411720">where</span> <span m="411840">you</span> <span m="412010">run</span> <span m="412530">software</span> <span m="413040">here--</span> <span m="414420">you</span> <span m="414510">run</span> <span m="414750">software</span> <span m="415200">at</span> <span m="415350">this</span> <span m="415590">end,</span> <span m="415920">and</span> <span m="416070">all</span> <span m="416220">of</span> <span m="416310">the</span> <span m="416400">stuff</span> <span m="416700">sits</span> <span m="417000">on</span> <span m="417150">your</span> <span m="417270">end</span> <span m="418010">node.</span> <span m="419880">This</span> <span m="420060">is</span> <span m="420180">your</span> <span m="420370">endpoint.</span> <span m="424740">And</span> <span m="425130">the</span> <span m="425310">abstraction</span> <span m="425970">provides</span> <span m="428860">some</span> <span m="429070">nice</span> <span m="429280">properties.</span> <span m="430390">The</span> <span m="430540">application</span> <span m="431110">writes</span> <span m="431650">some</span> <span m="431950">data</span> <span m="432250">in</span> <span m="432370">here</span> <span m="432640">at</span> <span m="432790">the</span> <span m="432880">sender</span> <span m="433390">sending</span> <span m="433750">in.</span> <span m="433960">So</span> <span m="434110">let's</span> <span m="434320">call</span> <span m="434530">this</span> <span m="434680">the</span> <span m="434770">sender.</span> <span m="436470">And</span> <span m="436660">the</span> <span m="436750">other</span> <span m="436960">guy's</span> <span m="437260">the</span> <span m="437320">receiver.</span> </p>
<p><span m="438070">The</span> <span m="438160">application</span> <span m="438670">writes</span> <span m="438910">stuff</span> <span m="439360">inside</span> <span m="439780">here.</span> <span m="440710">The</span> <span m="440800">network</span> <span m="441160">is</span> <span m="441250">a</span> <span m="441310">best-effort</span> <span m="441790">network.</span> <span m="442390">And</span> <span m="442510">there's</span> <span m="442720">some</span> <span m="442990">protocol</span> <span m="443590">between</span> <span m="444220">these</span> <span m="444610">two</span> <span m="446020">pieces</span> <span m="446410">of</span> <span m="446500">software</span> <span m="448060">that</span> <span m="449020">make</span> <span m="449350">sure</span> <span m="449710">that</span> <span m="449890">no</span> <span m="450010">matter</span> <span m="450250">what</span> <span m="450490">the</span> <span m="450580">network</span> <span m="450880">does,</span> <span m="451750">what</span> <span m="452290">goes</span> <span m="452680">up</span> <span m="452890">here</span> <span m="453550">into</span> <span m="453820">the</span> <span m="453940">application</span> <span m="455560">is</span> <span m="456370">exactly</span> <span m="457150">the</span> <span m="457270">data</span> <span m="457540">that</span> <span m="457690">was</span> <span m="457840">written</span> <span m="458380">from</span> <span m="458620">this</span> <span m="458830">application</span> <span m="460030">in</span> <span m="460180">exactly</span> <span m="460690">the</span> <span m="460870">same</span> <span m="461170">order</span> <span m="461800">in</span> <span m="461950">which</span> <span m="462130">it</span> <span m="462220">was</span> <span m="462400">written.</span> <span m="463010">So</span> <span m="463090">it</span> <span m="463150">provides</span> <span m="464080">reliable</span> <span m="464990">and</span> <span m="465190">in-order</span> <span m="466120">delivery</span> <span m="466660">of</span> <span m="466810">data,</span> <span m="467270">so</span> <span m="468730">reliable</span> <span m="471665">and</span> <span m="472150">in</span> <span m="472360">order.</span> <span m="474720">So</span> <span m="474940">every</span> <span m="475150">piece</span> <span m="475390">of</span> <span m="475480">data</span> <span m="475750">that's</span> <span m="475930">written</span> <span m="476290">shows</span> <span m="476590">up</span> <span m="476710">in</span> <span m="476800">exactly</span> <span m="477160">the</span> <span m="477250">same</span> <span m="477490">order</span> <span m="477730">exactly</span> <span m="478210">once</span> <span m="478690">at</span> <span m="478810">the</span> <span m="478900">receiver.</span> </p>
<p><span m="480010">And</span> <span m="480340">these</span> <span m="480640">two</span> <span m="481000">ends</span> <span m="481420">are</span> <span m="481510">called</span> <span m="482610">transport.</span> <span m="486340">These</span> <span m="486580">two</span> <span m="486730">ends</span> <span m="487000">constitute</span> <span m="487510">the</span> <span m="487600">transport</span> <span m="488110">layer.</span> <span m="492160">And</span> <span m="492510">they</span> <span m="492720">[INAUDIBLE]</span> <span m="493050">at</span> <span m="493140">the</span> <span m="493260">end</span> <span m="493380">points,</span> <span m="494620">OK?</span> <span m="495000">So</span> <span m="495270">the</span> <span m="495390">application</span> <span m="495900">writes</span> <span m="496230">in</span> <span m="496350">here,</span> <span m="497370">the</span> <span m="497490">transport</span> <span m="497850">protocol</span> <span m="498210">delivers</span> <span m="498630">up</span> <span m="499080">to</span> <span m="499170">the</span> <span m="499290">application</span> <span m="499860">stuff</span> <span m="500190">that's</span> <span m="500400">reliable</span> <span m="501270">and</span> <span m="501420">in</span> <span m="501600">order.</span> <span m="503600">And</span> <span m="504160">in</span> <span m="504250">particular,</span> <span m="504790">it</span> <span m="504910">provides</span> <span m="505300">the</span> <span m="505360">semantics</span> <span m="506020">that</span> <span m="507010">you</span> <span m="507130">can</span> <span m="507310">think</span> <span m="507580">of</span> <span m="507790">as</span> <span m="508000">"exactly</span> <span m="508600">once"</span> <span m="508880">semantics.</span> <span m="509500">In</span> <span m="509590">other</span> <span m="509740">words,</span> <span m="510350">anything</span> <span m="510640">that's</span> <span m="510820">sent</span> <span m="511750">is</span> <span m="511900">delivered</span> <span m="512200">exactly</span> <span m="512650">once</span> <span m="513429">to</span> <span m="513580">the</span> <span m="513669">receiver,</span> <span m="514150">and</span> <span m="514270">it's</span> <span m="514419">delivered</span> <span m="514809">in</span> <span m="514929">order.</span> </p>
<p><span m="516200">Now,</span> <span m="516429">that's</span> <span m="516730">the</span> <span m="516820">abstraction</span> <span m="517330">that</span> <span m="517480">TCP</span> <span m="518020">as</span> <span m="518169">well</span> <span m="518409">provides.</span> <span m="519500">And</span> <span m="519610">that's</span> <span m="519820">the</span> <span m="519940">abstraction</span> <span m="520390">of</span> <span m="520480">our</span> <span m="520780">602</span> <span m="521350">protocol.</span> <span m="522580">It's</span> <span m="522789">reliable,</span> <span m="523360">in-order,</span> <span m="523990">exactly-once</span> <span m="524770">delivery.</span> <span m="526030">Now,</span> <span m="526210">there</span> <span m="526360">are</span> <span m="526450">other</span> <span m="526780">implementations</span> <span m="527530">you</span> <span m="527620">can</span> <span m="527770">have.</span> <span m="528070">There</span> <span m="528220">are</span> <span m="528340">protocols</span> <span m="528790">you</span> <span m="528850">could</span> <span m="528970">have</span> <span m="529160">that</span> <span m="529250">provide</span> <span m="529570">reliability</span> <span m="530170">but</span> <span m="530320">not</span> <span m="530590">in</span> <span m="530710">order.</span> <span m="531560">So</span> <span m="531820">I'll</span> <span m="531940">give</span> <span m="532120">you</span> <span m="532210">all</span> <span m="532360">the</span> <span m="532450">data</span> <span m="532690">that</span> <span m="532810">you</span> <span m="532900">send,</span> <span m="533140">but</span> <span m="533260">it</span> <span m="533320">may</span> <span m="533440">show</span> <span m="533620">up</span> <span m="533770">in</span> <span m="533840">different</span> <span m="534130">order,</span> <span m="534430">and</span> <span m="534520">it's</span> <span m="534640">your</span> <span m="534790">problem</span> <span m="535180">to</span> <span m="535270">fix</span> <span m="535570">it.</span> </p>
<p><span m="536320">Or</span> <span m="536500">you</span> <span m="536620">might</span> <span m="536830">provide</span> <span m="537160">a</span> <span m="537190">protocol</span> <span m="537610">that</span> <span m="537730">provides</span> <span m="538150">in</span> <span m="538360">order,</span> <span m="538810">but</span> <span m="538990">not</span> <span m="539230">reliable.</span> <span m="540500">So</span> <span m="540790">if</span> <span m="540910">I'm</span> <span m="541060">doing</span> <span m="543130">real-time</span> <span m="543670">video</span> <span m="543960">conferencing,</span> <span m="545940">say,</span> <span m="546120">Skype,</span> <span m="546850">Skype</span> <span m="547240">would</span> <span m="547390">probably</span> <span m="547810">want</span> <span m="548050">to</span> <span m="548110">provide</span> <span m="548530">a</span> <span m="548560">protocol</span> <span m="549550">that's</span> <span m="550300">in</span> <span m="550480">order</span> <span m="550720">but</span> <span m="550870">not</span> <span m="551080">reliable,</span> <span m="551770">because</span> <span m="552040">if</span> <span m="552310">I</span> <span m="552370">speak,</span> <span m="552760">you'd</span> <span m="552910">like</span> <span m="553150">to</span> <span m="553270">actually</span> <span m="553660">get</span> <span m="553870">those</span> <span m="554110">things</span> <span m="554350">into</span> <span m="554500">the</span> <span m="554560">Skype</span> <span m="554860">application</span> <span m="556150">in</span> <span m="556300">order.</span> </p>
<p><span m="557480">But</span> <span m="557770">it's</span> <span m="557950">not</span> <span m="558220">really</span> <span m="558490">required</span> <span m="559030">that</span> <span m="559180">it</span> <span m="559270">be</span> <span m="559390">reliable</span> <span m="559930">because</span> <span m="561250">if</span> <span m="562810">a</span> <span m="562840">message</span> <span m="563110">shows</span> <span m="563440">up,</span> <span m="563590">say,</span> <span m="563740">more</span> <span m="563920">than</span> <span m="564040">100</span> <span m="564370">or</span> <span m="564430">200</span> <span m="564790">milliseconds</span> <span m="565300">after</span> <span m="565570">I</span> <span m="565660">spoke</span> <span m="566060">it,</span> <span m="567020">it's</span> <span m="567550">going</span> <span m="567660">to</span> <span m="567850">distort</span> <span m="568120">the</span> <span m="568210">conversation.</span> <span m="568910">It's</span> <span m="568930">not</span> <span m="569140">going</span> <span m="569290">to</span> <span m="569350">be</span> <span m="569440">intelligible</span> <span m="569920">to</span> <span m="570040">you.</span> <span m="570250">And</span> <span m="570340">the</span> <span m="570400">human</span> <span m="570670">ear</span> <span m="570940">is</span> <span m="571060">wonderful</span> <span m="571530">at--</span> <span m="572050">the</span> <span m="572140">human</span> <span m="572350">brain</span> <span m="572620">is</span> <span m="572740">wonderful</span> <span m="573190">at</span> <span m="573820">dealing</span> <span m="574210">with</span> <span m="574390">some</span> <span m="574660">clippiness</span> <span m="575140">in</span> <span m="575230">the</span> <span m="575290">voice.</span> <span m="575530">You</span> <span m="575590">know,</span> <span m="575710">occasional</span> <span m="576100">packets</span> <span m="576490">get</span> <span m="576640">lost.</span> <span m="576910">It's</span> <span m="577060">not</span> <span m="577240">the</span> <span m="577330">end</span> <span m="577450">of</span> <span m="577510">the</span> <span m="577570">world.</span> </p>
<p><span m="578600">So</span> <span m="578650">there</span> <span m="578800">are</span> <span m="579070">lots</span> <span m="579370">of</span> <span m="579460">interesting</span> <span m="579850">applications.</span> <span m="580420">But</span> <span m="580570">in</span> <span m="580750">order</span> <span m="581080">is</span> <span m="581200">useful,</span> <span m="581560">but</span> <span m="581710">not</span> <span m="582040">perfectly</span> <span m="582490">reliable.</span> <span m="583360">Applications</span> <span m="583930">where</span> <span m="584020">reliable</span> <span m="584470">is</span> <span m="584860">useful,</span> <span m="585370">but</span> <span m="585490">not</span> <span m="585790">perfectly</span> <span m="586150">in</span> <span m="586260">order.</span> <span m="586420">BitTorrent</span> <span m="587140">would</span> <span m="587290">be</span> <span m="587380">an</span> <span m="587440">example</span> <span m="587860">of</span> <span m="587980">that.</span> <span m="588430">An</span> <span m="588550">application</span> <span m="589030">where</span> <span m="589570">eventually</span> <span m="589960">you</span> <span m="590020">want</span> <span m="590200">all</span> <span m="590350">of</span> <span m="590440">those</span> <span m="590590">movies</span> <span m="590950">that</span> <span m="591070">you're</span> <span m="591160">trying</span> <span m="591370">to</span> <span m="591460">get.</span> <span m="591670">But</span> <span m="591970">who</span> <span m="592120">cares</span> <span m="592420">what</span> <span m="592600">order</span> <span m="592810">they</span> <span m="592930">come</span> <span m="593140">in?</span> <span m="593260">You're</span> <span m="593350">not</span> <span m="593450">going</span> <span m="593560">to</span> <span m="593620">start</span> <span m="593830">watching</span> <span m="594190">it</span> <span m="594280">until</span> <span m="594430">the</span> <span m="594520">whole</span> <span m="594700">file</span> <span m="595000">is</span> <span m="595090">assembled.</span> <span m="596260">And</span> <span m="596440">so</span> <span m="596980">the</span> <span m="597070">protocol</span> <span m="597580">that</span> <span m="597730">BitTorrent</span> <span m="598180">uses</span> <span m="598600">in</span> <span m="598720">effect--</span> <span m="599710">it's</span> <span m="599800">a</span> <span m="599860">complicated</span> <span m="600280">protocol.</span> <span m="600590">It's not</span> <span m="600790">point</span> <span m="601000">to</span> <span m="601090">point.</span> <span m="601780">But</span> <span m="601990">in</span> <span m="602080">effect,</span> <span m="602410">it</span> <span m="602500">provides</span> <span m="602920">reliability</span> <span m="603490">without</span> <span m="603760">worrying</span> <span m="604060">about</span> <span m="604240">ordering.</span> </p>
<p><span m="605140">So</span> <span m="605290">there's</span> <span m="605410">lots</span> <span m="605650">of</span> <span m="605710">combinations.</span> <span m="607010">The</span> <span m="607030">combination</span> <span m="607540">we</span> <span m="607660">care</span> <span m="607870">about</span> <span m="608140">is</span> <span m="608260">reliable,</span> <span m="608830">in</span> <span m="609010">order,</span> <span m="609610">essentially</span> <span m="610000">giving</span> <span m="610240">you</span> <span m="610330">the</span> <span m="610420">illusion</span> <span m="610810">that</span> <span m="610930">you</span> <span m="611020">have</span> <span m="611140">a</span> <span m="611170">circuit</span> <span m="611620">between</span> <span m="612400">the</span> <span m="612490">two</span> <span m="612670">endpoints,</span> <span m="613250">a</span> <span m="613510">wire</span> <span m="613930">between</span> <span m="614200">the</span> <span m="614290">two</span> <span m="614550">endpoints,</span> <span m="615220">OK?</span> <span m="616360">So</span> <span m="616510">is</span> <span m="616600">the</span> <span m="616690">abstraction</span> <span m="617170">clear?</span> <span m="617530">Everyone</span> <span m="617860">understands</span> <span m="619180">what</span> <span m="619360">we're</span> <span m="619450">trying</span> <span m="619660">to</span> <span m="619750">solve?</span> </p>
<p><span m="621010">And</span> <span m="621160">in</span> <span m="621280">between</span> <span m="621560">this,</span> <span m="621760">just</span> <span m="621940">think,</span> <span m="622150">there's</span> <span m="622330">an</span> <span m="622420">adversary</span> <span m="622900">or</span> <span m="623080">some</span> <span m="623380">network</span> <span m="623740">in</span> <span m="623800">the</span> <span m="623860">middle</span> <span m="624450">that</span> <span m="624710">you</span> <span m="624870">sent</span> <span m="625090">packets,</span> <span m="625540">and</span> <span m="625780">the</span> <span m="625900">thing</span> <span m="626140">is</span> <span m="626260">just</span> <span m="626410">throwing</span> <span m="626650">packets</span> <span m="626980">away.</span> <span m="627520">And</span> <span m="627940">every</span> <span m="628150">once</span> <span m="628360">in</span> <span m="628450">a</span> <span m="628480">while,</span> <span m="628690">just</span> <span m="628870">for</span> <span m="628960">the</span> <span m="629050">heck</span> <span m="629200">of</span> <span m="629290">it,</span> <span m="629380">it</span> <span m="629440">decides</span> <span m="629890">to</span> <span m="630400">delay</span> <span m="630670">a</span> <span m="630730">packet</span> <span m="631930">for</span> <span m="632110">a</span> <span m="632140">long</span> <span m="632350">time.</span> <span m="633040">And</span> <span m="633140">every</span> <span m="633280">once</span> <span m="633520">in</span> <span m="633580">a</span> <span m="633610">while,</span> <span m="633790">it</span> <span m="634450">decides</span> <span m="634870">to</span> <span m="634960">send</span> <span m="635200">packets</span> <span m="636445">along</span> <span m="636790">different</span> <span m="637060">paths.</span> <span m="638170">And</span> <span m="638260">your</span> <span m="638440">job</span> <span m="638800">is</span> <span m="638950">to</span> <span m="639070">deal</span> <span m="639250">with</span> <span m="639400">all</span> <span m="639520">of</span> <span m="639610">that</span> <span m="640300">and</span> <span m="640450">design</span> <span m="640870">the</span> <span m="640990">sending</span> <span m="641350">side</span> <span m="641590">and</span> <span m="641680">the</span> <span m="641740">receiving</span> <span m="642130">sides</span> <span m="642390">so that</span> <span m="642550">stuff</span> <span m="642920">still</span> <span m="643120">shows</span> <span m="643420">up</span> <span m="644230">reliably</span> <span m="644740">and</span> <span m="645040">in</span> <span m="645190">the</span> <span m="645280">same</span> <span m="645520">order</span> <span m="645760">in</span> <span m="645910">which</span> <span m="646120">it</span> <span m="646180">was</span> <span m="646270">sent.</span> </p>
<p><span m="647660">So</span> <span m="647920">we're</span> <span m="648100">going</span> <span m="648220">to</span> <span m="648310">try</span> <span m="648430">to</span> <span m="648520">solve</span> <span m="648760">this</span> <span m="648880">problem.</span> <span m="649340">We're</span> <span m="649440">going</span> <span m="649450">to</span> <span m="649510">solve</span> <span m="649720">it</span> <span m="649810">first</span> <span m="650200">by</span> <span m="650890">coming</span> <span m="651160">up</span> <span m="651280">with</span> <span m="651380">a</span> <span m="651430">protocol.</span> <span m="652160">It</span> <span m="652180">has</span> <span m="652330">a</span> <span m="652360">nice</span> <span m="652600">name</span> <span m="652780">to</span> <span m="652900">it</span> <span m="652990">called</span> <span m="653160">stop</span> <span m="653470">and</span> <span m="653560">wait.</span> <span m="654490">It's</span> <span m="654590">a</span> <span m="654610">very</span> <span m="654790">simple</span> <span m="655120">idea.</span> <span m="656710">And</span> <span m="657550">this</span> <span m="657790">will</span> <span m="657940">be</span> <span m="658120">a</span> <span m="658180">protocol</span> <span m="658690">that</span> <span m="658900">works,</span> <span m="659830">but</span> <span m="659950">it's</span> <span m="660070">slow.</span> <span m="660940">But</span> <span m="661090">the</span> <span m="661180">good</span> <span m="661330">news</span> <span m="661570">is</span> <span m="661690">it</span> <span m="661810">works.</span> <span m="662120">It's</span> <span m="662290">correct.</span> <span m="662610">It</span> <span m="662710">gives</span> <span m="663070">the</span> <span m="663160">semantics</span> <span m="663610">we</span> <span m="663730">want.</span> <span m="664540">And</span> <span m="664690">then</span> <span m="665080">we'll</span> <span m="665290">try</span> <span m="665470">to</span> <span m="665560">improve</span> <span m="665890">its</span> <span m="666010">performance.</span> </p>
<p><span m="667480">It's</span> <span m="667570">a</span> <span m="667600">very</span> <span m="667960">simple</span> <span m="668320">idea.</span> <span m="668590">I'm</span> <span m="668680">sure</span> <span m="668890">you</span> <span m="669040">have--</span> <span m="669325">just</span> <span m="669610">think</span> <span m="669820">about</span> <span m="670060">this</span> <span m="670180">for</span> <span m="670250">three</span> <span m="670430">minutes.</span> <span m="670820">You'll</span> <span m="670840">come</span> <span m="670990">up</span> <span m="671110">with</span> <span m="671230">something</span> <span m="671590">that</span> <span m="671740">looks</span> <span m="671920">like</span> <span m="672130">this.</span> <span m="673100">You</span> <span m="673240">just</span> <span m="673620">take</span> <span m="673870">the</span> <span m="674110">message</span> <span m="674470">you</span> <span m="674560">want</span> <span m="674740">to</span> <span m="674800">send,</span> <span m="675160">whatever</span> <span m="675460">file,</span> <span m="675860">stream,</span> <span m="676240">or</span> <span m="676360">video,</span> <span m="676820">whatever</span> <span m="677050">it</span> <span m="677170">is,</span> <span m="677680">and</span> <span m="677770">break</span> <span m="678010">it</span> <span m="678100">up</span> <span m="678220">into</span> <span m="678460">packets.</span> <span m="679240">So</span> <span m="679450">far,</span> <span m="679800">there's</span> <span m="680110">nothing</span> <span m="680350">new</span> <span m="680530">here.</span> </p>
<p><span m="681550">The</span> <span m="681670">main</span> <span m="681880">first</span> <span m="682270">idea</span> <span m="682540">is</span> <span m="682690">we're</span> <span m="682810">going</span> <span m="682940">to</span> <span m="683050">number</span> <span m="683350">every</span> <span m="683530">packet</span> <span m="683890">with</span> <span m="684020">a</span> <span m="684070">sequence</span> <span m="684490">number.</span> <span m="685580">So</span> <span m="685600">that's</span> <span m="685780">what's</span> <span m="685930">shown</span> <span m="686230">here</span> <span m="686530">as</span> <span m="686770">"Data</span> <span m="687070">1,"</span> <span m="687970">"Data</span> <span m="688270">2,"</span> <span m="688510">"Data</span> <span m="688780">3,"</span> <span m="689050">and</span> <span m="689140">so</span> <span m="689320">forth.</span> <span m="689630">So</span> <span m="689680">we're</span> <span m="689800">going</span> <span m="689920">to</span> <span m="690040">use</span> <span m="690340">a</span> <span m="690370">sequence</span> <span m="690790">number</span> <span m="691150">on</span> <span m="691300">every</span> <span m="691510">packet.</span> </p>
<p><span m="695020">Now,</span> <span m="695200">again,</span> <span m="695480">there</span> <span m="695580">are</span> <span m="695680">many</span> <span m="695740">ways</span> <span m="696070">to</span> <span m="696190">implement</span> <span m="696550">sequence</span> <span m="696940">numbers.</span> <span m="697510">The</span> <span m="697630">way</span> <span m="697840">that's</span> <span m="698110">the</span> <span m="698200">simplest</span> <span m="698710">and</span> <span m="698800">most</span> <span m="699760">conceptually</span> <span m="700390">clean</span> <span m="701110">is</span> <span m="701290">every</span> <span m="701560">packet</span> <span m="701920">has</span> <span m="702160">a</span> <span m="702190">sequence</span> <span m="702580">number</span> <span m="702820">that</span> <span m="702950">increments</span> <span m="703420">by</span> <span m="703570">1</span> <span m="704200">for</span> <span m="704410">every</span> <span m="704680">subsequent</span> <span m="705130">packet</span> <span m="705490">that's</span> <span m="705670">sent.</span> <span m="706510">And</span> <span m="710470">you</span> <span m="710620">might</span> <span m="710830">initially</span> <span m="711220">start</span> <span m="711460">the</span> <span m="711550">sequence</span> <span m="711880">numbering</span> <span m="712240">at</span> <span m="712330">0</span> <span m="712690">or</span> <span m="712810">1</span> <span m="713200">or</span> <span m="713290">whatever.</span> <span m="713680">The</span> <span m="713740">sender</span> <span m="714040">and</span> <span m="714130">the</span> <span m="714190">receiver</span> <span m="714520">have</span> <span m="714640">to</span> <span m="714730">agree</span> <span m="714940">on</span> <span m="715060">that.</span> </p>
<p><span m="715780">Now,</span> <span m="715960">in</span> <span m="716050">reality,</span> <span m="716500">TCP</span> <span m="717130">in</span> <span m="717250">the</span> <span m="717310">real</span> <span m="717550">world</span> <span m="717820">is</span> <span m="717910">a</span> <span m="717970">little</span> <span m="718120">more</span> <span m="718270">complicated.</span> <span m="719230">TCP</span> <span m="719800">provides</span> <span m="720880">sequence</span> <span m="721300">numbering</span> <span m="721900">by</span> <span m="722050">numbering</span> <span m="722410">the</span> <span m="722500">bytes</span> <span m="723680">with</span> <span m="723850">the</span> <span m="723910">byte</span> <span m="724210">offset</span> <span m="724570">in</span> <span m="724660">the</span> <span m="724720">stream.</span> <span m="725080">So</span> <span m="725200">if</span> <span m="725290">you</span> <span m="725410">send</span> <span m="725650">a</span> <span m="725710">packet</span> <span m="726070">which</span> <span m="726220">is</span> <span m="726370">25</span> <span m="726790">bytes,</span> <span m="727630">and</span> <span m="727720">the</span> <span m="727810">next</span> <span m="728050">packet</span> <span m="728410">is</span> <span m="728530">200</span> <span m="728950">bytes,</span> <span m="730150">the</span> <span m="730270">first</span> <span m="730570">packet</span> <span m="730940">is</span> <span m="731020">going</span> <span m="731160">to</span> <span m="731230">have</span> <span m="731320">a</span> <span m="731380">sequence</span> <span m="731680">number</span> <span m="731950">of,</span> <span m="732040">let's</span> <span m="732220">say,</span> <span m="732340">0.</span> <span m="733150">The</span> <span m="733240">second</span> <span m="733510">packet's</span> <span m="733800">going</span> <span m="733910">to</span> <span m="733990">have</span> <span m="734080">a</span> <span m="734140">sequence</span> <span m="734440">number</span> <span m="734620">of</span> <span m="734710">26</span> <span m="735940">because</span> <span m="736240">it</span> <span m="736330">numbers</span> <span m="736780">the</span> <span m="736990">starting</span> <span m="737410">of</span> <span m="737500">the</span> <span m="737590">byte</span> <span m="737830">offset.</span> <span m="738760">But</span> <span m="738910">these</span> <span m="739120">are</span> <span m="739210">all</span> <span m="739330">details</span> <span m="739990">that</span> <span m="740760">to</span> <span m="740860">first</span> <span m="741130">order,</span> <span m="741330">we</span> <span m="741430">don't</span> <span m="741550">have</span> <span m="741700">to</span> <span m="741790">really</span> <span m="742030">worry</span> <span m="742270">about.</span> </p>
<p><span m="743140">The</span> <span m="743200">important</span> <span m="743500">point</span> <span m="743740">is</span> <span m="743830">there</span> <span m="743890">is</span> <span m="743980">a</span> <span m="744040">sequence</span> <span m="744430">number.</span> <span m="744970">And</span> <span m="745090">a</span> <span m="745150">sequence</span> <span m="745510">number</span> <span m="745870">is</span> <span m="746080">a</span> <span m="746170">unique</span> <span m="746530">identifier</span> <span m="747130">for</span> <span m="747280">the</span> <span m="747370">packet.</span> <span m="748210">In</span> <span m="748300">other</span> <span m="748450">words,</span> <span m="748730">if</span> <span m="748780">I</span> <span m="749140">later</span> <span m="749590">send</span> <span m="749890">a</span> <span m="749950">packet</span> <span m="750370">with</span> <span m="750490">the</span> <span m="750550">same</span> <span m="750850">sequence</span> <span m="751270">number,</span> <span m="751990">I</span> <span m="752110">have</span> <span m="752380">to</span> <span m="752470">guarantee</span> <span m="753010">that</span> <span m="753220">the</span> <span m="753460">material</span> <span m="754090">inside</span> <span m="754420">the</span> <span m="754510">packet</span> <span m="754870">is</span> <span m="754990">the</span> <span m="755080">same</span> <span m="755320">as</span> <span m="755440">it</span> <span m="755530">was</span> <span m="755770">before.</span> <span m="757010">So</span> <span m="757060">the</span> <span m="757150">assumption</span> <span m="757600">is</span> <span m="757750">that</span> <span m="757960">this</span> <span m="758140">is</span> <span m="758290">a</span> <span m="758350">unique</span> <span m="758680">identifier</span> <span m="759220">for</span> <span m="759400">the</span> <span m="759520">contents</span> <span m="759910">of</span> <span m="759970">the</span> <span m="760060">packet.</span> <span m="761840">So</span> <span m="761980">it's</span> <span m="762580">a</span> <span m="762610">unique</span> <span m="762940">identifier.</span> <span m="763630">We</span> <span m="763780">want</span> <span m="763950">to</span> <span m="764080">use</span> <span m="764380">it</span> <span m="765100">for</span> <span m="765430">some</span> <span m="765640">other</span> <span m="765850">set</span> <span m="766060">of</span> <span m="766150">bytes.</span> <span m="766810">We'll</span> <span m="767080">always</span> <span m="767560">use</span> <span m="767800">it</span> <span m="767890">again</span> <span m="768160">for</span> <span m="768280">the</span> <span m="768340">same</span> <span m="768550">set</span> <span m="768700">of</span> <span m="768760">bytes</span> <span m="769060">if</span> <span m="769180">we</span> <span m="769300">ever</span> <span m="769670">retransmit</span> <span m="770110">a</span> <span m="770170">packet</span> <span m="770410">with</span> <span m="770590">the</span> <span m="770650">same</span> <span m="770860">sequence</span> <span m="771240">number.</span> </p>
<p><span m="773500">When</span> <span m="773620">the</span> <span m="773680">receiver</span> <span m="774130">gets</span> <span m="774370">the</span> <span m="774460">packet</span> <span m="774940">with</span> <span m="775150">a</span> <span m="775180">certain</span> <span m="775420">sequence</span> <span m="775780">number,</span> <span m="776110">it</span> <span m="776200">does</span> <span m="776500">what</span> <span m="776710">the</span> <span m="776800">post</span> <span m="777080">office</span> <span m="777400">does</span> <span m="777670">if</span> <span m="777760">you</span> <span m="777850">send</span> <span m="778070">registered</span> <span m="778480">post--</span> <span m="779460">you</span> <span m="779680">turn</span> <span m="779890">around,</span> <span m="780120">and you</span> <span m="780200">send</span> <span m="780420">an</span> <span m="780510">acknowledgment.</span> <span m="781720">And</span> <span m="782170">to</span> <span m="782410">allow</span> <span m="782770">the</span> <span m="782890">sender</span> <span m="783310">to</span> <span m="783550">know</span> <span m="784660">which</span> <span m="784900">packet's</span> <span m="785350">being</span> <span m="785560">acknowledged,</span> <span m="786100">you</span> <span m="786820">stick</span> <span m="787150">in</span> <span m="787270">the</span> <span m="787360">sequence</span> <span m="787750">number</span> <span m="788020">of</span> <span m="788110">the</span> <span m="788170">packet</span> <span m="788560">that's</span> <span m="788770">being</span> <span m="788950">acknowledged.</span> <span m="789460">So</span> <span m="789670">you</span> <span m="789760">send</span> <span m="790150">sequence</span> <span m="790540">1.</span> <span m="791080">Data</span> <span m="791290">1,</span> <span m="791530">you</span> <span m="791800">get</span> <span m="791980">ACK</span> <span m="792190">1.</span> <span m="792340">Data 2,</span> <span m="792630">you</span> <span m="792760">get</span> <span m="792960">ACK 2,</span> <span m="793840">and</span> <span m="793960">everything</span> <span m="794290">is</span> <span m="794410">wonderful.</span> <span m="795880">It's</span> <span m="796030">easy,</span> <span m="796360">easy</span> <span m="796690">protocol.</span> </p>
<p><span m="799260">So</span> <span m="799490">what</span> <span m="799640">happens</span> <span m="799940">when</span> <span m="800030">a</span> <span m="800120">packet's</span> <span m="800420">lost,</span> <span m="801320">this</span> <span m="801560">data</span> <span m="801770">is</span> <span m="801860">lost?</span> <span m="802340">What's</span> <span m="802550">going</span> <span m="802730">to</span> <span m="802820">happen</span> <span m="803090">is</span> <span m="803210">the</span> <span m="803300">sender</span> <span m="803600">is</span> <span m="803660">not</span> <span m="803840">going</span> <span m="804030">to</span> <span m="804080">get</span> <span m="804200">an</span> <span m="804290">acknowledgment.</span> <span m="805640">And</span> <span m="806390">after</span> <span m="806750">some</span> <span m="807020">period</span> <span m="807380">of</span> <span m="807500">time</span> <span m="808330">called</span> <span m="808580">the</span> <span m="808800">timeout,</span> <span m="809600">the</span> <span m="809720">sender</span> <span m="810050">decides</span> <span m="810530">that</span> <span m="810680">it</span> <span m="810770">wants</span> <span m="811010">to</span> <span m="811100">retry</span> <span m="811490">that</span> <span m="811670">packet.</span> <span m="812570">And</span> <span m="812720">it</span> <span m="812780">tries</span> <span m="813050">to resend</span> <span m="813470">the</span> <span m="813560">packet.</span> <span m="814080">And</span> <span m="814160">if</span> <span m="814250">it</span> <span m="814340">works,</span> <span m="814730">it</span> <span m="814820">gets</span> <span m="815060">an</span> <span m="815150">acknowledgment.</span> <span m="815960">When</span> <span m="816110">it</span> <span m="816200">gets</span> <span m="816440">that</span> <span m="816560">acknowledgment,</span> <span m="817310">that's</span> <span m="817580">when</span> <span m="817760">it</span> <span m="817850">goes</span> <span m="818120">and</span> <span m="818210">sends</span> <span m="818480">the</span> <span m="818570">next</span> <span m="818780">packet.</span> </p>
<p><span m="820320">So</span> <span m="820400">the</span> <span m="820490">property</span> <span m="820790">of</span> <span m="820880">stop-and-wait</span> <span m="821450">protocol</span> <span m="821930">is</span> <span m="822500">that</span> <span m="823070">you</span> <span m="823280">send</span> <span m="823820">a</span> <span m="823970">packet</span> <span m="824570">only</span> <span m="824900">after</span> <span m="825350">you</span> <span m="825530">get</span> <span m="825680">an</span> <span m="825800">acknowledgment.</span> <span m="826400">You</span> <span m="826550">sent</span> <span m="826760">packet k</span> <span m="827170">plus</span> <span m="827480">1</span> <span m="827750">only</span> <span m="828020">after</span> <span m="828260">you</span> <span m="828320">get</span> <span m="828470">an</span> <span m="828530">acknowledgment</span> <span m="829280">for</span> <span m="829430">packet</span> <span m="829720">k.</span> <span m="830960">If</span> <span m="831110">you</span> <span m="831170">don't</span> <span m="831350">get</span> <span m="831440">an</span> <span m="831530">acknowledgment</span> <span m="831950">for</span> <span m="832040">packet</span> <span m="832370">k,</span> <span m="833390">you</span> <span m="833540">wait</span> <span m="833780">for</span> <span m="833960">a</span> <span m="833990">period</span> <span m="834290">of</span> <span m="834410">time</span> <span m="834620">called</span> <span m="834880">a</span> <span m="834920">timeout.</span> <span m="835820">And</span> <span m="836210">after</span> <span m="836480">that</span> <span m="836690">timeout</span> <span m="837620">elapses,</span> <span m="838460">you retransmit</span> <span m="839510">the</span> <span m="839630">packet</span> <span m="840470">that</span> <span m="840650">you</span> <span m="840740">considered</span> <span m="841370">was</span> <span m="841580">lost,</span> <span m="843230">that</span> <span m="843380">you</span> <span m="843440">thought</span> <span m="843650">was</span> <span m="843800">lost.</span> <span m="845130">OK,</span> <span m="845460">simple.</span> </p>
<p><span m="846810">Now,</span> <span m="847590">is</span> <span m="847770">this</span> <span m="847980">protocol</span> <span m="848430">reliable?</span> <span m="850580">And</span> <span m="850800">when</span> <span m="850950">I</span> <span m="851040">ask</span> <span m="851250">that</span> <span m="851400">question,</span> <span m="851830">you</span> <span m="851850">have</span> <span m="852030">to</span> <span m="852120">assume</span> <span m="852390">that</span> <span m="852510">the</span> <span m="852600">network</span> <span m="853350">may</span> <span m="853530">drop</span> <span m="854190">and</span> <span m="854400">reorder</span> <span m="854910">and</span> <span m="855030">do</span> <span m="855150">whatever</span> <span m="855480">it</span> <span m="855570">does</span> <span m="855690">to</span> <span m="855780">packets.</span> <span m="856380">But</span> <span m="856560">there's</span> <span m="856740">always</span> <span m="857130">a</span> <span m="857280">non-zero</span> <span m="857940">probability</span> <span m="858900">that</span> <span m="859100">a</span> <span m="859290">packet</span> <span m="859800">or</span> <span m="859950">data</span> <span m="860190">packet</span> <span m="860520">or</span> <span m="860610">acknowledgment</span> <span m="861090">packet</span> <span m="861390">sent</span> <span m="861630">on</span> <span m="861720">the</span> <span m="861780">network</span> <span m="862800">has</span> <span m="863580">a</span> <span m="863640">non-zero</span> <span m="864120">probability</span> <span m="864600">of</span> <span m="864660">reaching</span> <span m="864930">the</span> <span m="865020">other</span> <span m="865200">side.</span> <span m="865410">Because</span> <span m="865650">if</span> <span m="865710">the</span> <span m="865800">probability</span> <span m="866310">of</span> <span m="866400">packet</span> <span m="866670">loss</span> <span m="866800">is</span> <span m="866970">1,</span> <span m="867820">now</span> <span m="868050">no</span> <span m="868200">one</span> <span m="868320">can</span> <span m="868470">help</span> <span m="868650">us.</span> </p>
<p><span m="869670">So</span> <span m="870270">is</span> <span m="870360">this</span> <span m="870540">protocol</span> <span m="870930">reliable?</span> <span m="874210">OK.</span> <span m="874720">Is</span> <span m="874840">this</span> <span m="874960">protocol</span> <span m="875320">in</span> <span m="875470">order?</span> <span m="877150">It</span> <span m="877270">is</span> <span m="877450">in</span> <span m="877540">order</span> <span m="877810">in</span> <span m="877900">the</span> <span m="877990">way of--</span> <span m="878290">I'm</span> <span m="878440">not</span> <span m="878620">actually</span> <span m="878920">describing</span> <span m="879290">what</span> <span m="879490">the</span> <span m="879580">receiver</span> <span m="879970">does.</span> <span m="880630">But</span> <span m="881140">I</span> <span m="881230">should</span> <span m="881410">tell</span> <span m="881620">you</span> <span m="881740">that</span> <span m="882010">the</span> <span m="882130">receiver's</span> <span m="883900">semantics</span> <span m="884440">here</span> <span m="884620">are</span> <span m="884770">when</span> <span m="884920">the</span> <span m="884980">receiver</span> <span m="885340">gets</span> <span m="885640">the</span> <span m="885730">packet,</span> <span m="886180">it</span> <span m="886270">delivers</span> <span m="886720">it</span> <span m="886780">to</span> <span m="886900">the</span> <span m="886990">application.</span> </p>
<p><span m="890150">Now,</span> <span m="890330">if</span> <span m="890450">you</span> <span m="890510">turn</span> <span m="890840">out</span> <span m="891050">that</span> <span m="891290">this</span> <span m="891500">protocol</span> <span m="892280">is</span> <span m="893030">not</span> <span m="893270">necessarily</span> <span m="893930">in</span> <span m="894140">order</span> <span m="894620">the</span> <span m="894740">way</span> <span m="894890">I</span> <span m="895010">described</span> <span m="895460">it--</span> <span m="895520">and</span> <span m="895610">I'll</span> <span m="895730">come</span> <span m="895880">back</span> <span m="896090">to</span> <span m="896250">why.</span> <span m="897050">But</span> <span m="897560">so</span> <span m="897770">far,</span> <span m="897950">it</span> <span m="898040">looks</span> <span m="898280">like</span> <span m="898460">the</span> <span m="898520">protocol</span> <span m="898880">is</span> <span m="898970">in</span> <span m="899060">order.</span> <span m="899240">But</span> <span m="899330">remember</span> <span m="899630">what</span> <span m="899780">I</span> <span m="899870">said</span> <span m="900050">about</span> <span m="900230">the</span> <span m="900320">receiver?</span> <span m="901040">When</span> <span m="901160">the</span> <span m="901250">receiver</span> <span m="901640">gets</span> <span m="901930">a</span> <span m="902000">data</span> <span m="902210">packet,</span> <span m="903860">it</span> <span m="903980">delivers</span> <span m="904400">it</span> <span m="904490">up</span> <span m="904610">to</span> <span m="904730">the</span> <span m="904820">application.</span> <span m="908060">So</span> <span m="908330">is</span> <span m="908450">the</span> <span m="908540">protocol</span> <span m="909410">potentially</span> <span m="910010">not</span> <span m="910280">in</span> <span m="910370">order?</span> <span m="911450">It's</span> <span m="911600">not</span> <span m="911780">actually</span> <span m="912050">in</span> <span m="912140">order.</span> <span m="912350">We'll</span> <span m="912470">get</span> <span m="912620">back</span> <span m="912830">to</span> <span m="912930">why.</span> <span m="913070">You</span> <span m="913190">have</span> <span m="913280">a</span> <span m="913340">question?</span> </p>
<p><span m="914110">AUDIENCE:</span> <span m="914345">Yeah,</span> <span m="914580">I was just</span> <span m="915050">wondering if</span> <span m="915520">the receiver</span> <span m="915990">gets</span> <span m="916460">a</span> <span m="916930">data packet</span> <span m="917870">and then tries</span> <span m="918340">to send</span> <span m="918810">an acknowledgement</span> <span m="919760">back,</span> <span m="920378">if the</span> <span m="920836">acknowledgement</span> <span m="921752">gets</span> <span m="922668">wrong,</span> <span m="923126">I guess,</span> <span m="925414">the sender</span> <span m="925912">will</span> <span m="926410">resend</span> <span m="926908">data. Does</span> <span m="927406">the receiver</span> <span m="927904">then</span> <span m="928402">compare</span> <span m="928900">to figure</span> <span m="929398">out?</span> </p>
<p><span m="930400">HARI BALAKRISHNAN:</span> <span m="930570">Right,</span> <span m="930740">so</span> <span m="930950">I</span> <span m="931010">haven't</span> <span m="931250">specified</span> <span m="931820">that.</span> <span m="932330">And</span> <span m="932540">you</span> <span m="932840">are</span> <span m="933680">one</span> <span m="933980">step</span> <span m="934220">ahead</span> <span m="934440">of--</span> <span m="935720">you're</span> <span m="935990">at</span> <span m="936140">the</span> <span m="936230">next</span> <span m="936500">picture</span> <span m="936830">here.</span> <span m="936980">What</span> <span m="937130">happens</span> <span m="937610">in</span> <span m="937730">this</span> <span m="937910">case?</span> <span m="938840">You</span> <span m="938970">get</span> <span m="939080">a</span> <span m="939140">duplicate</span> <span m="939580">packet.</span> <span m="940300">And</span> <span m="940490">in</span> <span m="940550">fact,</span> <span m="940790">that's</span> <span m="941090">precisely</span> <span m="941570">for</span> <span m="941690">this</span> <span m="941870">reason</span> <span m="942590">that</span> <span m="942800">this</span> <span m="942950">protocol</span> <span m="943430">is</span> <span m="943580">not</span> <span m="943760">actually--</span> <span m="944000">it's</span> <span m="944150">kind</span> <span m="944360">of</span> <span m="944450">in</span> <span m="944570">order,</span> <span m="944870">but</span> <span m="945020">in</span> <span m="945170">order</span> <span m="945380">means</span> <span m="945680">that</span> <span m="945860">you</span> <span m="945950">deliver</span> <span m="946220">packets</span> <span m="946610">in</span> <span m="947000">the</span> <span m="947090">same</span> <span m="947360">order</span> <span m="947600">in</span> <span m="947690">which</span> <span m="947900">they</span> <span m="948020">were</span> <span m="948140">sent.</span> </p>
<p><span m="948740">And</span> <span m="948890">in</span> <span m="948980">the</span> <span m="949040">way</span> <span m="949220">I've</span> <span m="949400">described</span> <span m="949820">the</span> <span m="949940">description,</span> <span m="950420">given</span> <span m="950660">the</span> <span m="950720">description</span> <span m="951170">of</span> <span m="951260">this</span> <span m="951410">protocol,</span> <span m="952610">this</span> <span m="952820">protocol</span> <span m="953180">does</span> <span m="953300">not</span> <span m="953510">provide</span> <span m="953900">exactly</span> <span m="954440">one</span> <span m="954710">semantics,</span> <span m="955490">right?</span> <span m="956000">It</span> <span m="956090">provides</span> <span m="957020">at</span> <span m="957110">least</span> <span m="957410">one</span> <span m="957620">semantics.</span> <span m="958110">In</span> <span m="958190">other</span> <span m="958310">words,</span> <span m="958560">every</span> <span m="958640">package</span> <span m="958930">is</span> <span m="959000">delivered</span> <span m="959330">at</span> <span m="959420">least</span> <span m="959660">once</span> <span m="959930">to</span> <span m="960020">the</span> <span m="960110">application.</span> <span m="961190">And</span> <span m="961310">what</span> <span m="961520">you</span> <span m="961580">would</span> <span m="961700">like</span> <span m="962000">us</span> <span m="962120">to</span> <span m="962210">deliver</span> <span m="962540">every</span> <span m="962720">packet</span> <span m="962990">exactly</span> <span m="963440">once</span> <span m="963710">to</span> <span m="963800">the</span> <span m="963890">application</span> <span m="964460">in</span> <span m="964580">order.</span> <span m="965430">So</span> <span m="965510">what</span> <span m="965750">would</span> <span m="965900">you</span> <span m="965990">have</span> <span m="966200">to</span> <span m="966290">do</span> <span m="966500">at</span> <span m="966620">the</span> <span m="966680">receiver</span> <span m="967220">in</span> <span m="967730">the</span> <span m="967820">software</span> <span m="968240">that</span> <span m="968390">you</span> <span m="968450">write</span> <span m="968810">and</span> <span m="968960">the</span> <span m="969020">receiver</span> <span m="969470">transport</span> <span m="970490">to</span> <span m="971000">take</span> <span m="971270">the</span> <span m="971390">same</span> <span m="971810">idea</span> <span m="972620">and</span> <span m="972800">make</span> <span m="973100">it</span> <span m="973280">be</span> <span m="973700">a</span> <span m="974660">reliable,</span> <span m="975230">in-order,</span> <span m="976430">exactly-once</span> <span m="977240">protocol?</span> <span m="979080">Yes?</span> </p>
<p><span m="979430">AUDIENCE:</span> <span m="979679">Loop up</span> <span m="979928">if you</span> <span m="980426">received that</span> <span m="980924">sequence</span> <span m="981422">number.</span> </p>
<p><span m="982420">HARI BALAKRISHNAN:</span> <span m="982510">Sorry,</span> <span m="982600">say</span> <span m="982660">again.</span> </p>
<p><span m="982960">AUDIENCE:</span> <span m="983173">Look</span> <span m="983386">up if</span> <span m="983812">you've received</span> <span m="984238">that</span> <span m="984664">sequence</span> <span m="985090">number.</span> </p>
<p><span m="985520">HARI BALAKRISHNAN:</span> <span m="985640">Look</span> <span m="985760">up</span> <span m="985880">if</span> <span m="986000">we</span> <span m="986060">received</span> <span m="986420">that</span> <span m="986570">sequence</span> <span m="986930">number.</span> </p>
<p><span m="987290">AUDIENCE:</span> <span m="987418">I</span> <span m="987546">think</span> <span m="987676">that's</span> <span m="988062">right.</span> </p>
<p><span m="988450">HARI BALAKRISHNAN:</span> <span m="988590">Good.</span> <span m="988730">So</span> <span m="989000">one</span> <span m="989330">implementation</span> <span m="990080">is</span> <span m="991070">you</span> <span m="991250">perhaps</span> <span m="991640">keep</span> <span m="991820">track</span> <span m="992090">of</span> <span m="992240">all</span> <span m="992390">the</span> <span m="992480">sequence</span> <span m="992840">numbers</span> <span m="993140">you've</span> <span m="993290">ever</span> <span m="993620">received</span> <span m="994100">and</span> <span m="994220">delivered</span> <span m="994550">up</span> <span m="994670">to</span> <span m="994730">the</span> <span m="994850">application.</span> <span m="995760">If</span> <span m="995900">the</span> <span m="995990">new</span> <span m="996200">guy</span> <span m="996380">comes</span> <span m="996620">in,</span> <span m="996740">you</span> <span m="996860">look</span> <span m="997040">and</span> <span m="997130">see</span> <span m="997400">if</span> <span m="998270">it's</span> <span m="998420">in</span> <span m="998540">your</span> <span m="998690">list,</span> <span m="999710">and</span> <span m="999800">deliver</span> <span m="1000160">it</span> <span m="1000320">if</span> <span m="1000370">not.</span> <span m="1001580">You</span> <span m="1001630">could</span> <span m="1001750">do</span> <span m="1001900">better.</span> <span m="1002290">You</span> <span m="1002410">have</span> <span m="1002650">to</span> <span m="1002740">do</span> <span m="1002830">all</span> <span m="1002950">that</span> <span m="1003100">work.</span> <span m="1007620">You</span> <span m="1007680">have</span> <span m="1007830">to</span> <span m="1007920">keep</span> <span m="1008100">track</span> <span m="1008340">of</span> <span m="1008430">the</span> <span m="1008520">list</span> <span m="1008730">of</span> <span m="1008820">all</span> <span m="1008970">the</span> <span m="1009030">sequence</span> <span m="1009450">numbers</span> <span m="1009780">you've</span> <span m="1009900">ever</span> <span m="1010050">received</span> <span m="1010470">in</span> <span m="1010560">order</span> <span m="1010740">for</span> <span m="1010860">this</span> <span m="1011040">protocol</span> <span m="1011400">to</span> <span m="1011490">work.</span> </p>
<p><span m="1011820">AUDIENCE:</span> <span m="1012040">[INAUDIBLE]</span> </p>
<p><span m="1014900">HARI BALAKRISHNAN:</span> <span m="1015020">Yeah,</span> <span m="1015140">is</span> <span m="1015260">it</span> <span m="1015350">enough</span> <span m="1015560">to</span> <span m="1015650">keep</span> <span m="1015800">track</span> <span m="1016040">of</span> <span m="1016130">simply</span> <span m="1016370">the</span> <span m="1016460">very</span> <span m="1016640">last</span> <span m="1016970">one</span> <span m="1017150">you've</span> <span m="1017270">delivered</span> <span m="1017750">and</span> <span m="1018200">also</span> <span m="1018560">guarantee</span> <span m="1019100">that</span> <span m="1019250">you'll</span> <span m="1019400">only</span> <span m="1019610">deliver</span> <span m="1019910">stuff</span> <span m="1020210">in</span> <span m="1020360">order?</span> <span m="1020790">So</span> <span m="1021560">if</span> <span m="1021710">you</span> <span m="1021890">get</span> <span m="1022280">up</span> <span m="1022430">to</span> <span m="1022790">packet</span> <span m="1023120">number</span> <span m="1023360">17</span> <span m="1023960">and</span> <span m="1024050">you</span> <span m="1024140">now</span> <span m="1024349">get</span> <span m="1024560">18,</span> <span m="1025460">you</span> <span m="1025579">deliver</span> <span m="1025880">it</span> <span m="1025970">up</span> <span m="1026089">to</span> <span m="1026180">the</span> <span m="1026270">application</span> <span m="1026810">and</span> <span m="1027079">update</span> <span m="1027410">your</span> <span m="1027500">counter</span> <span m="1027859">to</span> <span m="1027950">be</span> <span m="1028109">set</span> <span m="1028310">from</span> <span m="1028520">17</span> <span m="1028970">to</span> <span m="1029089">18</span> <span m="1029640">of</span> <span m="1030020">the</span> <span m="1030140">last</span> <span m="1030530">sequence</span> <span m="1030950">number</span> <span m="1031190">you've</span> <span m="1031339">delivered.</span> </p>
<p><span m="1032510">If</span> <span m="1032660">your</span> <span m="1032810">last</span> <span m="1033050">sequence</span> <span m="1033410">number</span> <span m="1033680">delivered</span> <span m="1034099">in</span> <span m="1034250">order</span> <span m="1034450">is</span> <span m="1034520">17,</span> <span m="1034940">and</span> <span m="1035030">you</span> <span m="1035119">get</span> <span m="1035270">16,</span> <span m="1036410">throw</span> <span m="1036589">it</span> <span m="1036680">out.</span> <span m="1037490">If</span> <span m="1037609">you</span> <span m="1037700">get</span> <span m="1037819">17,</span> <span m="1038240">you</span> <span m="1038329">throw</span> <span m="1038480">it</span> <span m="1038569">out.</span> <span m="1038690">If</span> <span m="1038750">you</span> <span m="1038810">get</span> <span m="1038940">anything--</span> <span m="1039730">if</span> <span m="1039880">you</span> <span m="1039950">get</span> <span m="1040099">19,</span> <span m="1040790">which</span> <span m="1041089">probably</span> <span m="1041480">shouldn't</span> <span m="1041720">happen</span> <span m="1042020">in</span> <span m="1042079">this</span> <span m="1042200">protocol</span> <span m="1042680">unless</span> <span m="1043010">there's</span> <span m="1043250">a</span> <span m="1043310">mistake</span> <span m="1043700">in</span> <span m="1043790">the</span> <span m="1043849">implementation</span> <span m="1044560">that</span> <span m="1044670">they're</span> <span m="1044810">sending</span> <span m="1045270">in,</span> <span m="1045845">if</span> <span m="1046220">the</span> <span m="1046310">last</span> <span m="1046520">sequence</span> <span m="1046819">number</span> <span m="1047060">I</span> <span m="1047119">got</span> <span m="1047329">was</span> <span m="1047420">17,</span> <span m="1048800">can</span> <span m="1048950">the</span> <span m="1049010">sender</span> <span m="1049310">send</span> <span m="1049550">19?</span> </p>
<p><span m="1053411">AUDIENCE:</span> <span m="1053652">No.</span> </p>
<p><span m="1054380">HARI BALAKRISHNAN:</span> <span m="1054470">Why</span> <span m="1054560">not?</span> </p>
<p><span m="1055225">AUDIENCE:</span> <span m="1055437">Because</span> <span m="1055650">we have</span> <span m="1056075">17</span> <span m="1056500">acknowledgements</span> <span m="1056925">[INAUDIBLE].</span> </p>
<p><span m="1057350">HARI BALAKRISHNAN:</span> <span m="1057515">Because--</span> <span m="1057680">that's</span> <span m="1057920">right.</span> <span m="1058280">So</span> <span m="1058430">unless</span> <span m="1058640">there's</span> <span m="1058790">a</span> <span m="1058850">bug</span> <span m="1059180">in</span> <span m="1059270">either</span> <span m="1059510">side</span> <span m="1059750">of</span> <span m="1059840">implementation,</span> <span m="1060510">which,</span> <span m="1060680">trust</span> <span m="1060950">me,</span> <span m="1061130">when</span> <span m="1061250">you</span> <span m="1061340">implement</span> <span m="1061670">it,</span> <span m="1061790">you'll</span> <span m="1061910">probably</span> <span m="1062300">end</span> <span m="1062420">up</span> <span m="1062870">having</span> <span m="1063110">some</span> <span m="1063680">bugs,</span> <span m="1064070">and</span> <span m="1064520">you'd</span> <span m="1064880">know</span> <span m="1065030">something</span> <span m="1065360">is</span> <span m="1065480">amiss.</span> <span m="1065960">But</span> <span m="1066080">there</span> <span m="1066230">are</span> <span m="1066320">these</span> <span m="1066500">invariants</span> <span m="1066950">that</span> <span m="1067100">have</span> <span m="1067250">to</span> <span m="1067340">hold.</span> <span m="1067490">The</span> <span m="1067580">sender</span> <span m="1067850">can send</span> <span m="1068210">k</span> <span m="1068440">plus</span> <span m="1068540">1</span> <span m="1068690">only</span> <span m="1068960">if</span> <span m="1069080">it</span> <span m="1069140">gets an</span> <span m="1069350">ACK for</span> <span m="1069740">k.</span> <span m="1070490">The</span> <span m="1070580">sender</span> <span m="1070940">gets</span> <span m="1071180">an</span> <span m="1071370">ACK for k</span> <span m="1071770">only if</span> <span m="1072050">the</span> <span m="1072140">receiver</span> <span m="1072500">got</span> <span m="1072710">k.</span> </p>
<p><span m="1073310">And</span> <span m="1073430">therefore,</span> <span m="1074720">if</span> <span m="1074840">the</span> <span m="1074930">sender's</span> <span m="1075350">last</span> <span m="1075800">in-order</span> <span m="1076190">sequence</span> <span m="1076610">number</span> <span m="1076850">received</span> <span m="1077270">and</span> <span m="1077360">delivered</span> <span m="1077750">the</span> <span m="1077870">application</span> <span m="1078410">was</span> <span m="1079070">17,</span> <span m="1080430">it</span> <span m="1080630">can't</span> <span m="1080840">actually</span> <span m="1081110">get</span> <span m="1081230">a</span> <span m="1081290">19</span> <span m="1081800">in</span> <span m="1081930">a</span> <span m="1082070">correctly</span> <span m="1082520">implemented</span> <span m="1083030">protocol.</span> <span m="1083760">But</span> <span m="1083960">if</span> <span m="1084050">it</span> <span m="1084140">does,</span> <span m="1084530">because</span> <span m="1084770">in</span> <span m="1085010">the</span> <span m="1085100">real</span> <span m="1085310">world,</span> <span m="1085810">you</span> <span m="1085910">don't</span> <span m="1085970">know</span> <span m="1086060">who</span> <span m="1086180">the</span> <span m="1086270">heck</span> <span m="1086450">wrote</span> <span m="1086630">the</span> <span m="1086720">sending</span> <span m="1087020">side.</span> <span m="1087230">You</span> <span m="1087560">might</span> <span m="1087710">have</span> <span m="1087830">done</span> <span m="1088010">your</span> <span m="1088130">receiver,</span> <span m="1088550">and</span> <span m="1088630">the</span> <span m="1088700">sender</span> <span m="1089390">might</span> <span m="1089570">have</span> <span m="1089660">been</span> <span m="1089780">done</span> <span m="1089990">by,</span> <span m="1090230">oh,</span> <span m="1090410">I</span> <span m="1090500">don't</span> <span m="1090620">know,</span> <span m="1090710">Microsoft.</span> <span m="1091310">And</span> <span m="1091490">it</span> <span m="1091580">may</span> <span m="1091730">have</span> <span m="1091940">an</span> <span m="1092030">issue</span> <span m="1092300">with</span> <span m="1092450">it,</span> <span m="1092570">or</span> <span m="1092720">Apple,</span> <span m="1093020">or</span> <span m="1093080">whoever.</span> <span m="1093770">I</span> <span m="1093830">mean,</span> <span m="1093980">you</span> <span m="1094040">don't</span> <span m="1094190">want</span> <span m="1094310">to</span> <span m="1094400">trust</span> <span m="1094730">it,</span> <span m="1094850">right?</span> </p>
<p><span m="1095330">So</span> <span m="1095660">you</span> <span m="1095870">have</span> <span m="1096110">to</span> <span m="1096200">be</span> <span m="1096320">careful</span> <span m="1096770">about</span> <span m="1097430">making</span> <span m="1097730">sure</span> <span m="1098060">that</span> <span m="1098600">you</span> <span m="1098750">might</span> <span m="1098990">want</span> <span m="1099140">to</span> <span m="1099200">assume</span> <span m="1099500">the</span> <span m="1099590">protocols--</span> <span m="1100670">you</span> <span m="1100940">don't</span> <span m="1101120">want</span> <span m="1101300">assume</span> <span m="1101570">necessarily</span> <span m="1102140">that</span> <span m="1102290">the</span> <span m="1102380">other</span> <span m="1102560">guys</span> <span m="1102800">implemented</span> <span m="1103190">the</span> <span m="1103280">protocol</span> <span m="1103640">right</span> <span m="1104780">because</span> <span m="1105020">he</span> <span m="1105080">might</span> <span m="1105290">not</span> <span m="1105500">have.</span> <span m="1106170">And</span> <span m="1106190">so,</span> <span m="1106550">who</span> <span m="1106700">knows</span> <span m="1106910">what</span> <span m="1107090">might</span> <span m="1107240">happen?</span> <span m="1107730">So</span> <span m="1108200">your</span> <span m="1108450">rule</span> <span m="1108790">as</span> <span m="1108860">the</span> <span m="1108950">receiver</span> <span m="1109400">is</span> <span m="1109910">to</span> <span m="1110450">rigidly</span> <span m="1111050">obey</span> <span m="1111410">whatever</span> <span m="1111770">the</span> <span m="1112190">discipline</span> <span m="1112610">is,</span> <span m="1113030">which</span> <span m="1113210">is</span> <span m="1113630">you</span> <span m="1113750">deliver</span> <span m="1113980">up</span> <span m="1114150">a</span> <span m="1114240">packet</span> <span m="1114530">exactly</span> <span m="1115070">in</span> <span m="1115700">order.</span> </p>
<p><span m="1117470">OK,</span> <span m="1117860">so</span> <span m="1119330">we</span> <span m="1119480">wanted</span> <span m="1119810">exactly-once</span> <span m="1120350">semantics.</span> <span m="1121820">And</span> <span m="1122840">the</span> <span m="1122960">way</span> <span m="1123110">you</span> <span m="1123230">get</span> <span m="1123440">that</span> <span m="1123770">is</span> <span m="1124040">you</span> <span m="1124160">get</span> <span m="1124340">that</span> <span m="1124580">by</span> <span m="1124760">keeping</span> <span m="1125090">track</span> <span m="1125480">of</span> <span m="1125630">the</span> <span m="1125720">very</span> <span m="1125960">last</span> <span m="1126230">sequence</span> <span m="1126650">number</span> <span m="1127340">that</span> <span m="1127490">you</span> <span m="1127550">received.</span> <span m="1128940">So</span> <span m="1128990">this</span> <span m="1129200">protocol--</span> <span m="1129690">so</span> <span m="1129710">the</span> <span m="1129800">first</span> <span m="1130040">idea</span> <span m="1130230">is</span> <span m="1130270">sequence</span> <span m="1130670">numbers.</span> <span m="1131070">The</span> <span m="1131170">second</span> <span m="1131360">protocol</span> <span m="1131870">is</span> <span m="1132140">a retransmission</span> <span m="1137120">after</span> <span m="1137450">a</span> <span m="1137580">timeout.</span> <span m="1140760">Now,</span> <span m="1141180">how</span> <span m="1141390">big</span> <span m="1141600">should</span> <span m="1141840">this</span> <span m="1142050">timeout</span> <span m="1142490">be?</span> <span m="1143160">This</span> <span m="1143280">whole</span> <span m="1143430">protocol</span> <span m="1143850">rests</span> <span m="1144180">on</span> <span m="1144270">this</span> <span m="1144390">magic</span> <span m="1144750">timeout.</span> <span m="1146100">What</span> <span m="1146250">should</span> <span m="1146370">it</span> <span m="1146460">be?</span> <span m="1146760">15,</span> <span m="1147210">17?</span> <span m="1148260">What</span> <span m="1148410">are</span> <span m="1148470">the</span> <span m="1148530">units</span> <span m="1148830">of</span> <span m="1148920">the</span> <span m="1149020">timeout?</span> <span m="1151190">Actually,</span> <span m="1151430">what</span> <span m="1151580">are</span> <span m="1151640">the</span> <span m="1151730">units</span> <span m="1152030">of</span> <span m="1152120">this</span> <span m="1152270">timeout?</span> <span m="1155690">It's</span> <span m="1155930">time.</span> <span m="1156350">So</span> <span m="1156500">it's,</span> <span m="1156650">like,</span> <span m="1156800">seconds</span> <span m="1157250">or</span> <span m="1157340">milliseconds</span> <span m="1157940">or</span> <span m="1158030">something.</span> <span m="1158690">How</span> <span m="1158840">big</span> <span m="1159020">should</span> <span m="1159170">it</span> <span m="1159260">be?</span> </p>
<p><span m="1161009">AUDIENCE:</span> <span m="1161255">[INAUDIBLE]</span> </p>
<p><span m="1162488">HARI BALAKRISHNAN:</span> <span m="1162734">What?</span> </p>
<p><span m="1162981">AUDIENCE:</span> <span m="1163227">5</span> <span m="1163474">milliseconds.</span> </p>
<p><span m="1163970">HARI BALAKRISHNAN:</span> <span m="1164090">5</span> <span m="1164210">milliseconds?</span> </p>
<p><span m="1164780">AUDIENCE:</span> <span m="1164995">[INAUDIBLE]</span> <span m="1166070">milliseconds.</span> </p>
<p><span m="1167360">AUDIENCE:</span> <span m="1167505">Units</span> <span m="1167650">[INAUDIBLE]</span> <span m="1168070">milliseconds.</span> </p>
<p><span m="1168490">HARI BALAKRISHNAN:</span> <span m="1168605">Yeah,</span> <span m="1168720">units</span> <span m="1168990">are</span> <span m="1169060">seconds</span> <span m="1169420">or</span> <span m="1169480">milliseconds.</span> <span m="1169890">Good.</span> <span m="1170100">But</span> <span m="1170920">how</span> <span m="1171070">would</span> <span m="1171160">you</span> <span m="1171250">pick</span> <span m="1171430">it?</span> </p>
<p><span m="1173855">AUDIENCE:</span> <span m="1174009">You</span> <span m="1174163">know</span> <span m="1174318">the</span> <span m="1174781">round-trip</span> <span m="1175250">time.</span> </p>
<p><span m="1175490">HARI BALAKRISHNAN:</span> <span m="1175710">OK,</span> <span m="1175930">good.</span> <span m="1176190">So</span> <span m="1176370">that's</span> <span m="1176580">a</span> <span m="1176640">good</span> <span m="1176760">idea.</span> <span m="1177420">There's</span> <span m="1177660">this</span> <span m="1177810">thing</span> <span m="1177990">I've</span> <span m="1178160">written</span> <span m="1178290">on</span> <span m="1178380">the</span> <span m="1178440">left</span> <span m="1178650">called</span> <span m="1178860">the</span> <span m="1178950">round-trip</span> <span m="1179110">time.</span> <span m="1180270">But</span> <span m="1180480">you</span> <span m="1180570">don't</span> <span m="1180720">know</span> <span m="1180930">the</span> <span m="1181000">round-trip</span> <span m="1181350">time,</span> <span m="1181600">but</span> <span m="1181740">you</span> <span m="1181800">could</span> <span m="1181950">measure</span> <span m="1182280">the</span> <span m="1182380">round-trip</span> <span m="1182740">time.</span> <span m="1183870">And</span> <span m="1183990">I'll</span> <span m="1184110">talk</span> <span m="1184320">about</span> <span m="1184500">how</span> <span m="1184650">you</span> <span m="1184770">measure</span> <span m="1185040">it</span> <span m="1185400">a</span> <span m="1185430">little</span> <span m="1185670">bit</span> <span m="1185790">later.</span> </p>
<p><span m="1186630">But</span> <span m="1187170">it's</span> <span m="1187320">important</span> <span m="1187650">to</span> <span m="1187700">realize</span> <span m="1188040">that</span> <span m="1188730">if</span> <span m="1188880">you</span> <span m="1189000">make</span> <span m="1189270">the</span> <span m="1189360">timeout</span> <span m="1189810">be</span> <span m="1189960">smaller</span> <span m="1190530">than</span> <span m="1190860">the</span> <span m="1190950">round-trip</span> <span m="1191370">time,</span> <span m="1191650">where</span> <span m="1191750">the</span> <span m="1191850">round-trip</span> <span m="1192240">time</span> <span m="1192490">is</span> <span m="1192600">defined</span> <span m="1193140">as</span> <span m="1193440">the</span> <span m="1193560">time</span> <span m="1194220">at</span> <span m="1194340">which</span> <span m="1194490">you</span> <span m="1194580">sent</span> <span m="1194820">a</span> <span m="1194850">packet</span> <span m="1195780">to</span> <span m="1195930">when</span> <span m="1196110">you</span> <span m="1196200">got</span> <span m="1196380">an</span> <span m="1196500">acknowledgment</span> <span m="1196980">for</span> <span m="1197130">that</span> <span m="1197280">packet--</span> <span m="1198060">if</span> <span m="1198150">you</span> <span m="1198270">make</span> <span m="1198480">the</span> <span m="1198570">timeout</span> <span m="1198990">smaller</span> <span m="1199350">than</span> <span m="1199470">the</span> <span m="1199530">round-trip</span> <span m="1199860">time,</span> <span m="1200220">what</span> <span m="1200340">happens</span> <span m="1200700">in</span> <span m="1200790">this</span> <span m="1200940">protocol?</span> </p>
<p><span m="1202520">Let</span> <span m="1202660">me</span> <span m="1202740">first</span> <span m="1202990">ask,</span> <span m="1203190">is</span> <span m="1203280">the</span> <span m="1203340">protocol</span> <span m="1203700">still</span> <span m="1203940">correct?</span> <span m="1206565">By</span> <span m="1207000">correct,</span> <span m="1207360">I</span> <span m="1207420">mean,</span> <span m="1207570">does</span> <span m="1207750">it</span> <span m="1207810">provide</span> <span m="1208230">reliable,</span> <span m="1208740">in-order</span> <span m="1209190">delivery?</span> <span m="1210590">OK,</span> <span m="1210810">it's</span> <span m="1210960">correct,</span> <span m="1211920">because</span> <span m="1213660">that</span> <span m="1214140">correctness</span> <span m="1214590">does</span> <span m="1214770">not</span> <span m="1214950">rest</span> <span m="1215280">on</span> <span m="1215580">how</span> <span m="1215790">we</span> <span m="1215910">pick</span> <span m="1216090">the</span> <span m="1216180">timeout.</span> <span m="1216740">However,</span> <span m="1217290">what</span> <span m="1217470">is</span> <span m="1217560">the</span> <span m="1217650">problem</span> <span m="1218010">with</span> <span m="1218130">making</span> <span m="1218430">the</span> <span m="1218520">timeout</span> <span m="1218880">smaller</span> <span m="1219180">than</span> <span m="1219270">round-trip</span> <span m="1219660">time?</span> </p>
<p><span m="1219930">AUDIENCE:</span> <span m="1220161">[INAUDIBLE]</span> </p>
<p><span m="1223170">HARI BALAKRISHNAN:</span> <span m="1223347">Yeah,</span> <span m="1223525">if</span> <span m="1223880">this</span> <span m="1224070">protocol's</span> <span m="1224430">going</span> <span m="1224530">to</span> <span m="1224640">be here,</span> <span m="1224730">you're</span> <span m="1225090">going</span> <span m="1225190">to</span> <span m="1225300">be</span> <span m="1225390">retransmitting</span> <span m="1226290">and retransmitting</span> <span m="1227010">and</span> <span m="1227310">using</span> <span m="1227700">up</span> <span m="1227820">a</span> <span m="1227880">lot</span> <span m="1228060">more</span> <span m="1228270">of</span> <span m="1228360">the</span> <span m="1228450">network's</span> <span m="1228840">resources</span> <span m="1229740">than</span> <span m="1229950">you</span> <span m="1230100">need</span> <span m="1230340">to</span> <span m="1230940">in</span> <span m="1231120">order</span> <span m="1231360">for</span> <span m="1231510">you</span> <span m="1231750">to</span> <span m="1231900">actually</span> <span m="1232230">get</span> <span m="1232380">your</span> <span m="1232470">protocol</span> <span m="1232860">to</span> <span m="1232950">work</span> <span m="1233130">correctly.</span> <span m="1233550">And</span> <span m="1233670">you</span> <span m="1233760">might,</span> <span m="1234330">if</span> <span m="1234450">the</span> <span m="1234540">time</span> <span m="1234780">out</span> <span m="1234900">is</span> <span m="1234990">really,</span> <span m="1235330">really</span> <span m="1235440">small,</span> <span m="1235770">you</span> <span m="1235860">would</span> <span m="1235980">probably</span> <span m="1236340">congest</span> <span m="1236670">the</span> <span m="1236790">network.</span> </p>
<p><span m="1238060">OK,</span> <span m="1238590">so</span> <span m="1238950">the</span> <span m="1239040">timeout</span> <span m="1239430">has</span> <span m="1239670">to</span> <span m="1239760">be</span> <span m="1239850">bigger</span> <span m="1240120">than</span> <span m="1240270">the</span> <span m="1240330">round-trip</span> <span m="1240690">time.</span> <span m="1241110">The</span> <span m="1241200">trouble</span> <span m="1241560">in</span> <span m="1241650">a</span> <span m="1241710">packet-switched</span> <span m="1242220">network</span> <span m="1242610">is</span> <span m="1242760">that</span> <span m="1243120">delays</span> <span m="1243450">are</span> <span m="1243510">variable</span> <span m="1243930">in</span> <span m="1244020">a</span> <span m="1244050">best-effort</span> <span m="1244530">network.</span> <span m="1245640">And,</span> <span m="1245940">in</span> <span m="1246030">fact,</span> <span m="1246240">packets</span> <span m="1246510">may</span> <span m="1246650">be</span> <span m="1246910">reordered. There</span> <span m="1247300">may be</span> <span m="1247520">weird</span> <span m="1247800">things</span> <span m="1248040">going</span> <span m="1248310">on</span> <span m="1248460">in</span> <span m="1248520">the</span> <span m="1248610">network,</span> <span m="1249610">which</span> <span m="1249690">means</span> <span m="1249930">that</span> <span m="1250080">the</span> <span m="1250170">round-trip</span> <span m="1250530">times</span> <span m="1250770">are</span> <span m="1250860">actually</span> <span m="1251130">not</span> <span m="1251340">constant.</span> <span m="1251820">They</span> <span m="1251970">vary</span> <span m="1252330">with</span> <span m="1252540">time.</span> <span m="1253170">They</span> <span m="1253320">vary</span> <span m="1253620">with</span> <span m="1253770">other</span> <span m="1253980">traffic.</span> <span m="1254520">They</span> <span m="1254640">vary</span> <span m="1254970">with</span> <span m="1255180">lots</span> <span m="1255450">of</span> <span m="1255540">other</span> <span m="1256140">factors.</span> </p>
<p><span m="1257140">And</span> <span m="1257220">so</span> <span m="1258060">what</span> <span m="1258240">you</span> <span m="1258330">want</span> <span m="1258630">is</span> <span m="1258750">an</span> <span m="1258870">adaptive</span> <span m="1259410">method</span> <span m="1259950">that</span> <span m="1260310">would</span> <span m="1260940">measure</span> <span m="1261420">the</span> <span m="1261510">round-trip</span> <span m="1261930">time,</span> <span m="1262230">estimate</span> <span m="1262650">the</span> <span m="1262770">round-trip</span> <span m="1263060">time,</span> <span m="1263340">and</span> <span m="1263430">then</span> <span m="1264060">come</span> <span m="1264240">up</span> <span m="1264390">with</span> <span m="1264510">some</span> <span m="1264690">sort</span> <span m="1264870">of</span> <span m="1265020">an</span> <span m="1265260">algorithm</span> <span m="1265830">to</span> <span m="1266070">compute</span> <span m="1266610">or</span> <span m="1266730">to</span> <span m="1266800">set</span> <span m="1267210">the</span> <span m="1267330">timeout</span> <span m="1268140">as</span> <span m="1268320">a</span> <span m="1268350">function</span> <span m="1268890">of</span> <span m="1269040">the</span> <span m="1269190">observations</span> <span m="1269850">of</span> <span m="1269940">the</span> <span m="1270000">round-trip</span> <span m="1270390">time.</span> <span m="1271260">I'll</span> <span m="1271380">get</span> <span m="1271560">back</span> <span m="1271770">to</span> <span m="1271860">that</span> <span m="1272130">later</span> <span m="1272520">on</span> <span m="1272760">today.</span> <span m="1273630">And</span> <span m="1274590">we'll</span> <span m="1274770">also</span> <span m="1274980">talk</span> <span m="1275190">about</span> <span m="1275400">this</span> <span m="1275550">in</span> <span m="1275640">recitation</span> <span m="1276180">tomorrow.</span> <span m="1277110">It's</span> <span m="1277290">actually</span> <span m="1277500">a</span> <span m="1277530">very</span> <span m="1277740">nice</span> <span m="1278010">application</span> <span m="1278520">of</span> <span m="1278610">a</span> <span m="1278670">very</span> <span m="1278850">simple</span> <span m="1279180">low-pass</span> <span m="1279630">filter.</span> <span m="1280330">So</span> <span m="1280440">we'll</span> <span m="1280650">actually</span> <span m="1280920">come</span> <span m="1281100">back</span> <span m="1281340">to</span> <span m="1281430">this</span> <span m="1281610">idea.</span> </p>
<p><span m="1282270">But</span> <span m="1282450">what</span> <span m="1282600">I</span> <span m="1282660">want</span> <span m="1282900">to</span> <span m="1283600">you</span> <span m="1283820">to</span> <span m="1283890">have</span> <span m="1284130">in</span> <span m="1284220">your</span> <span m="1284340">head</span> <span m="1284520">right</span> <span m="1284670">now</span> <span m="1284910">is</span> <span m="1285240">this</span> <span m="1285390">idea</span> <span m="1285660">that</span> <span m="1285810">there's</span> <span m="1286020">a</span> <span m="1286210">timeout.</span> <span m="1286740">And</span> <span m="1286860">the</span> <span m="1287090">timeout</span> <span m="1287580">has</span> <span m="1287850">to</span> <span m="1287940">be--</span> <span m="1288210">which</span> <span m="1288390">I'll</span> <span m="1288510">call</span> <span m="1288760">RTO</span> <span m="1289960">for</span> <span m="1290160">Retransmission</span> <span m="1290970">TimeOut.</span> <span m="1292020">We</span> <span m="1292380">have</span> <span m="1292620">this</span> <span m="1292800">idea</span> <span m="1293220">that</span> <span m="1293970">our</span> <span m="1294410">retransmission</span> <span m="1294990">timeout</span> <span m="1295320">has</span> <span m="1295530">to</span> <span m="1295620">be</span> <span m="1295710">bigger</span> <span m="1296010">than</span> <span m="1296160">the</span> <span m="1296230">round-trip</span> <span m="1296580">time,</span> <span m="1298500">OK?</span> <span m="1299130">So</span> <span m="1299310">what</span> <span m="1299490">I</span> <span m="1299580">need</span> <span m="1299700">to</span> <span m="1299790">tell</span> <span m="1299970">you</span> <span m="1300090">still</span> <span m="1300420">is</span> <span m="1300780">how</span> <span m="1300990">to</span> <span m="1301080">measure</span> <span m="1301380">and</span> <span m="1301440">estimate</span> <span m="1301860">the</span> <span m="1301920">round-trip</span> <span m="1302250">time</span> <span m="1302550">and</span> <span m="1302640">how</span> <span m="1302790">to</span> <span m="1302910">use</span> <span m="1303180">these</span> <span m="1303420">estimates</span> <span m="1303900">of</span> <span m="1303990">the</span> <span m="1304080">round-trip</span> <span m="1304470">time</span> <span m="1304740">to</span> <span m="1304890">pick</span> <span m="1305160">the</span> <span m="1305280">timeout.</span> </p>
<p><span m="1306420">But</span> <span m="1307020">let's</span> <span m="1307770">subcontract</span> <span m="1308490">that</span> <span m="1308640">problem</span> <span m="1308970">to</span> <span m="1309030">someone.</span> <span m="1309360">Let's</span> <span m="1309540">say</span> <span m="1309720">that</span> <span m="1309840">there's</span> <span m="1310410">the</span> <span m="1310500">black</span> <span m="1310710">box</span> <span m="1311160">that</span> <span m="1311730">will</span> <span m="1311880">tell</span> <span m="1312090">you</span> <span m="1312180">what</span> <span m="1312390">the</span> <span m="1312480">timeout</span> <span m="1312810">should</span> <span m="1312990">be,</span> <span m="1313630">and</span> <span m="1313650">now</span> <span m="1313860">you</span> <span m="1313980">have</span> <span m="1314190">this</span> <span m="1314370">protocol.</span> <span m="1316270">So</span> <span m="1316440">assuming</span> <span m="1317010">we</span> <span m="1317220">have</span> <span m="1317490">that</span> <span m="1317640">black</span> <span m="1317910">box</span> <span m="1318230">and</span> <span m="1318330">someone</span> <span m="1318600">telling</span> <span m="1318870">you</span> <span m="1318990">the</span> <span m="1319060">retransmission</span> <span m="1319710">timeout,</span> <span m="1320790">what</span> <span m="1321000">I</span> <span m="1321060">would</span> <span m="1321180">like</span> <span m="1321390">to</span> <span m="1321480">do</span> <span m="1321600">now</span> <span m="1321930">is</span> <span m="1322560">to</span> <span m="1322800">spend</span> <span m="1323130">some</span> <span m="1323340">time</span> <span m="1323910">telling</span> <span m="1324180">you</span> <span m="1324300">how</span> <span m="1324510">well</span> <span m="1324780">this</span> <span m="1324960">protocol</span> <span m="1325410">works.</span> <span m="1326440">I'd</span> <span m="1326460">like</span> <span m="1326640">to</span> <span m="1326760">understand</span> <span m="1327210">what</span> <span m="1327450">is</span> <span m="1327630">the</span> <span m="1327720">throughput,</span> <span m="1329320">which</span> <span m="1329520">is</span> <span m="1329670">the</span> <span m="1329760">data</span> <span m="1330000">rate</span> <span m="1330870">that</span> <span m="1331050">you</span> <span m="1331140">get</span> <span m="1331800">if</span> <span m="1331980">you're</span> <span m="1332170">on</span> <span m="1332640">the</span> <span m="1332730">stop-and-wait</span> <span m="1333390">protocol.</span> <span m="1334750">So</span> <span m="1334890">that's</span> <span m="1335130">what</span> <span m="1335310">I</span> <span m="1335400">want to</span> <span m="1335640">do</span> <span m="1335730">now--</span> <span m="1336420">throughput</span> <span m="1339570">of</span> <span m="1339690">stop</span> <span m="1339990">and</span> <span m="1340080">wait.</span> </p>
<p><span m="1344220">So</span> <span m="1344430">the</span> <span m="1344550">input</span> <span m="1344940">here</span> <span m="1345270">is--</span> <span m="1346050">I'm</span> <span m="1346200">going</span> <span m="1346290">to</span> <span m="1346380">assume</span> <span m="1346620">a</span> <span m="1346680">very,</span> <span m="1346990">very</span> <span m="1347070">simple</span> <span m="1347400">model.</span> <span m="1347820">I'm</span> <span m="1347940">going</span> <span m="1348090">to</span> <span m="1348180">assume</span> <span m="1348480">for</span> <span m="1348630">a</span> <span m="1348660">minute</span> <span m="1348990">that</span> <span m="1349140">the</span> <span m="1349230">round-trip</span> <span m="1349620">time</span> <span m="1350690">doesn't</span> <span m="1351690">change</span> <span m="1351930">a</span> <span m="1351990">whole</span> <span m="1352110">lot.</span> <span m="1352890">This</span> <span m="1353070">is</span> <span m="1353190">a</span> <span m="1353250">very</span> <span m="1353430">simplifying</span> <span m="1353970">assumption,</span> <span m="1354900">but</span> <span m="1356020">there's</span> <span m="1356190">some</span> <span m="1356400">average</span> <span m="1356770">round-trip</span> <span m="1357120">time.</span> <span m="1357840">I'm</span> <span m="1358110">going</span> <span m="1358180">to</span> <span m="1358260">assume</span> <span m="1358500">that the</span> <span m="1358670">round-trip</span> <span m="1359010">time</span> <span m="1359280">is</span> <span m="1360390">RTT.</span> <span m="1361770">The</span> <span m="1361890">same</span> <span m="1362220">result</span> <span m="1362640">holds</span> <span m="1363050">if the</span> <span m="1363180">round-trip time</span> <span m="1363600">varies,</span> <span m="1363990">but</span> <span m="1364530">just</span> <span m="1364740">simple</span> <span m="1365040">model.</span> </p>
<p><span m="1365400">Let's</span> <span m="1365550">just</span> <span m="1365700">assume</span> <span m="1365940">the</span> <span m="1366060">round-trip time</span> <span m="1366410">is</span> <span m="1366570">fixed.</span> <span m="1367540">And</span> <span m="1367680">let's</span> <span m="1367860">assume</span> <span m="1368220">that</span> <span m="1368520">somebody</span> <span m="1368850">tells</span> <span m="1369150">us</span> <span m="1369300">what</span> <span m="1369510">the</span> <span m="1369570">retransmission</span> <span m="1370170">timeout</span> <span m="1370590">is.</span> <span m="1371440">And</span> <span m="1371640">I</span> <span m="1371730">need</span> <span m="1371910">one</span> <span m="1372150">more</span> <span m="1372330">parameter.</span> <span m="1373080">I'm</span> <span m="1373200">going</span> <span m="1373380">to</span> <span m="1373440">assume</span> <span m="1373800">that</span> <span m="1375930">I</span> <span m="1376200">know</span> <span m="1377070">the</span> <span m="1377190">network's</span> <span m="1377700">packet</span> <span m="1378060">loss</span> <span m="1378360">rate</span> <span m="1379410">because</span> <span m="1379680">intuitively,</span> <span m="1380970">if</span> <span m="1381120">the</span> <span m="1381210">network's</span> <span m="1381570">packet</span> <span m="1381870">loss</span> <span m="1382110">rate</span> <span m="1382410">is</span> <span m="1382500">zero--</span> <span m="1383600">that</span> <span m="1383730">is,</span> <span m="1383850">no</span> <span m="1384000">packets</span> <span m="1384380">are</span> <span m="1384450">lost.</span> <span m="1385130">No</span> <span m="1385560">data</span> <span m="1385860">packets,</span> <span m="1386250">no</span> <span m="1386400">acknowledgments</span> <span m="1386970">are</span> <span m="1387030">lost--</span> <span m="1387690">then</span> <span m="1388230">you</span> <span m="1388350">would</span> <span m="1388470">expect</span> <span m="1388800">this</span> <span m="1388980">protocol</span> <span m="1389400">has</span> <span m="1389700">higher</span> <span m="1390090">throughput</span> <span m="1391320">than</span> <span m="1391710">if</span> <span m="1391860">packets</span> <span m="1392190">were</span> <span m="1392280">lost,</span> <span m="1393060">right?</span> </p>
<p><span m="1393430">If</span> <span m="1393510">the</span> <span m="1393600">packet</span> <span m="1393900">loss</span> <span m="1394110">rate</span> <span m="1394260">is</span> <span m="1394350">50%,</span> <span m="1395280">you</span> <span m="1395400">would</span> <span m="1395520">expect</span> <span m="1395850">that</span> <span m="1395970">what</span> <span m="1396120">would</span> <span m="1396240">happen</span> <span m="1396540">is,</span> <span m="1396660">well,</span> <span m="1397455">half</span> <span m="1397890">the</span> <span m="1397980">packets</span> <span m="1398490">or</span> <span m="1398640">ACKs</span> <span m="1399000">are</span> <span m="1399060">getting</span> <span m="1399300">lost,</span> <span m="1399660">which</span> <span m="1399840">means</span> <span m="1400050">you</span> <span m="1400140">have</span> <span m="1400260">to retransmit</span> <span m="1400890">the</span> <span m="1400980">packet.</span> <span m="1401610">And</span> <span m="1401730">every</span> <span m="1401880">time</span> <span m="1402060">you retransmit</span> <span m="1402600">the</span> <span m="1402660">packet,</span> <span m="1402990">the</span> <span m="1403050">protocol</span> <span m="1403380">comes</span> <span m="1403620">to</span> <span m="1403920">a</span> <span m="1404000">wait.</span> <span m="1405360">And</span> <span m="1405930">you</span> <span m="1406110">have</span> <span m="1406230">to</span> <span m="1406350">wait</span> <span m="1406620">until</span> <span m="1406860">the</span> <span m="1406950">timeout</span> <span m="1407310">happens.</span> <span m="1408940">So</span> <span m="1409020">the</span> <span m="1409110">bigger</span> <span m="1409320">the</span> <span m="1409410">packet</span> <span m="1409680">loss</span> <span m="1409920">rate,</span> <span m="1410130">you</span> <span m="1410220">would</span> <span m="1410310">expect</span> <span m="1410670">the</span> <span m="1410760">protocol</span> <span m="1411090">to</span> <span m="1411180">be</span> <span m="1411270">slower.</span> </p>
<p><span m="1412270">So</span> <span m="1412410">I'm</span> <span m="1412530">going</span> <span m="1412680">to</span> <span m="1412740">assume</span> <span m="1413040">that</span> <span m="1413190">we</span> <span m="1413490">have</span> <span m="1413760">RTT</span> <span m="1414390">and</span> <span m="1414590">RTO.</span> <span m="1416130">And</span> <span m="1416370">we</span> <span m="1416490">have</span> <span m="1416970">a</span> <span m="1417510">packet</span> <span m="1417840">loss</span> <span m="1418140">rate</span> <span m="1423530">of</span> <span m="1424070">L.</span> <span m="1425230">So</span> <span m="1425500">what</span> <span m="1426130">does</span> <span m="1426220">that</span> <span m="1426370">mean?</span> <span m="1427070">What</span> <span m="1427120">it</span> <span m="1427180">means</span> <span m="1427450">is</span> <span m="1427570">that</span> <span m="1427690">if</span> <span m="1427810">I</span> <span m="1427900">send</span> <span m="1428200">a</span> <span m="1428260">large</span> <span m="1428530">number</span> <span m="1428770">of</span> <span m="1428860">packets</span> <span m="1429790">to</span> <span m="1430000">the</span> <span m="1430090">network,</span> <span m="1431080">a</span> <span m="1431140">fraction,</span> <span m="1431620">L,</span> <span m="1431830">of</span> <span m="1431950">them</span> <span m="1432790">will</span> <span m="1432970">get</span> <span m="1433120">lost.</span> <span m="1434110">And</span> <span m="1434260">I'll</span> <span m="1434350">just</span> <span m="1434560">assume</span> <span m="1434870">in</span> <span m="1434950">the</span> <span m="1435010">simplifying</span> <span m="1435580">model</span> <span m="1435940">that</span> <span m="1436720">the</span> <span m="1436840">packet</span> <span m="1437110">losses</span> <span m="1437560">are</span> <span m="1437770">independent.</span> <span m="1438560">So</span> <span m="1438640">they're</span> <span m="1438850">sort</span> <span m="1439000">of</span> <span m="1439090">Bernoulli</span> <span m="1439480">losses.</span> <span m="1440160">You</span> <span m="1440380">know,</span> <span m="1440470">every</span> <span m="1440660">packet</span> <span m="1440950">gets</span> <span m="1441160">lost</span> <span m="1442180">independently</span> <span m="1442660">with</span> <span m="1442960">some</span> <span m="1443170">probability.</span> </p>
<p><span m="1444850">Now,</span> <span m="1445480">I</span> <span m="1445630">also</span> <span m="1446080">will</span> <span m="1446230">assume</span> <span m="1446560">in</span> <span m="1446650">this</span> <span m="1446800">protocol--</span> <span m="1448150">does</span> <span m="1448330">it</span> <span m="1448420">matter</span> <span m="1448990">to</span> <span m="1449170">the</span> <span m="1449260">performance</span> <span m="1449770">of</span> <span m="1449860">the</span> <span m="1449920">protocol</span> <span m="1450310">if</span> <span m="1451260">the</span> <span m="1451360">data</span> <span m="1451600">packet</span> <span m="1451930">is</span> <span m="1452020">lost</span> <span m="1452380">or</span> <span m="1452470">if</span> <span m="1452530">the</span> <span m="1452650">ACK</span> <span m="1452860">packet</span> <span m="1453190">is</span> <span m="1453280">lost?</span> <span m="1456730">It</span> <span m="1456820">doesn't</span> <span m="1457030">matter.</span> <span m="1457690">As</span> <span m="1457840">far</span> <span m="1457990">as</span> <span m="1458080">the</span> <span m="1458170">sender's--</span> <span m="1458670">and</span> <span m="1458770">this</span> <span m="1458800">is</span> <span m="1458890">an</span> <span m="1458980">important</span> <span m="1459310">point</span> <span m="1459540">to</span> <span m="1459750">understand.</span> <span m="1460420">As</span> <span m="1460570">far</span> <span m="1460750">as</span> <span m="1460840">the</span> <span m="1460930">sender</span> <span m="1461260">is</span> <span m="1461380">concerned,</span> <span m="1462340">if</span> <span m="1462490">a</span> <span m="1462550">timeout</span> <span m="1462970">happens,</span> <span m="1463810">it</span> <span m="1463930">has</span> <span m="1464230">no</span> <span m="1464530">way</span> <span m="1464860">of</span> <span m="1465010">knowing</span> <span m="1465550">whether</span> <span m="1465850">the</span> <span m="1465970">timeout</span> <span m="1466390">happened</span> <span m="1466780">because</span> <span m="1467080">the</span> <span m="1467170">data</span> <span m="1467470">was</span> <span m="1467650">lost</span> <span m="1468370">or</span> <span m="1468490">because</span> <span m="1468790">the</span> <span m="1468910">ACK</span> <span m="1469120">was</span> <span m="1469270">lost.</span> </p>
<p><span m="1469570">This</span> <span m="1469610">is,</span> <span m="1469740">like,</span> <span m="1470050">absolutely--</span> <span m="1470440">the</span> <span m="1470560">receiver</span> <span m="1470920">knows.</span> <span m="1471750">Or</span> <span m="1472190">actually,</span> <span m="1472630">the</span> <span m="1472690">receiver</span> <span m="1472960">doesn't</span> <span m="1473170">know</span> <span m="1473290">if</span> <span m="1473380">a</span> <span m="1473410">timeout</span> <span m="1473740">happened,</span> <span m="1474100">but</span> <span m="1474280">the</span> <span m="1474340">receiver</span> <span m="1474760">does</span> <span m="1475060">know</span> <span m="1475270">whether</span> <span m="1475500">it</span> <span m="1475570">got</span> <span m="1475780">a</span> <span m="1475840">data</span> <span m="1476020">packet</span> <span m="1476290">or</span> <span m="1476350">not.</span> <span m="1476470">But</span> <span m="1476590">the</span> <span m="1476680">sender--</span> <span m="1477580">the</span> <span m="1477730">only</span> <span m="1478000">thing</span> <span m="1478150">it's</span> <span m="1478330">acting</span> <span m="1478660">on</span> <span m="1478840">is</span> <span m="1478930">the</span> <span m="1479050">absence</span> <span m="1479500">of</span> <span m="1479620">an ACK.</span> <span m="1480070">And</span> <span m="1480430">the</span> <span m="1480580">absence</span> <span m="1481000">of an</span> <span m="1481120">ACK</span> <span m="1482440">indicates</span> <span m="1482950">either</span> <span m="1483310">that</span> <span m="1483430">the</span> <span m="1483520">data</span> <span m="1483760">was</span> <span m="1483880">lost</span> <span m="1484210">or</span> <span m="1484400">that the</span> <span m="1484520">ACK</span> <span m="1484810">was</span> <span m="1484930">lost,</span> <span m="1485170">and</span> <span m="1485560">it</span> <span m="1485680">has</span> <span m="1485860">no</span> <span m="1486040">idea</span> <span m="1486340">which.</span> <span m="1487240">Therefore,</span> <span m="1488080">we</span> <span m="1488260">could</span> <span m="1488530">assume</span> <span m="1489660">for</span> <span m="1490060">this</span> <span m="1490240">analysis</span> <span m="1490720">that</span> <span m="1491320">this</span> <span m="1491710">packet</span> <span m="1492040">loss</span> <span m="1492400">rate</span> <span m="1492640">of</span> <span m="1492770">L</span> <span m="1493090">is</span> <span m="1493270">actually</span> <span m="1493630">a</span> <span m="1493750">bidirectional</span> <span m="1494590">packet</span> <span m="1494920">loss</span> <span m="1495190">rate.</span> <span m="1498550">What</span> <span m="1498730">I</span> <span m="1498820">mean</span> <span m="1499060">by</span> <span m="1499210">that</span> <span m="1499480">is</span> <span m="1499870">L</span> <span m="1500350">is</span> <span m="1500590">the</span> <span m="1500710">probability</span> <span m="1501340">that</span> <span m="1501550">either</span> <span m="1501940">a</span> <span m="1502000">data</span> <span m="1502240">packet</span> <span m="1502630">is</span> <span m="1502750">lost,</span> <span m="1503110">or</span> <span m="1503380">its</span> <span m="1503560">ACK</span> <span m="1503800">was</span> <span m="1503950">lost,</span> <span m="1505080">OK?</span> </p>
<p><span m="1506390">Now,</span> <span m="1506510">if</span> <span m="1506630">I</span> <span m="1506690">give</span> <span m="1506930">you</span> <span m="1507050">the</span> <span m="1507170">one-way</span> <span m="1507650">loss</span> <span m="1507920">probability,</span> <span m="1508460">you</span> <span m="1508610">can</span> <span m="1508760">do</span> <span m="1508970">the</span> <span m="1509180">calculation.</span> <span m="1510030">That's</span> <span m="1510200">a</span> <span m="1510230">probability</span> <span m="1510710">calculation</span> <span m="1511220">to</span> <span m="1511730">find</span> <span m="1512090">out</span> <span m="1512300">what</span> <span m="1512480">is</span> <span m="1512570">the</span> <span m="1512630">probability</span> <span m="1512990">that</span> <span m="1513110">either</span> <span m="1513470">the</span> <span m="1513560">packet</span> <span m="1513860">was</span> <span m="1513980">lost</span> <span m="1514190">or</span> <span m="1514400">the</span> <span m="1514490">data</span> <span m="1514700">was</span> <span m="1514850">lost.</span> <span m="1515090">That's</span> <span m="1515240">an</span> <span m="1515330">easy</span> <span m="1515570">calculation.</span> <span m="1516410">But</span> <span m="1516530">let</span> <span m="1516620">me</span> <span m="1516710">just</span> <span m="1516890">assume</span> <span m="1517250">that</span> <span m="1517910">the</span> <span m="1518030">probability</span> <span m="1518540">that</span> <span m="1518690">either</span> <span m="1518970">the</span> <span m="1519020">packet</span> <span m="1519320">was</span> <span m="1519440">lost,</span> <span m="1519830">data</span> <span m="1520130">packet</span> <span m="1520460">was</span> <span m="1520580">lost,</span> <span m="1520850">or</span> <span m="1521000">its</span> <span m="1521060">ACK</span> <span m="1521390">was</span> <span m="1521540">lost,</span> <span m="1521840">is</span> <span m="1522000">L.</span> </p>
<p><span m="1522980">So</span> <span m="1523130">given</span> <span m="1523400">these</span> <span m="1523580">numbers,</span> <span m="1524600">what</span> <span m="1524780">I</span> <span m="1524870">want</span> <span m="1525050">to</span> <span m="1525110">do</span> <span m="1525410">is,</span> <span m="1525980">given</span> <span m="1526280">these</span> <span m="1526490">things,</span> <span m="1526730">I</span> <span m="1526790">want</span> <span m="1526940">to</span> <span m="1527000">know</span> <span m="1527120">what</span> <span m="1527300">the</span> <span m="1527390">throughput</span> <span m="1527750">is.</span> <span m="1530840">In</span> <span m="1530990">other</span> <span m="1531170">words,</span> <span m="1531930">how</span> <span m="1532010">many</span> <span m="1532190">packets</span> <span m="1532890">per</span> <span m="1535250">second</span> <span m="1537030">am</span> <span m="1537210">I</span> <span m="1537360">transmitting,</span> <span m="1538590">am</span> <span m="1538710">I</span> <span m="1539040">able</span> <span m="1539310">to</span> <span m="1539400">transmit,</span> <span m="1539880">or</span> <span m="1540060">am</span> <span m="1540210">I</span> <span m="1540300">able</span> <span m="1540480">to</span> <span m="1540540">receive</span> <span m="1540960">at</span> <span m="1541080">the</span> <span m="1541140">receiver?</span> <span m="1542230">So</span> <span m="1542610">if</span> <span m="1542700">you</span> <span m="1542820">want</span> <span m="1542970">to</span> <span m="1543030">look</span> <span m="1543180">at</span> <span m="1543270">what</span> <span m="1543420">happens</span> <span m="1543720">in</span> <span m="1543810">this</span> <span m="1543930">picture,</span> <span m="1544470">if</span> <span m="1544590">you</span> <span m="1544650">draw</span> <span m="1544860">time</span> <span m="1548730">like</span> <span m="1548910">that--</span> <span m="1549530">you</span> <span m="1550020">send</span> <span m="1550260">a</span> <span m="1550320">packet,</span> <span m="1551100">and</span> <span m="1551220">maybe</span> <span m="1551460">you</span> <span m="1551580">get</span> <span m="1551700">an ACK</span> <span m="1552090">here.</span> <span m="1554310">So</span> <span m="1554890">D1,</span> <span m="1555430">A1.</span> <span m="1556510">You</span> <span m="1556650">send</span> <span m="1556890">D2</span> <span m="1558870">immediately.</span> <span m="1561690">And</span> <span m="1561870">you</span> <span m="1561960">get</span> <span m="1562160">A2</span> <span m="1562530">after</span> <span m="1562770">some</span> <span m="1563070">time.</span> </p>
<p><span m="1564420">And</span> <span m="1564570">maybe</span> <span m="1564840">you</span> <span m="1564960">have</span> <span m="1565140">a</span> <span m="1565350">timeout.</span> <span m="1566880">So</span> <span m="1567090">you</span> <span m="1567180">send</span> <span m="1567370">D3.</span> <span m="1570380">And</span> <span m="1570600">then</span> <span m="1570760">you</span> <span m="1570910">have</span> <span m="1571570">a</span> <span m="1571600">period</span> <span m="1571900">of</span> <span m="1572020">time,</span> <span m="1572420">which</span> <span m="1572500">is</span> <span m="1572650">the</span> <span m="1572860">RTO.</span> <span m="1575640">No</span> <span m="1575890">ACK</span> <span m="1576160">happens.</span> <span m="1578050">You</span> <span m="1578140">send</span> <span m="1578350">D3</span> <span m="1578740">again.</span> <span m="1579780">And</span> <span m="1580120">maybe</span> <span m="1580690">no</span> <span m="1580940">ACK</span> <span m="1581260">happens</span> <span m="1581680">for</span> <span m="1581800">a</span> <span m="1581860">while.</span> <span m="1582160">You</span> <span m="1582280">have</span> <span m="1582400">another</span> <span m="1582720">RTO.</span> <span m="1583630">I'll</span> <span m="1583780">assume</span> <span m="1584050">that</span> <span m="1584170">the</span> <span m="1584260">RTO</span> <span m="1584640">was</span> <span m="1584770">fixed</span> <span m="1585070">here.</span> <span m="1585760">And</span> <span m="1585850">you</span> <span m="1585940">send</span> <span m="1586120">D3</span> <span m="1586510">again.</span> <span m="1589460">And</span> <span m="1589640">you</span> <span m="1589730">get</span> <span m="1589880">an</span> <span m="1590000">ACK</span> <span m="1590330">here.</span> <span m="1592230">And</span> <span m="1592340">then</span> <span m="1592490">you</span> <span m="1592580">send</span> <span m="1592790">D4</span> <span m="1593270">here,</span> <span m="1594290">and</span> <span m="1594410">so</span> <span m="1594590">forth,</span> <span m="1595140">right?</span> <span m="1595550">That's</span> <span m="1595760">an</span> <span m="1595820">example</span> <span m="1596300">of</span> <span m="1596450">what</span> <span m="1596660">could</span> <span m="1596870">happen</span> <span m="1597590">in</span> <span m="1597710">a</span> <span m="1597770">particular</span> <span m="1599420">time</span> <span m="1599690">evolution</span> <span m="1600170">of</span> <span m="1600260">the</span> <span m="1600320">protocol.</span> </p>
<p><span m="1602360">What</span> <span m="1602540">I</span> <span m="1602600">mean</span> <span m="1602810">by</span> <span m="1602930">throughput</span> <span m="1603410">is</span> <span m="1603980">that</span> <span m="1604460">I</span> <span m="1604700">would</span> <span m="1604850">like</span> <span m="1605090">to</span> <span m="1605420">run</span> <span m="1605810">such</span> <span m="1606050">an</span> <span m="1606140">experiment</span> <span m="1606680">for</span> <span m="1606890">a</span> <span m="1606920">very</span> <span m="1607160">long</span> <span m="1607400">time,</span> <span m="1607700">or</span> <span m="1607820">run</span> <span m="1607940">many,</span> <span m="1608280">many</span> <span m="1608360">such</span> <span m="1608600">experiments,</span> <span m="1609780">which</span> <span m="1609860">is</span> <span m="1610010">sort</span> <span m="1610220">of</span> <span m="1610310">equivalent</span> <span m="1610670">to</span> <span m="1610730">running</span> <span m="1611000">an</span> <span m="1611090">experiment</span> <span m="1611480">for</span> <span m="1611630">a</span> <span m="1611660">very</span> <span m="1611870">long</span> <span m="1612080">time,</span> <span m="1612980">and</span> <span m="1613100">then</span> <span m="1613310">count</span> <span m="1614120">how</span> <span m="1614240">many</span> <span m="1614420">packets</span> <span m="1615290">did</span> <span m="1615440">I</span> <span m="1615560">successfully</span> <span m="1616250">get</span> <span m="1616730">at</span> <span m="1616820">the</span> <span m="1616910">receiver.</span> <span m="1617660">Or</span> <span m="1617780">equivalently,</span> <span m="1618320">I</span> <span m="1618380">can</span> <span m="1618530">ask</span> <span m="1618680">how</span> <span m="1618770">many</span> <span m="1618980">ACKs</span> <span m="1619310">did</span> <span m="1619460">I</span> <span m="1619520">get</span> <span m="1619700">at</span> <span m="1619790">the</span> <span m="1619880">sender</span> <span m="1620360">over</span> <span m="1620630">that</span> <span m="1620810">long</span> <span m="1621080">experiment,</span> <span m="1622410">right?</span> <span m="1623000">And</span> <span m="1623180">the</span> <span m="1623240">number</span> <span m="1623510">of</span> <span m="1623600">ACKs</span> <span m="1623930">that</span> <span m="1624080">I</span> <span m="1624170">get</span> <span m="1624380">at</span> <span m="1624440">the</span> <span m="1624530">center</span> <span m="1625550">divided</span> <span m="1626030">by</span> <span m="1627500">the</span> <span m="1627620">time</span> <span m="1627980">of</span> <span m="1628100">that</span> <span m="1628280">experiment</span> <span m="1629120">will</span> <span m="1629270">tell</span> <span m="1629450">me</span> <span m="1629570">the</span> <span m="1629660">number</span> <span m="1629930">of</span> <span m="1630530">packets</span> <span m="1630860">per</span> <span m="1631010">second.</span> </p>
<p><span m="1634910">Or</span> <span m="1635010">put</span> <span m="1635160">another</span> <span m="1635460">way,</span> <span m="1636390">if</span> <span m="1636570">I</span> <span m="1636960">run</span> <span m="1637230">the</span> <span m="1637290">experiment</span> <span m="1637830">for</span> <span m="1638010">some</span> <span m="1638250">long</span> <span m="1638520">period</span> <span m="1638820">of</span> <span m="1638910">time,</span> <span m="1639810">and</span> <span m="1640500">I</span> <span m="1640830">receive</span> <span m="1641160">n</span> <span m="1641400">packets</span> <span m="1642060">coming</span> <span m="1642360">back--</span> <span m="1643310">right?</span> <span m="1645990">If</span> <span m="1646110">I</span> <span m="1646200">receive</span> <span m="1646560">n</span> <span m="1647700">acknowledgments--</span> <span m="1653660">and</span> <span m="1654230">if</span> <span m="1654410">the</span> <span m="1654560">expected</span> <span m="1655130">time</span> <span m="1655550">here</span> <span m="1655910">between</span> <span m="1658580">when</span> <span m="1658820">I</span> <span m="1658910">send</span> <span m="1659210">a</span> <span m="1659240">data</span> <span m="1659450">packet--</span> <span m="1661280">I</span> <span m="1661400">send</span> <span m="1661550">a</span> <span m="1661610">data</span> <span m="1661790">packet.</span> <span m="1662090">I</span> <span m="1662150">get</span> <span m="1662300">an</span> <span m="1662420">ACK. I</span> <span m="1662690">send a data</span> <span m="1663110">packet.</span> <span m="1663370">I</span> <span m="1663450">get</span> <span m="1663560">an</span> <span m="1663680">ACK. I</span> <span m="1663930">send a data</span> <span m="1664330">packet,</span> <span m="1664640">and</span> <span m="1664730">I</span> <span m="1664820">get</span> <span m="1664970">an</span> <span m="1665090">ACK.</span> <span m="1665720">I</span> <span m="1665990">send a data</span> <span m="1666440">packet,</span> <span m="1666710">and</span> <span m="1666800">I</span> <span m="1666860">get</span> <span m="1666980">an</span> <span m="1667100">ACK.</span> </p>
<p><span m="1667880">If</span> <span m="1667970">I</span> <span m="1668060">take</span> <span m="1668300">the</span> <span m="1668390">expected</span> <span m="1668870">value</span> <span m="1669290">of</span> <span m="1669410">that</span> <span m="1669590">time--</span> <span m="1670710">that</span> <span m="1670820">is,</span> <span m="1670910">the</span> <span m="1671000">expected</span> <span m="1671390">time</span> <span m="1671660">between</span> <span m="1671930">when</span> <span m="1672080">I</span> <span m="1672140">send</span> <span m="1672320">a</span> <span m="1672350">packet</span> <span m="1673070">and</span> <span m="1673220">one</span> <span m="1673430">I</span> <span m="1673490">get</span> <span m="1673640">an</span> <span m="1673760">ACK--</span> <span m="1675830">the</span> <span m="1676850">1</span> <span m="1677090">over</span> <span m="1677420">that</span> <span m="1677630">number,</span> <span m="1678110">1</span> <span m="1678590">over</span> <span m="1679550">the</span> <span m="1679880">expected</span> <span m="1680450">time,</span> <span m="1684470">is</span> <span m="1684650">equal</span> <span m="1684920">to</span> <span m="1685010">my</span> <span m="1685160">throughput</span> <span m="1686900">in</span> <span m="1687050">packets</span> <span m="1687410">per</span> <span m="1687530">second.</span> <span m="1692240">Because</span> <span m="1692480">if</span> <span m="1692570">I</span> <span m="1692600">run</span> <span m="1692750">the</span> <span m="1692810">experiment</span> <span m="1693200">for</span> <span m="1693320">a</span> <span m="1693380">long</span> <span m="1693590">time,</span> <span m="1694550">I'm</span> <span m="1694670">going</span> <span m="1694880">to</span> <span m="1695030">get</span> <span m="1696050">some</span> <span m="1696260">number</span> <span m="1696470">of</span> <span m="1696590">acknowledgments.</span> </p>
<p><span m="1697700">So</span> <span m="1697850">if</span> <span m="1697970">I</span> <span m="1698030">run</span> <span m="1698210">it</span> <span m="1698330">for</span> <span m="1698600">some</span> <span m="1698810">period</span> <span m="1699050">of</span> <span m="1699140">time</span> <span m="1699500">where</span> <span m="1700460">n</span> <span m="1700660">times</span> <span m="1701930">e</span> <span m="1702170">of</span> <span m="1702320">t--</span> <span m="1702750">where</span> <span m="1702850">e</span> <span m="1703010">of t</span> <span m="1703280">is</span> <span m="1703460">number</span> <span m="1703730">here,</span> <span m="1704430">and</span> <span m="1704600">I</span> <span m="1704660">get</span> <span m="1704870">back</span> <span m="1705170">an</span> <span m="1705290">acknowledgment,</span> <span m="1706070">n</span> <span m="1706280">divided</span> <span m="1706700">by</span> <span m="1706910">n</span> <span m="1707090">times</span> <span m="1707660">e of</span> <span m="1707920">t</span> <span m="1708180">is</span> <span m="1708320">my</span> <span m="1708470">throughput.</span> <span m="1709520">And</span> <span m="1709850">therefore,</span> <span m="1710240">1</span> <span m="1710480">over</span> <span m="1710750">the</span> <span m="1710900">expected</span> <span m="1711320">time</span> <span m="1712010">is</span> <span m="1712190">the</span> <span m="1712250">throughput</span> <span m="1712970">of</span> <span m="1713090">my</span> <span m="1713240">experiment,</span> <span m="1714150">right?</span> </p>
<p><span m="1715170">So</span> <span m="1715290">this</span> <span m="1715430">should</span> <span m="1715610">be</span> <span m="1715700">intuitive,</span> <span m="1716060">because</span> <span m="1716300">what's</span> <span m="1716540">really</span> <span m="1716780">happening</span> <span m="1717170">is,</span> <span m="1718730">with</span> <span m="1718940">a</span> <span m="1718970">little</span> <span m="1719150">bit</span> <span m="1719270">of</span> <span m="1719360">handwaving,</span> <span m="1719900">actually,</span> <span m="1721100">that</span> <span m="1722410">I</span> <span m="1722540">send</span> <span m="1722730">data.</span> <span m="1723000">I</span> <span m="1723050">get</span> <span m="1723200">an</span> <span m="1723320">ACK.</span> <span m="1723465">Send</span> <span m="1723610">data,</span> <span m="1723830">I</span> <span m="1723920">get</span> <span m="1724070">an</span> <span m="1724190">ACK.</span> <span m="1724760">There's</span> <span m="1725030">a</span> <span m="1725300">certain</span> <span m="1725570">expected</span> <span m="1725960">amount</span> <span m="1726170">of</span> <span m="1726260">time,</span> <span m="1726690">so</span> <span m="1726800">I</span> <span m="1726890">will</span> <span m="1727130">send</span> <span m="1727340">1</span> <span m="1727550">over</span> <span m="1727820">that</span> <span m="1728600">packets</span> <span m="1728960">per</span> <span m="1729080">second,</span> <span m="1729770">OK?</span> <span m="1730610">So</span> <span m="1730760">in</span> <span m="1730820">other</span> <span m="1730970">words,</span> <span m="1731280">the</span> <span m="1731380">throughput</span> <span m="1731720">is</span> <span m="1731870">the</span> <span m="1731930">reciprocal</span> <span m="1732470">of</span> <span m="1732560">the</span> <span m="1732680">expected</span> <span m="1733070">amount</span> <span m="1733280">of</span> <span m="1733370">time</span> <span m="1733640">between</span> <span m="1733910">when</span> <span m="1734030">I</span> <span m="1734090">send</span> <span m="1734270">a</span> <span m="1734300">packet</span> <span m="1734690">and</span> <span m="1734810">when</span> <span m="1734960">I</span> <span m="1735020">get</span> <span m="1735170">an</span> <span m="1735260">acknowledgment.</span> <span m="1736040">So</span> <span m="1736220">it's</span> <span m="1736340">enough</span> <span m="1736550">for</span> <span m="1736730">us</span> <span m="1736850">to</span> <span m="1737240">compute</span> <span m="1737780">the</span> <span m="1737930">expected</span> <span m="1738320">value</span> <span m="1738620">of</span> <span m="1738680">this</span> <span m="1738800">time,</span> <span m="1739832">right,</span> <span m="1740180">or</span> <span m="1740430">the</span> <span m="1740600">mean</span> <span m="1740840">value</span> <span m="1741170">of</span> <span m="1741260">that</span> <span m="1741440">time.</span> </p>
<p><span m="1744060">All</span> <span m="1744150">right,</span> <span m="1744370">so</span> <span m="1744850">we</span> <span m="1745270">could</span> <span m="1745390">do</span> <span m="1745510">that</span> <span m="1745660">calculation</span> <span m="1747310">in</span> <span m="1747430">a</span> <span m="1747460">simpler</span> <span m="1747790">way.</span> <span m="1748870">There's</span> <span m="1749110">the</span> <span m="1749210">sort</span> <span m="1749350">of</span> <span m="1749440">tedious</span> <span m="1749800">way</span> <span m="1749950">to</span> <span m="1750040">do</span> <span m="1750190">it,</span> <span m="1750380">and</span> <span m="1750480">there's</span> <span m="1750520">a</span> <span m="1750550">very</span> <span m="1750760">simple,</span> <span m="1751160">nice</span> <span m="1751330">way</span> <span m="1751450">to</span> <span m="1751540">do</span> <span m="1751720">it.</span> <span m="1752300">So</span> <span m="1752560">we</span> <span m="1752710">want</span> <span m="1752890">to</span> <span m="1752950">calculate</span> <span m="1753310">expected</span> <span m="1753760">time</span> <span m="1756550">between</span> <span m="1758290">data</span> <span m="1760030">and</span> <span m="1760220">ACK.</span> <span m="1762830">And</span> <span m="1762850">one</span> <span m="1763060">way</span> <span m="1763210">to</span> <span m="1763300">do</span> <span m="1763480">this</span> <span m="1763720">is</span> <span m="1763930">to</span> <span m="1764020">say</span> <span m="1764320">that--</span> <span m="1766300">let's say I</span> <span m="1766670">send</span> <span m="1766990">a</span> <span m="1767050">data</span> <span m="1767230">packet.</span> <span m="1768790">One</span> <span m="1768970">of</span> <span m="1769060">two</span> <span m="1769210">things</span> <span m="1769450">can</span> <span m="1769600">happen.</span> <span m="1770260">I</span> <span m="1770440">either</span> <span m="1770770">get an</span> <span m="1770950">ACK</span> <span m="1771250">for</span> <span m="1771460">it,</span> <span m="1772120">or</span> <span m="1772270">I</span> <span m="1772330">don't</span> <span m="1772570">get an</span> <span m="1772720">ACK</span> <span m="1772990">for</span> <span m="1773140">it.</span> <span m="1774460">What's</span> <span m="1774700">the</span> <span m="1774820">probability</span> <span m="1775390">that</span> <span m="1775540">if</span> <span m="1775630">I</span> <span m="1775720">send</span> <span m="1776050">a</span> <span m="1776110">data</span> <span m="1776320">packet,</span> <span m="1776800">I</span> <span m="1776920">get an</span> <span m="1777100">ACK</span> <span m="1777330">for</span> <span m="1777450">it?</span> </p>
<p><span m="1780440">Well,</span> <span m="1781160">the</span> <span m="1781220">probability</span> <span m="1781850">that</span> <span m="1785550">I</span> <span m="1786120">send</span> <span m="1786390">a</span> <span m="1786450">packet</span> <span m="1787200">and</span> <span m="1787410">I</span> <span m="1787560">don't</span> <span m="1787860">get an</span> <span m="1788040">ACK</span> <span m="1788330">for</span> <span m="1788520">it</span> <span m="1788670">is</span> <span m="1788860">L.</span> <span m="1789570">Therefore,</span> <span m="1789870">the</span> <span m="1789960">probability</span> <span m="1790470">that</span> <span m="1790680">if</span> <span m="1790770">I</span> <span m="1790860">send a</span> <span m="1791070">data</span> <span m="1791310">packet,</span> <span m="1791670">I</span> <span m="1791730">get</span> <span m="1791880">ACK</span> <span m="1792220">for</span> <span m="1792300">it,</span> <span m="1792390">is</span> <span m="1792480">1</span> <span m="1792690">minus</span> <span m="1792900">L,</span> <span m="1793880">right?</span> <span m="1794490">So</span> <span m="1794670">with</span> <span m="1794880">probability</span> <span m="1795420">1</span> <span m="1795630">minus</span> <span m="1795950">L,</span> <span m="1799470">I</span> <span m="1799590">send</span> <span m="1799830">a</span> <span m="1799860">data</span> <span m="1800070">packet,</span> <span m="1803940">and</span> <span m="1804060">I</span> <span m="1804210">immediately</span> <span m="1804660">get--</span> <span m="1804870">and</span> <span m="1804960">when</span> <span m="1805140">I</span> <span m="1805200">say</span> <span m="1805350">"immediately,"</span> <span m="1805800">I</span> <span m="1805890">get</span> <span m="1806040">an</span> <span m="1806160">ACK</span> <span m="1807480">for</span> <span m="1807690">that</span> <span m="1807900">data</span> <span m="1808110">packet,</span> <span m="1810530">right?</span> </p>
<p><span m="1811530">And</span> <span m="1811650">how</span> <span m="1811830">long</span> <span m="1812070">does</span> <span m="1812220">that</span> <span m="1812400">take?</span> <span m="1812760">If</span> <span m="1812910">I</span> <span m="1813090">get an</span> <span m="1813270">ACK</span> <span m="1813600">for</span> <span m="1813780">it,</span> <span m="1814350">the</span> <span m="1814500">ACK</span> <span m="1814980">comes</span> <span m="1815220">back</span> <span m="1815430">to</span> <span m="1815550">me</span> <span m="1815730">in</span> <span m="1815880">a</span> <span m="1815940">time</span> <span m="1816310">which</span> <span m="1816390">is</span> <span m="1816480">equal</span> <span m="1816720">to</span> <span m="1816900">RTT,</span> <span m="1817710">the</span> <span m="1817890">Round-Trip</span> <span m="1818220">Time,</span> <span m="1819220">right?</span> <span m="1819600">So</span> <span m="1819750">therefore,</span> <span m="1820210">I</span> <span m="1820310">can</span> <span m="1820350">write</span> <span m="1820830">a</span> <span m="1820890">formula</span> <span m="1821310">that</span> <span m="1821430">looks</span> <span m="1821670">like</span> <span m="1821820">this.</span> <span m="1822030">I</span> <span m="1822090">can</span> <span m="1822240">write</span> <span m="1822870">this</span> <span m="1823080">expected</span> <span m="1823560">time</span> <span m="1824970">which</span> <span m="1825150">I'm</span> <span m="1825240">trying</span> <span m="1825450">to</span> <span m="1825540">calculate</span> <span m="1826410">as</span> <span m="1826710">being</span> <span m="1827010">equal</span> <span m="1827370">to</span> <span m="1827520">1</span> <span m="1827790">minus</span> <span m="1828150">L.</span> <span m="1829760">With</span> <span m="1829920">probability</span> <span m="1830400">1</span> <span m="1830610">minus</span> <span m="1830910">L,</span> <span m="1831120">the</span> <span m="1831270">expected</span> <span m="1831720">time</span> <span m="1832020">between</span> <span m="1832290">when</span> <span m="1832470">I</span> <span m="1832530">send</span> <span m="1832740">a</span> <span m="1832770">data</span> <span m="1832980">packet</span> <span m="1833760">and</span> <span m="1833880">when</span> <span m="1834090">I</span> <span m="1834150">get an</span> <span m="1834330">ACK</span> <span m="1834650">for</span> <span m="1834870">it</span> <span m="1835800">is</span> <span m="1836070">equal</span> <span m="1836370">to</span> <span m="1836460">the</span> <span m="1836580">RTT,</span> <span m="1840334">right?</span> <span m="1842700">Because</span> <span m="1843000">1</span> <span m="1843200">minus</span> <span m="1843450">L</span> <span m="1843590">is,</span> <span m="1843720">by</span> <span m="1843900">definition,</span> <span m="1844380">the</span> <span m="1844440">probability</span> <span m="1844890">that</span> <span m="1844980">I</span> <span m="1845040">send</span> <span m="1845250">a</span> <span m="1845310">packet</span> <span m="1845640">and</span> <span m="1845730">I</span> <span m="1845790">get</span> <span m="1845940">an</span> <span m="1846030">ACK for it.</span> <span m="1846710">Send a</span> <span m="1847090">data</span> <span m="1847470">packet</span> <span m="1847570">and</span> <span m="1847710">get</span> <span m="1847860">an</span> <span m="1847930">ACK.</span> </p>
<p><span m="1848820">Now,</span> <span m="1848910">what</span> <span m="1849090">happens</span> <span m="1849450">with</span> <span m="1849570">probability</span> <span m="1850110">L?</span> <span m="1852600">With</span> <span m="1852750">probability</span> <span m="1853350">L,</span> <span m="1853530">I</span> <span m="1853620">send</span> <span m="1853890">a</span> <span m="1853920">data</span> <span m="1854130">packet,</span> <span m="1854550">and</span> <span m="1854670">I</span> <span m="1854760">don't</span> <span m="1855000">get an</span> <span m="1855120">ACK</span> <span m="1855360">for</span> <span m="1855480">it.</span> <span m="1857070">So</span> <span m="1857220">now</span> <span m="1857580">I</span> <span m="1857670">want</span> <span m="1857850">to</span> <span m="1857910">compute</span> <span m="1858210">the</span> <span m="1858300">expected</span> <span m="1858750">time</span> <span m="1859740">given</span> <span m="1860040">that</span> <span m="1860370">I</span> <span m="1860490">don't</span> <span m="1860760">get an</span> <span m="1860910">ACK</span> <span m="1861200">for</span> <span m="1861390">it.</span> <span m="1862840">The</span> <span m="1862940">first</span> <span m="1863070">thing</span> <span m="1863220">that</span> <span m="1863310">has</span> <span m="1863520">to</span> <span m="1863640">happen</span> <span m="1863910">is</span> <span m="1864000">I</span> <span m="1864060">need</span> <span m="1864210">to</span> <span m="1864300">take</span> <span m="1864510">a</span> <span m="1864570">timeout.</span> <span m="1865590">So</span> <span m="1865740">I</span> <span m="1865830">have</span> <span m="1865980">to</span> <span m="1866100">wait</span> <span m="1866340">for</span> <span m="1866550">a</span> <span m="1866580">period</span> <span m="1866880">of</span> <span m="1867000">time</span> <span m="1867330">shown</span> <span m="1867540">in</span> <span m="1867630">this</span> <span m="1867750">picture</span> <span m="1868860">given</span> <span m="1869190">by</span> <span m="1869370">the</span> <span m="1869490">RTO.</span> </p>
<p><span m="1871350">And</span> <span m="1871470">then</span> <span m="1871710">once</span> <span m="1872280">I</span> <span m="1872490">wait</span> <span m="1872850">for</span> <span m="1873060">that</span> <span m="1873320">RTO,</span> <span m="1873750">and</span> <span m="1873900">I</span> <span m="1873990">now</span> <span m="1874290">start</span> <span m="1874830">by</span> <span m="1875040">sending</span> <span m="1875400">a</span> <span m="1875460">data</span> <span m="1875670">packet,</span> <span m="1876750">the</span> <span m="1876990">expected</span> <span m="1877470">amount</span> <span m="1877710">of</span> <span m="1877830">time</span> <span m="1878100">before</span> <span m="1878400">I</span> <span m="1878490">get an</span> <span m="1878640">ACK</span> <span m="1879030">for</span> <span m="1879210">that</span> <span m="1879360">data</span> <span m="1879570">packet</span> <span m="1880320">is</span> <span m="1880500">exactly</span> <span m="1881010">equal</span> <span m="1881340">to</span> <span m="1881430">the</span> <span m="1881550">original</span> <span m="1881940">expected</span> <span m="1882330">time</span> <span m="1882630">that</span> <span m="1882750">I'm</span> <span m="1882840">trying</span> <span m="1883110">to</span> <span m="1883170">calculate,</span> <span m="1884000">right?</span> <span m="1884170">Because</span> <span m="1884610">it</span> <span m="1884700">doesn't</span> <span m="1884940">matter</span> <span m="1885210">what</span> <span m="1885360">happened</span> <span m="1885690">in</span> <span m="1885750">the</span> <span m="1885810">past.</span> <span m="1886470">Let's</span> <span m="1886650">say</span> <span m="1886740">I</span> <span m="1886800">take</span> <span m="1887010">a</span> <span m="1887070">timeout.</span> <span m="1887450">And</span> <span m="1887510">now,</span> <span m="1887700">I</span> <span m="1887790">come</span> <span m="1888000">back</span> <span m="1888270">here</span> <span m="1888510">and</span> <span m="1888600">[INAUDIBLE].</span> <span m="1890230">I'm</span> <span m="1890250">not</span> <span m="1890430">going</span> <span m="1890580">to</span> <span m="1890640">send</span> <span m="1890850">a</span> <span m="1890880">data</span> <span m="1891090">packet.</span> <span m="1891690">What's</span> <span m="1891900">the</span> <span m="1891960">expected</span> <span m="1892320">time</span> <span m="1892500">before</span> <span m="1892710">I</span> <span m="1892770">get an</span> <span m="1892890">ACK?</span> <span m="1893400">Well,</span> <span m="1893790">that's</span> <span m="1894120">exactly</span> <span m="1894660">equal</span> <span m="1895050">to</span> <span m="1895290">the</span> <span m="1895410">same</span> <span m="1895740">answer</span> <span m="1896130">that</span> <span m="1896280">we're</span> <span m="1896460">trying</span> <span m="1896700">to</span> <span m="1896790">calculate,</span> <span m="1897210">this</span> <span m="1897390">expected</span> <span m="1897810">time</span> <span m="1898080">over</span> <span m="1898260">here.</span> </p>
<p><span m="1899110">Therefore,</span> <span m="1899310">I</span> <span m="1899370">could</span> <span m="1899490">write</span> <span m="1899670">this</span> <span m="1899820">recursion</span> <span m="1900240">type</span> <span m="1900480">of</span> <span m="1900570">relationship.</span> <span m="1902640">The</span> <span m="1902850">expected</span> <span m="1903030">time</span> <span m="1903240">is</span> <span m="1903330">1</span> <span m="1903510">minus</span> <span m="1903700">L</span> <span m="1904170">the</span> <span m="1904260">RTT</span> <span m="1904680">plus</span> <span m="1905520">L</span> <span m="1905730">times</span> <span m="1906360">the</span> <span m="1906540">RTO</span> <span m="1907680">plus</span> <span m="1909720">the</span> <span m="1909840">same</span> <span m="1910140">expected</span> <span m="1910530">time</span> <span m="1910800">that</span> <span m="1910920">I'm</span> <span m="1911010">trying</span> <span m="1911220">to</span> <span m="1911310">calculate,</span> <span m="1913170">right?</span> <span m="1913740">What</span> <span m="1913860">this</span> <span m="1914080">says is</span> <span m="1914310">with</span> <span m="1914460">probably</span> <span m="1914910">1</span> <span m="1915090">minus</span> <span m="1915390">L,</span> <span m="1915570">the</span> <span m="1915660">time</span> <span m="1917070">it'll</span> <span m="1917220">take</span> <span m="1917880">for</span> <span m="1918030">me</span> <span m="1918180">to</span> <span m="1918270">get an</span> <span m="1918390">ACK</span> <span m="1918750">is</span> <span m="1918900">equal</span> <span m="1919110">to</span> <span m="1919200">the</span> <span m="1919290">RTT.</span> </p>
<p><span m="1919890">And</span> <span m="1919980">with</span> <span m="1920100">probability</span> <span m="1920640">L,</span> <span m="1921390">it's</span> <span m="1921600">equal</span> <span m="1921900">to--</span> <span m="1922380">first</span> <span m="1922680">of</span> <span m="1922800">all,</span> <span m="1922890">this</span> <span m="1923050">RTO--</span> <span m="1923520">I</span> <span m="1923610">have</span> <span m="1923820">to</span> <span m="1923910">wait</span> <span m="1924120">for</span> <span m="1924240">that</span> <span m="1924490">retransmission</span> <span m="1924960">timeout.</span> <span m="1926070">And</span> <span m="1926220">then</span> <span m="1926790">once</span> <span m="1927060">I</span> <span m="1927150">do</span> <span m="1927300">that,</span> <span m="1927600">well,</span> <span m="1927930">I</span> <span m="1927990">have</span> <span m="1928140">to</span> <span m="1928230">add</span> <span m="1928410">some</span> <span m="1928560">more</span> <span m="1928770">time.</span> <span m="1929190">And</span> <span m="1929320">that</span> <span m="1929460">time</span> <span m="1929700">that</span> <span m="1929820">I</span> <span m="1929880">have</span> <span m="1930000">to</span> <span m="1930090">add</span> <span m="1930240">is</span> <span m="1930330">exactly</span> <span m="1930780">equal</span> <span m="1931050">to</span> <span m="1931140">the</span> <span m="1931230">same</span> <span m="1931890">expected</span> <span m="1932310">time</span> <span m="1933660">from</span> <span m="1933900">the</span> <span m="1933990">left-hand</span> <span m="1934410">side</span> <span m="1934710">that</span> <span m="1934800">I'm</span> <span m="1934890">trying</span> <span m="1935100">to</span> <span m="1935190">calculate.</span> <span m="1937080">Does</span> <span m="1937170">this</span> <span m="1937240">makes</span> <span m="1937410">sense?</span> </p>
<p><span m="1939060">You</span> <span m="1939150">could</span> <span m="1939270">kind</span> <span m="1939450">of</span> <span m="1939510">do</span> <span m="1939660">this</span> <span m="1939810">in</span> <span m="1939900">a</span> <span m="1939960">more</span> <span m="1940110">tedious</span> <span m="1940500">way.</span> <span m="1940680">You</span> <span m="1940770">could</span> <span m="1940890">say,</span> <span m="1941140">well,</span> <span m="1941460">with</span> <span m="1941640">probability</span> <span m="1942180">1</span> <span m="1942390">minus</span> <span m="1942720">L,</span> <span m="1943440">my</span> <span m="1943710">time</span> <span m="1944040">is</span> <span m="1944190">RTT.</span> <span m="1945090">With</span> <span m="1945240">probability</span> <span m="1945750">L</span> <span m="1946050">times</span> <span m="1946410">1</span> <span m="1946590">minus</span> <span m="1946950">L,</span> <span m="1948090">the</span> <span m="1948180">time</span> <span m="1948500">is</span> <span m="1948600">equal</span> <span m="1948870">to</span> <span m="1949170">RTT</span> <span m="1949740">plus</span> <span m="1950130">RTO.</span> <span m="1951470">With</span> <span m="1951600">probability</span> <span m="1954310">L</span> <span m="1954480">squared</span> <span m="1955020">times</span> <span m="1955340">1</span> <span m="1955500">minus L,</span> <span m="1955840">this is,</span> <span m="1956040">like,</span> <span m="1956220">two</span> <span m="1956400">losses.</span> <span m="1957240">And</span> <span m="1957390">then</span> <span m="1957630">a</span> <span m="1957750">retransmission--</span> <span m="1958470">the</span> <span m="1958560">time</span> <span m="1958800">is</span> <span m="1958950">2</span> <span m="1959130">times</span> <span m="1959460">the</span> <span m="1959560">RTO</span> <span m="1959970">plus</span> <span m="1960510">RTT.</span> <span m="1961890">With</span> <span m="1962040">probability</span> <span m="1962400">LQ</span> <span m="1962910">times</span> <span m="1963210">1</span> <span m="1963360">minus</span> <span m="1963660">L,</span> <span m="1964050">it's</span> <span m="1964230">that. If</span> <span m="1964470">you</span> <span m="1964590">do</span> <span m="1964770">all</span> <span m="1964950">of</span> <span m="1965010">that</span> <span m="1965160">stuff,</span> <span m="1965370">you'll</span> <span m="1965490">get</span> <span m="1965610">the</span> <span m="1965700">same</span> <span m="1965910">thing.</span> <span m="1969150">But</span> <span m="1969360">this</span> <span m="1969540">is</span> <span m="1969650">the</span> <span m="1969720">more--</span> <span m="1970320">there's</span> <span m="1970470">a</span> <span m="1970680">simpler</span> <span m="1970950">way</span> <span m="1971040">to</span> <span m="1971130">do</span> <span m="1971250">it.</span> </p>
<p><span m="1971440">So</span> <span m="1971460">if</span> <span m="1971550">you</span> <span m="1971940">run</span> <span m="1972400">take</span> <span m="1972870">the</span> <span m="1972990">expected</span> <span m="1973350">time</span> <span m="1973560">over</span> <span m="1973740">to</span> <span m="1973860">one</span> <span m="1974070">side</span> <span m="1975180">and</span> <span m="1975390">solve</span> <span m="1975720">this</span> <span m="1975870">equation,</span> <span m="1976380">what</span> <span m="1976560">you'll</span> <span m="1976710">end</span> <span m="1976860">up</span> <span m="1977010">with</span> <span m="1979680">is</span> <span m="1979830">that</span> <span m="1979950">the</span> <span m="1980040">expected</span> <span m="1980400">time</span> <span m="1980610">is</span> <span m="1980730">equal</span> <span m="1980940">to</span> <span m="1981070">RTT</span> <span m="1982050">plus</span> <span m="1982930">L</span> <span m="1983220">over</span> <span m="1983520">1</span> <span m="1983760">minus</span> <span m="1984090">L</span> <span m="1984360">times</span> <span m="1984720">the</span> <span m="1984960">RTO.</span> <span m="1990390">I</span> <span m="1990450">mean,</span> <span m="1990600">as</span> <span m="1990810">the</span> <span m="1991500">packet</span> <span m="1991800">loss</span> <span m="1992090">rate</span> <span m="1992310">becomes</span> <span m="1992610">larger</span> <span m="1993000">and</span> <span m="1993090">larger and</span> <span m="1993435">larger,</span> <span m="1993780">this</span> <span m="1994000">term</span> <span m="1994290">starts</span> <span m="1994650">to</span> <span m="1994780">dominate</span> <span m="1995580">because L</span> <span m="1995990">over</span> <span m="1996170">1</span> <span m="1996290">minus</span> <span m="1996460">L</span> <span m="1996670">starts</span> <span m="1996940">to</span> <span m="1997060">be</span> <span m="1997200">bigger</span> <span m="1997500">and</span> <span m="1997590">bigger</span> <span m="1997830">and</span> <span m="1997920">bigger,</span> <span m="2000030">which</span> <span m="2000110">is</span> <span m="2000200">what</span> <span m="2000390">you</span> <span m="2000460">would</span> <span m="2000530">expect.</span> </p>
<p><span m="2001580">If</span> <span m="2001700">the</span> <span m="2001790">directional</span> <span m="2002690">packet</span> <span m="2002990">loss</span> <span m="2003260">rate</span> <span m="2003440">is</span> <span m="2003560">large,</span> <span m="2003920">you'd</span> <span m="2004040">expect</span> <span m="2004400">the</span> <span m="2004640">RTO</span> <span m="2005110">terms</span> <span m="2005450">to</span> <span m="2005540">start</span> <span m="2005810">to</span> <span m="2005900">dominate,</span> <span m="2006450">and</span> <span m="2006800">the</span> <span m="2006920">expected</span> <span m="2007310">time</span> <span m="2007670">is</span> <span m="2007910">larger</span> <span m="2008330">and</span> <span m="2008420">larger</span> <span m="2008750">and</span> <span m="2008840">larger.</span> <span m="2009500">If</span> <span m="2009650">the</span> <span m="2009740">packet</span> <span m="2010010">loss</span> <span m="2010250">rate</span> <span m="2010400">is</span> <span m="2010460">zero,</span> <span m="2011270">then</span> <span m="2012590">the</span> <span m="2012740">expected</span> <span m="2013040">time</span> <span m="2013190">is</span> <span m="2013280">exactly</span> <span m="2013610">equal</span> <span m="2013820">to</span> <span m="2013880">the</span> <span m="2013970">RTT.</span> <span m="2014330">You</span> <span m="2014420">send</span> <span m="2014570">a</span> <span m="2014630">packet.</span> <span m="2014900">You</span> <span m="2014960">get an</span> <span m="2015110">ACK.</span> <span m="2015365">And</span> <span m="2015620">with</span> <span m="2015770">an</span> <span m="2015890">RTT,</span> <span m="2016190">you</span> <span m="2016490">send</span> <span m="2016580">the</span> <span m="2016640">next</span> <span m="2016880">packet.</span> <span m="2017130">You</span> <span m="2017210">get</span> <span m="2017330">an</span> <span m="2017450">ACK.</span> <span m="2018110">And</span> <span m="2018200">of</span> <span m="2018290">course,</span> <span m="2018470">the</span> <span m="2018560">throughput's</span> <span m="2019040">equal</span> <span m="2019280">to</span> <span m="2019400">1</span> <span m="2019760">over</span> <span m="2020780">the</span> <span m="2020990">expected</span> <span m="2021440">time.</span> <span m="2022040">That's</span> <span m="2022400">the</span> <span m="2022940">reciprocal</span> <span m="2023540">of</span> <span m="2023690">the</span> <span m="2024380">expected</span> <span m="2024770">time,</span> <span m="2025440">OK?</span> </p>
<p><span m="2026390">Now,</span> <span m="2026960">what's</span> <span m="2027200">the</span> <span m="2027290">best</span> <span m="2027590">case</span> <span m="2027890">here?</span> <span m="2028130">The</span> <span m="2028190">best</span> <span m="2028400">case</span> <span m="2028640">here</span> <span m="2028820">is</span> <span m="2028910">that</span> <span m="2029030">you</span> <span m="2029120">get</span> <span m="2029270">one</span> <span m="2029450">packet</span> <span m="2029780">per</span> <span m="2029930">round-trip</span> <span m="2030350">time.</span> <span m="2031310">The</span> <span m="2031400">worst</span> <span m="2031670">case</span> <span m="2031940">is</span> <span m="2032090">arbitrarily</span> <span m="2032870">back</span> <span m="2033170">depending</span> <span m="2033500">on</span> <span m="2033590">the</span> <span m="2033650">packet</span> <span m="2033950">loss</span> <span m="2034220">rate.</span> <span m="2035750">But</span> <span m="2035900">the</span> <span m="2035960">important</span> <span m="2036230">point</span> <span m="2036440">here</span> <span m="2036560">is</span> <span m="2036680">that</span> <span m="2036830">even in</span> <span m="2037130">the</span> <span m="2037220">best</span> <span m="2037520">case,</span> <span m="2038870">you're</span> <span m="2039050">able</span> <span m="2039260">to</span> <span m="2039350">send</span> <span m="2039620">only</span> <span m="2039800">one</span> <span m="2040040">packet,</span> <span m="2040370">at</span> <span m="2040490">most,</span> <span m="2040760">one</span> <span m="2041000">packet</span> <span m="2041780">per</span> <span m="2041960">round-trip</span> <span m="2042380">time.</span> <span m="2044460">The</span> <span m="2044550">question</span> <span m="2044970">is,</span> <span m="2045570">how</span> <span m="2045750">good</span> <span m="2046020">or</span> <span m="2046110">bad</span> <span m="2046500">is</span> <span m="2046740">one</span> <span m="2046980">packet</span> <span m="2047340">per</span> <span m="2047520">round-trip</span> <span m="2047930">time?</span> </p>
<p><span m="2050150">Is</span> <span m="2050300">this</span> <span m="2050449">clear,</span> <span m="2050870">this</span> <span m="2051130">intuition</span> <span m="2051530">behind</span> <span m="2051800">why</span> <span m="2052040">this</span> <span m="2052190">is</span> <span m="2052310">one</span> <span m="2052489">packet</span> <span m="2052790">per</span> <span m="2052969">round-trip time</span> <span m="2053389">in</span> <span m="2053440">the</span> <span m="2053510">best</span> <span m="2053780">case?</span> <span m="2054440">That</span> <span m="2054889">should</span> <span m="2055040">be</span> <span m="2055159">pretty</span> <span m="2055370">obvious,</span> <span m="2055730">right?</span> <span m="2055969">I</span> <span m="2056030">send</span> <span m="2056239">a</span> <span m="2056320">packet.</span> <span m="2056570">I</span> <span m="2056659">get</span> <span m="2056780">an</span> <span m="2056870">ACK.</span> <span m="2057139">Send</span> <span m="2057230">a</span> <span m="2057290">packet.</span> <span m="2057530">I</span> <span m="2057590">get</span> <span m="2057710">an</span> <span m="2057820">ACK.</span> <span m="2058280">This</span> <span m="2058460">calculation</span> <span m="2058969">just</span> <span m="2059150">shows</span> <span m="2059449">a</span> <span m="2059510">little</span> <span m="2059659">bit</span> <span m="2059810">more</span> <span m="2060080">detail</span> <span m="2060980">about</span> <span m="2061340">what</span> <span m="2061520">happens</span> <span m="2061850">when</span> <span m="2061940">the</span> <span m="2062000">packet</span> <span m="2062300">loss</span> <span m="2062510">rate's</span> <span m="2064130">non-zero.</span> <span m="2064590">So</span> <span m="2064730">if</span> <span m="2064810">the</span> <span m="2064880">packet</span> <span m="2065120">loss</span> <span m="2065290">rate</span> <span m="2065409">is,</span> <span m="2065510">say,</span> <span m="2065630">20%,</span> <span m="2066860">you</span> <span m="2067040">take</span> <span m="2067530">1/5</span> <span m="2068020">over</span> <span m="2068310">4/5.</span> <span m="2069050">So</span> <span m="2069830">it's</span> <span m="2070250">RTT</span> <span m="2070670">plus</span> <span m="2071630">1/4</span> <span m="2072350">of</span> <span m="2072500">the</span> <span m="2072620">retransmission</span> <span m="2073219">timeout.</span> <span m="2073949">That's</span> <span m="2074540">what</span> <span m="2074659">it</span> <span m="2074719">says</span> <span m="2074920">the</span> <span m="2075010">expected</span> <span m="2075300">time</span> <span m="2075480">is.</span> <span m="2075719">And</span> <span m="2075800">1</span> <span m="2076010">over</span> <span m="2076190">that</span> <span m="2076370">is</span> <span m="2076540">throughput.</span> </p>
<p><span m="2079230">Now,</span> <span m="2079510">how</span> <span m="2079620">bad</span> <span m="2079920">or</span> <span m="2080010">good--</span> <span m="2080489">is</span> <span m="2080639">it</span> <span m="2080750">clear? Any</span> <span m="2081090">questions?</span> <span m="2085020">OK,</span> <span m="2085440">so</span> <span m="2085560">now,</span> <span m="2085710">how</span> <span m="2085860">good</span> <span m="2086040">or</span> <span m="2086100">bad</span> <span m="2086370">is</span> <span m="2086489">this</span> <span m="2088380">1</span> <span m="2088710">over</span> <span m="2088980">the</span> <span m="2089070">round</span> <span m="2089190">trip</span> <span m="2089440">time?</span> <span m="2089770">So</span> <span m="2089820">let's</span> <span m="2090000">say</span> <span m="2090270">that</span> <span m="2090989">you</span> <span m="2091139">have</span> <span m="2093615">a</span> <span m="2094020">network</span> <span m="2094350">between</span> <span m="2095280">Boston</span> <span m="2096669">to--</span> <span m="2097020">I</span> <span m="2097360">don't</span> <span m="2097470">know--</span> <span m="2097680">San</span> <span m="2097890">Francisco.</span> <span m="2099870">And</span> <span m="2100020">if</span> <span m="2100110">you</span> <span m="2100290">do</span> <span m="2100530">these</span> <span m="2100870">pings</span> <span m="2101580">or</span> <span m="2101640">whatever,</span> <span m="2101940">let's--</span> <span m="2102620">I mean,</span> <span m="2102720">I</span> <span m="2102780">don't</span> <span m="2102930">know</span> <span m="2103020">the</span> <span m="2103110">real</span> <span m="2103290">numbers,</span> <span m="2103620">but</span> <span m="2103740">let's</span> <span m="2103950">say</span> <span m="2104040">it's</span> <span m="2104160">80</span> <span m="2104340">milliseconds.</span> <span m="2105810">Just</span> <span m="2106080">for</span> <span m="2106230">the</span> <span m="2106320">calculation</span> <span m="2106830">to</span> <span m="2106920">be</span> <span m="2107010">easier,</span> <span m="2107470">let's</span> <span m="2107550">assume</span> <span m="2107790">it's</span> <span m="2107880">100</span> <span m="2108180">milliseconds.</span> </p>
<p><span m="2109500">And</span> <span m="2109890">let's</span> <span m="2110040">say</span> <span m="2110190">that</span> <span m="2110310">a</span> <span m="2110370">packet</span> <span m="2114040">on</span> <span m="2114150">the</span> <span m="2114240">internet</span> <span m="2114660">it's</span> <span m="2114780">about</span> <span m="2115020">10,000</span> <span m="2115500">bits.</span> <span m="2117220">So</span> <span m="2117270">let's</span> <span m="2117450">make</span> <span m="2117630">it</span> <span m="2117690">bytes.</span> <span m="2118080">Let's</span> <span m="2118260">say</span> <span m="2118440">that</span> <span m="2118590">it's</span> <span m="2118740">1,000,</span> <span m="2120210">say,</span> <span m="2121650">1,500</span> <span m="2122220">bytes.</span> <span m="2126430">So</span> <span m="2126450">what</span> <span m="2126610">this</span> <span m="2126720">says</span> <span m="2126990">is</span> <span m="2127110">that</span> <span m="2127320">the</span> <span m="2127410">throughput</span> <span m="2127740">that</span> <span m="2127890">I</span> <span m="2127950">would</span> <span m="2128070">get</span> <span m="2128310">with</span> <span m="2128460">the</span> <span m="2128520">stop-and-wait</span> <span m="2129090">protocol</span> <span m="2129510">if</span> <span m="2129630">I</span> <span m="2129690">ran</span> <span m="2129930">it</span> <span m="2130020">on</span> <span m="2130140">this</span> <span m="2130290">internet</span> <span m="2130620">path</span> <span m="2130890">would</span> <span m="2131040">be</span> <span m="2131460">1,500</span> <span m="2132060">bytes</span> <span m="2135180">divided</span> <span m="2135570">by</span> <span m="2135690">100</span> <span m="2136020">milliseconds.</span> <span m="2136990">So</span> <span m="2137040">that's</span> <span m="2137250">15,000</span> <span m="2137880">bytes</span> <span m="2138150">per</span> <span m="2138300">second,</span> <span m="2139720">15</span> <span m="2140190">kilobytes</span> <span m="2140640">a</span> <span m="2140700">second,</span> <span m="2145080">which</span> <span m="2145260">might</span> <span m="2145410">have</span> <span m="2145500">been</span> <span m="2145620">really,</span> <span m="2145960">really</span> <span m="2146100">good</span> <span m="2146370">in</span> <span m="2146460">1985,</span> <span m="2147240">but</span> <span m="2147870">no</span> <span m="2148020">one's</span> <span m="2148200">going</span> <span m="2148290">to</span> <span m="2148380">be</span> <span m="2148470">happy</span> <span m="2148710">with</span> <span m="2148830">this</span> <span m="2148980">today.</span> </p>
<p><span m="2152150">I</span> <span m="2152180">mean,</span> <span m="2152300">you</span> <span m="2152420">might</span> <span m="2152600">have</span> <span m="2152870">a</span> <span m="2152930">link</span> <span m="2153260">that's</span> <span m="2153470">a</span> <span m="2153680">megabyte</span> <span m="2154190">a</span> <span m="2154220">second</span> <span m="2154580">or</span> <span m="2154640">a</span> <span m="2154700">gigabyte</span> <span m="2155120">a</span> <span m="2155180">second</span> <span m="2155660">or</span> <span m="2155930">10--</span> <span m="2156290">you</span> <span m="2156440">know,</span> <span m="2156590">bigger</span> <span m="2156860">than</span> <span m="2156980">that.</span> <span m="2157610">But</span> <span m="2158210">no</span> <span m="2158390">matter</span> <span m="2158660">how</span> <span m="2159110">fast</span> <span m="2160280">the</span> <span m="2160490">network</span> <span m="2160790">links</span> <span m="2161120">are,</span> <span m="2161570">this</span> <span m="2161780">protocol</span> <span m="2162230">is</span> <span m="2162350">completely</span> <span m="2162770">dominated</span> <span m="2163250">by</span> <span m="2163520">the</span> <span m="2163640">delay</span> <span m="2163970">or</span> <span m="2164090">the</span> <span m="2164180">latency,</span> <span m="2164690">the</span> <span m="2164810">round-trip</span> <span m="2165140">latency,</span> <span m="2166010">between</span> <span m="2166400">the</span> <span m="2166490">sender</span> <span m="2166820">and</span> <span m="2166910">the</span> <span m="2166970">receiver.</span> <span m="2167690">And</span> <span m="2167810">you</span> <span m="2167900">end</span> <span m="2168020">up</span> <span m="2168170">with</span> <span m="2168320">a</span> <span m="2168380">throughput</span> <span m="2168770">that's</span> <span m="2169640">pegged</span> <span m="2170360">to</span> <span m="2170540">a</span> <span m="2170600">small</span> <span m="2170960">value.</span> <span m="2171880">And</span> <span m="2172010">so,</span> <span m="2172130">people</span> <span m="2172370">don't</span> <span m="2172520">like</span> <span m="2172730">that.</span> </p>
<p><span m="2174470">So</span> <span m="2174570">question is,</span> <span m="2175040">how</span> <span m="2175060">can</span> <span m="2175180">you</span> <span m="2175270">do</span> <span m="2175360">better?</span> <span m="2175900">What</span> <span m="2176050">can</span> <span m="2176290">you</span> <span m="2176380">do</span> <span m="2176530">now</span> <span m="2177100">to</span> <span m="2177250">this</span> <span m="2177430">protocol?</span> <span m="2178090">Or</span> <span m="2178270">come</span> <span m="2178450">up</span> <span m="2178540">with</span> <span m="2178680">a</span> <span m="2178720">new</span> <span m="2178930">method,</span> <span m="2179410">a</span> <span m="2179440">new</span> <span m="2179620">protocol</span> <span m="2180820">that</span> <span m="2181120">would</span> <span m="2181360">improve</span> <span m="2182320">the</span> <span m="2182410">throughput</span> <span m="2182770">of</span> <span m="2182890">this</span> <span m="2183820">system.</span> <span m="2185610">Because</span> <span m="2185790">if</span> <span m="2185850">people</span> <span m="2186090">pay</span> <span m="2186210">money</span> <span m="2186450">for</span> <span m="2186630">network</span> <span m="2187500">links,</span> <span m="2187860">they'd</span> <span m="2188040">like</span> <span m="2188220">to</span> <span m="2188280">actually</span> <span m="2188550">get</span> <span m="2188730">higher</span> <span m="2188940">performance</span> <span m="2189420">from</span> <span m="2189590">it.</span> <span m="2190840">So</span> <span m="2190860">what</span> <span m="2191010">could</span> <span m="2191160">you</span> <span m="2191220">do?</span> </p>
<p><span m="2195256">AUDIENCE:</span> <span m="2195497">Larger</span> <span m="2195738">packets?</span> </p>
<p><span m="2196710">HARI BALAKRISHNAN:</span> <span m="2196820">What?</span> </p>
<p><span m="2197347">AUDIENCE:</span> <span m="2197555">Larger</span> <span m="2197764">packets?</span> </p>
<p><span m="2198600">HARI BALAKRISHNAN:</span> <span m="2198780">Larger</span> <span m="2198960">packets.</span> <span m="2199440">Well,</span> <span m="2199920">yeah,</span> <span m="2200370">larger</span> <span m="2200700">packets</span> <span m="2201180">is--</span> <span m="2203780">yeah,</span> <span m="2203880">why</span> <span m="2204030">don't</span> <span m="2204240">we</span> <span m="2204330">make</span> <span m="2204540">our</span> <span m="2204630">packets</span> <span m="2205020">as</span> <span m="2205140">big</span> <span m="2205380">as</span> <span m="2205500">the</span> <span m="2205590">five</span> <span m="2205890">we</span> <span m="2206010">want</span> <span m="2206160">to</span> <span m="2206220">send?</span> <span m="2208210">Actually,</span> <span m="2208490">I</span> <span m="2208650">digress.</span> <span m="2209160">Why</span> <span m="2209400">don't</span> <span m="2209580">we</span> <span m="2209670">make</span> <span m="2209850">packets</span> <span m="2210210">really</span> <span m="2210450">big?</span> <span m="2210660">Like,</span> <span m="2210870">I</span> <span m="2211000">got</span> <span m="2211140">a</span> <span m="2211200">megabyte</span> <span m="2211620">file</span> <span m="2211980">or</span> <span m="2212070">a</span> <span m="2212130">gigabyte</span> <span m="2212520">file</span> <span m="2212790">to</span> <span m="2212880">send.</span> <span m="2213480">Why</span> <span m="2213660">do</span> <span m="2213780">I</span> <span m="2213840">have</span> <span m="2213990">to</span> <span m="2214080">break</span> <span m="2214290">it</span> <span m="2214380">up</span> <span m="2214500">into</span> <span m="2214620">smaller</span> <span m="2214950">packets?</span> </p>
<p><span m="2219436">AUDIENCE:</span> <span m="2219684">Larger</span> <span m="2219933">packets use</span> <span m="2220430">more bandwidth?</span> </p>
<p><span m="2221930">HARI BALAKRISHNAN:</span> <span m="2222050">Well,</span> <span m="2222470">to</span> <span m="2222590">send</span> <span m="2222800">the</span> <span m="2222890">data,</span> <span m="2223160">no</span> <span m="2223280">matter</span> <span m="2223460">if</span> <span m="2223530">we</span> <span m="2223610">break</span> <span m="2223850">it</span> <span m="2223910">up</span> <span m="2224030">small</span> <span m="2224300">or</span> <span m="2224390">big,</span> <span m="2224870">you're</span> <span m="2225020">going</span> <span m="2225130">to</span> <span m="2225200">use</span> <span m="2225320">the</span> <span m="2225380">same</span> <span m="2225590">bandwidth.</span> <span m="2227411">I mean,</span> <span m="2227880">that's</span> <span m="2227930">a</span> <span m="2227990">good</span> <span m="2228140">question.</span> <span m="2228740">Yeah,</span> <span m="2229160">you have</span> <span m="2229360">an answer?</span> </p>
<p><span m="2229700">AUDIENCE:</span> <span m="2229927">[INAUDIBLE]</span> <span m="2231520">how to</span> <span m="2231975">[INAUDIBLE]</span> <span m="2232430">over</span> <span m="2232885">time.</span> </p>
<p><span m="2233800">HARI BALAKRISHNAN:</span> <span m="2233905">That's</span> <span m="2234010">kind</span> <span m="2234220">of</span> <span m="2234280">true.</span> <span m="2234580">You know,</span> <span m="2236320">if</span> <span m="2236470">a</span> <span m="2236530">packet</span> <span m="2236980">is,</span> <span m="2237250">you</span> <span m="2237340">know,</span> <span m="2237460">let's</span> <span m="2237640">say</span> <span m="2237710">a</span> <span m="2237760">gigabyte</span> <span m="2238210">file</span> <span m="2238540">you</span> <span m="2238630">want</span> <span m="2238780">to</span> <span m="2238840">transmit.</span> <span m="2239170">And</span> <span m="2239230">you</span> <span m="2239320">send</span> <span m="2239530">that</span> <span m="2239710">in</span> <span m="2239800">one</span> <span m="2240010">atomic</span> <span m="2240370">unit,</span> <span m="2240670">and</span> <span m="2240820">goes</span> <span m="2241090">through</span> <span m="2241270">four</span> <span m="2241540">hops</span> <span m="2241840">in</span> <span m="2241930">the</span> <span m="2241990">network,</span> <span m="2242320">and</span> <span m="2242410">then</span> <span m="2242530">it</span> <span m="2242590">gets</span> <span m="2242830">dropped</span> <span m="2243160">on</span> <span m="2243250">the first</span> <span m="2243520">hop,</span> <span m="2244210">you</span> <span m="2244330">end</span> <span m="2244420">up</span> <span m="2244510">having</span> <span m="2244750">to</span> <span m="2244810">send</span> <span m="2245050">an</span> <span m="2245140">entire</span> <span m="2245440">gigabyte</span> <span m="2245890">again</span> <span m="2246160">over</span> <span m="2246400">all</span> <span m="2246580">those</span> <span m="2246760">other</span> <span m="2246970">hops.</span> <span m="2247630">That's</span> <span m="2247840">actually</span> <span m="2248350">not</span> <span m="2248560">good.</span> </p>
<p><span m="2249160">But</span> <span m="2249280">in</span> <span m="2249400">fact,</span> <span m="2249970">really</span> <span m="2250270">large</span> <span m="2250540">packets</span> <span m="2250930">are</span> <span m="2250960">probably</span> <span m="2251230">a</span> <span m="2251290">bad</span> <span m="2251590">idea</span> <span m="2252190">even</span> <span m="2252520">for</span> <span m="2253240">networks</span> <span m="2253600">which</span> <span m="2253780">don't</span> <span m="2253960">drop</span> <span m="2254200">any</span> <span m="2254350">packets.</span> <span m="2255810">I mean,</span> <span m="2256270">think</span> <span m="2256450">of</span> <span m="2256540">the</span> <span m="2256600">case</span> <span m="2256810">when</span> <span m="2256930">I</span> <span m="2257080">have</span> <span m="2257230">a</span> <span m="2257290">gigabyte</span> <span m="2257650">file</span> <span m="2257830">to</span> <span m="2257920">send,</span> <span m="2258100">and</span> <span m="2258190">you</span> <span m="2258370">have</span> <span m="2258520">a</span> <span m="2258580">gigabyte</span> <span m="2258940">file</span> <span m="2259120">to send.</span> <span m="2260440">The</span> <span m="2260530">problem</span> <span m="2261630">if</span> <span m="2261730">you</span> <span m="2261790">make</span> <span m="2261940">these</span> <span m="2262090">packets</span> <span m="2262390">really</span> <span m="2262600">big</span> <span m="2262870">is</span> <span m="2263020">that</span> <span m="2263410">one</span> <span m="2263650">of</span> <span m="2263800">us</span> <span m="2264010">is--</span> <span m="2264300">on</span> <span m="2264790">a</span> <span m="2264850">shared</span> <span m="2265180">link,</span> <span m="2265450">only</span> <span m="2265660">one</span> <span m="2265840">of</span> <span m="2265960">us</span> <span m="2266080">can</span> <span m="2266230">send</span> <span m="2266440">that</span> <span m="2266560">packet,</span> <span m="2266900">which</span> <span m="2267040">means</span> <span m="2267220">the</span> <span m="2267310">other</span> <span m="2267950">guy</span> <span m="2268140">is</span> <span m="2268250">going</span> <span m="2268310">to</span> <span m="2268420">be</span> <span m="2268510">waiting a</span> <span m="2268870">really,</span> <span m="2269330">really</span> <span m="2269470">long</span> <span m="2269710">time</span> <span m="2269980">for</span> <span m="2270190">him</span> <span m="2270340">to</span> <span m="2270430">send</span> <span m="2270760">that</span> <span m="2271030">packet.</span> </p>
<p><span m="2271970">So</span> <span m="2272140">the</span> <span m="2272230">reason</span> <span m="2272500">why,</span> <span m="2272980">in</span> <span m="2273100">the</span> <span m="2273220">end,</span> <span m="2273400">packets</span> <span m="2273850">are</span> <span m="2274000">modest</span> <span m="2274360">size</span> <span m="2275500">has</span> <span m="2275770">to</span> <span m="2275860">do</span> <span m="2275980">with</span> <span m="2276610">our</span> <span m="2276850">wanting</span> <span m="2277300">to</span> <span m="2277510">share</span> <span m="2277930">the</span> <span m="2278020">network</span> <span m="2278350">evenly</span> <span m="2278740">over</span> <span m="2278920">smaller</span> <span m="2279280">time</span> <span m="2279560">scales.</span> <span m="2280500">It's</span> <span m="2280660">because</span> <span m="2280900">we</span> <span m="2281020">want</span> <span m="2281200">to</span> <span m="2281260">give</span> <span m="2281380">fairness</span> <span m="2282250">across</span> <span m="2282580">smaller</span> <span m="2282970">time</span> <span m="2283260">scales,</span> <span m="2283840">allowing</span> <span m="2284290">everybody</span> <span m="2285040">who's</span> <span m="2285250">competing</span> <span m="2285730">access</span> <span m="2286060">to</span> <span m="2286150">the</span> <span m="2286240">network.</span> <span m="2286640">So</span> <span m="2286900">even</span> <span m="2287140">if</span> <span m="2287200">we</span> <span m="2287290">have</span> <span m="2287500">big</span> <span m="2287710">amounts</span> <span m="2288010">of</span> <span m="2288100">data</span> <span m="2288280">to</span> <span m="2288370">send,</span> <span m="2288580">we</span> <span m="2288700">prefer</span> <span m="2288970">to</span> <span m="2289060">break</span> <span m="2289300">them</span> <span m="2289480">up</span> <span m="2289600">into</span> <span m="2289750">smaller</span> <span m="2290110">chunks</span> <span m="2291280">among</span> <span m="2291520">other</span> <span m="2291730">reasons,</span> <span m="2292490">one</span> <span m="2292630">reason</span> <span m="2292960">being</span> <span m="2293860">we</span> <span m="2293980">don't</span> <span m="2294130">want</span> <span m="2294250">to</span> <span m="2294310">start</span> <span m="2294730">other</span> <span m="2296050">connections</span> <span m="2298020">and</span> <span m="2298240">prevent</span> <span m="2298630">them</span> <span m="2298810">from</span> <span m="2299020">gaining</span> <span m="2299320">access</span> <span m="2299620">to</span> <span m="2299740">the</span> <span m="2299830">network</span> <span m="2300430">because</span> <span m="2300700">there's</span> <span m="2300820">some</span> <span m="2301210">huge</span> <span m="2301900">transfer</span> <span m="2302380">sitting</span> <span m="2302650">in</span> <span m="2302740">front.</span> <span m="2304140">So</span> <span m="2304320">that's</span> <span m="2305700">part</span> <span m="2305880">of</span> <span m="2305970">the</span> <span m="2306030">reason.</span> </p>
<p><span m="2307380">So</span> <span m="2307560">anyway,</span> <span m="2307950">so</span> <span m="2308130">bigger</span> <span m="2308320">packets</span> <span m="2308610">doesn't</span> <span m="2308850">quite</span> <span m="2309090">cut</span> <span m="2309270">it.</span> <span m="2309850">So</span> <span m="2309930">what</span> <span m="2310050">else</span> <span m="2310200">could</span> <span m="2310320">you</span> <span m="2310380">do?</span> <span m="2310860">Yes?</span> </p>
<p><span m="2311614">AUDIENCE:</span> <span m="2311856">[INAUDIBLE]</span> <span m="2313550">to</span> <span m="2314034">send.</span> <span m="2315002">So</span> <span m="2315486">if</span> <span m="2315970">you</span> <span m="2317422">cannot</span> <span m="2318390">[INAUDIBLE].</span> </p>
<p><span m="2323730">HARI BALAKRISHNAN:</span> <span m="2323810">OK,</span> <span m="2324230">you</span> <span m="2324360">know,</span> <span m="2324590">well,</span> <span m="2324770">I'll</span> <span m="2324920">come</span> <span m="2325070">back</span> <span m="2325220">to</span> <span m="2325310">this</span> <span m="2325580">on</span> <span m="2325910">Monday.</span> <span m="2326600">That's</span> <span m="2326780">actually</span> <span m="2327020">a</span> <span m="2327050">really</span> <span m="2327500">good</span> <span m="2327710">idea.</span> <span m="2328490">But</span> <span m="2328670">when</span> <span m="2328820">would</span> <span m="2328970">you</span> <span m="2329030">stop</span> <span m="2329480">for</span> <span m="2329840">8, 16, 32?</span> <span m="2330760">I</span> <span m="2330800">mean,</span> <span m="2330980">at</span> <span m="2331100">some</span> <span m="2331280">point,</span> <span m="2331650">this</span> <span m="2331670">is</span> <span m="2331790">like--</span> </p>
<p><span m="2332150">AUDIENCE:</span> <span m="2332396">[INAUDIBLE]</span> <span m="2332642">at some point,</span> <span m="2333134">it's going to</span> <span m="2333626">tail.</span> </p>
<p><span m="2334610">HARI BALAKRISHNAN:</span> <span m="2334745">Because</span> <span m="2334880">packets</span> <span m="2335180">are</span> <span m="2335210">lost.</span> </p>
<p><span m="2335630">AUDIENCE:</span> <span m="2335875">Yeah,</span> <span m="2336120">so you go</span> <span m="2336610">back.</span> </p>
<p><span m="2337100">HARI BALAKRISHNAN:</span> <span m="2337280">OK,</span> <span m="2337460">this</span> <span m="2337610">is</span> <span m="2337730">a</span> <span m="2337790">really</span> <span m="2338030">good</span> <span m="2338210">idea.</span> <span m="2338780">We're</span> <span m="2338900">not</span> <span m="2339080">actually</span> <span m="2339350">going</span> <span m="2339470">to</span> <span m="2339530">teach</span> <span m="2339770">that</span> <span m="2340070">here</span> <span m="2341150">in</span> <span m="2341270">this</span> <span m="2341420">course.</span> <span m="2342260">This</span> <span m="2342470">is</span> <span m="2342590">actually</span> <span m="2342920">what</span> <span m="2343130">TCP</span> <span m="2343550">does</span> <span m="2343790">in</span> <span m="2343880">the</span> <span m="2343940">beginning</span> <span m="2344240">of</span> <span m="2344330">the</span> <span m="2344390">connection.</span> <span m="2345710">But</span> <span m="2345920">before</span> <span m="2346250">we--</span> <span m="2349526">what</span> <span m="2350000">else</span> <span m="2350150">could</span> <span m="2350330">you</span> <span m="2350390">do?</span> <span m="2350850">That's</span> <span m="2350930">a</span> <span m="2350960">good</span> <span m="2351110">idea.</span> <span m="2352210">Yeah.</span> </p>
<p><span m="2353362">AUDIENCE:</span> <span m="2353605">You</span> <span m="2353848">could send</span> <span m="2354334">a fixed</span> <span m="2354820">number.</span> </p>
<p><span m="2355310">HARI BALAKRISHNAN:</span> <span m="2355520">Yeah,</span> <span m="2355730">you</span> <span m="2355850">could</span> <span m="2355970">do</span> <span m="2356080">a</span> <span m="2356240">fixed</span> <span m="2356510">number.</span> <span m="2356810">You</span> <span m="2356900">know,</span> <span m="2357020">somebody</span> <span m="2357350">could</span> <span m="2357500">pick--</span> <span m="2357710">I</span> <span m="2357950">actually</span> <span m="2358250">kind</span> <span m="2358460">of--</span> <span m="2359660">it</span> <span m="2359810">is</span> <span m="2360020">a</span> <span m="2360050">really</span> <span m="2360590">good</span> <span m="2360770">idea</span> <span m="2361010">to</span> <span m="2361100">do</span> <span m="2361220">1,</span> <span m="2361650">2,</span> <span m="2361890">4,</span> <span m="2362340">8.</span> <span m="2362960">And</span> <span m="2363080">then</span> <span m="2363530">if</span> <span m="2363650">it</span> <span m="2363740">fails,</span> <span m="2364040">you</span> <span m="2364130">come</span> <span m="2364280">back</span> <span m="2364460">down</span> <span m="2364760">to,</span> <span m="2364910">say,</span> <span m="2365300">1</span> <span m="2365750">or</span> <span m="2365990">1/2</span> <span m="2366590">of</span> <span m="2366770">whatever</span> <span m="2367130">worked</span> <span m="2367360">the</span> <span m="2367460">last</span> <span m="2367700">time</span> <span m="2368030">and</span> <span m="2368120">then</span> <span m="2368270">continue</span> <span m="2368630">from</span> <span m="2368810">that.</span> <span m="2369690">That</span> <span m="2370130">particular</span> <span m="2370580">thing</span> <span m="2370940">has</span> <span m="2371150">a</span> <span m="2371210">name</span> <span m="2371450">to</span> <span m="2371600">it.</span> <span m="2371690">That</span> <span m="2371810">protocol</span> <span m="2372130">is</span> <span m="2372230">called</span> <span m="2372410">slow</span> <span m="2372620">start.</span> <span m="2373460">It's</span> <span m="2373790">ironic</span> <span m="2374210">because</span> <span m="2374480">it's</span> <span m="2374630">really</span> <span m="2374870">fast.</span> <span m="2375400">It's</span> <span m="2375530">exponential,</span> <span m="2376340">right--</span> <span m="2376550">1,</span> <span m="2376920">2,</span> <span m="2377100">4,</span> <span m="2377340">8.</span> <span m="2377490">But</span> <span m="2377630">yet,</span> <span m="2377780">it's</span> <span m="2377930">called</span> <span m="2378080">slow</span> <span m="2378320">start.</span> <span m="2380690">I'll</span> <span m="2380930">probably</span> <span m="2381290">tell</span> <span m="2381440">you</span> <span m="2381530">more</span> <span m="2381740">about</span> <span m="2381980">it</span> <span m="2382220">on</span> <span m="2382370">Wednesday.</span> </p>
<p><span m="2383870">But</span> <span m="2384110">we'll</span> <span m="2385010">ease</span> <span m="2385280">into</span> <span m="2385430">that</span> <span m="2385610">solution.</span> <span m="2386270">We'll</span> <span m="2386660">do</span> <span m="2386810">something</span> <span m="2387170">simpler.</span> <span m="2387980">We'll</span> <span m="2388190">use</span> <span m="2388310">something</span> <span m="2388640">called</span> <span m="2388880">a</span> <span m="2388940">sliding</span> <span m="2389300">window</span> <span m="2389510">protocol</span> <span m="2390230">with</span> <span m="2390380">a</span> <span m="2390410">fixed-size</span> <span m="2390860">window.</span> <span m="2391160">You</span> <span m="2391280">just</span> <span m="2391610">make</span> <span m="2391850">that</span> <span m="2392000">1</span> <span m="2392300">be</span> <span m="2392570">7</span> <span m="2393440">or</span> <span m="2393560">4</span> <span m="2394040">or</span> <span m="2394160">6</span> <span m="2394520">or</span> <span m="2394640">8.</span> <span m="2395150">I'll</span> <span m="2395270">tell</span> <span m="2395450">you</span> <span m="2395600">later</span> <span m="2396260">next</span> <span m="2396530">time</span> <span m="2397070">how</span> <span m="2397280">you</span> <span m="2397460">pick</span> <span m="2398030">that</span> <span m="2398240">value,</span> <span m="2399010">OK?</span> <span m="2399560">And</span> <span m="2399710">one</span> <span m="2399920">way</span> <span m="2400040">to</span> <span m="2400130">pick</span> <span m="2400310">that</span> <span m="2400400">value</span> <span m="2400700">is</span> <span m="2400790">to</span> <span m="2400910">do it</span> <span m="2401060">dynamically</span> <span m="2401690">like</span> <span m="2402200">the</span> <span m="2402320">gentleman</span> <span m="2402680">in the front</span> <span m="2402920">said.</span> <span m="2403750">It's</span> <span m="2404390">more</span> <span m="2404540">complicated.</span> <span m="2405540">But</span> <span m="2406040">let's</span> <span m="2406310">just</span> <span m="2406580">pick</span> <span m="2406940">a</span> <span m="2407000">fixed-size</span> <span m="2407480">value.</span> </p>
<p><span m="2408210">So</span> <span m="2408260">the</span> <span m="2408350">idea</span> <span m="2408620">is</span> <span m="2408740">actually</span> <span m="2409040">very,</span> <span m="2409380">very</span> <span m="2409460">simple.</span> <span m="2410155">Now</span> <span m="2410430">that</span> <span m="2410600">I</span> <span m="2410750">have</span> <span m="2410960">one</span> <span m="2411200">packet</span> <span m="2411500">outstanding.</span> <span m="2411970">We use</span> <span m="2412190">this</span> <span m="2412310">idea</span> <span m="2412820">in</span> <span m="2413180">computer</span> <span m="2413480">science.</span> <span m="2413780">We</span> <span m="2413870">use</span> <span m="2414020">this</span> <span m="2414170">over</span> <span m="2414350">and</span> <span m="2414440">over</span> <span m="2414620">again--</span> <span m="2415190">pipelining.</span> <span m="2416270">So</span> <span m="2416450">you</span> <span m="2416540">just</span> <span m="2416690">send</span> <span m="2416870">multiple</span> <span m="2417950">of</span> <span m="2418070">them</span> <span m="2418310">and</span> <span m="2418400">have</span> <span m="2418670">multiple</span> <span m="2419090">outstanding</span> <span m="2420140">packets.</span> <span m="2420560">By</span> <span m="2420740">"outstanding,"</span> <span m="2421310">I</span> <span m="2421400">mean</span> <span m="2421580">a</span> <span m="2421640">packet</span> <span m="2422630">that</span> <span m="2422750">hasn't</span> <span m="2423080">yet</span> <span m="2423230">been</span> <span m="2423380">acknowledged.</span> <span m="2424210">A</span> <span m="2424250">data</span> <span m="2424490">packet</span> <span m="2424820">that</span> <span m="2424910">hasn't</span> <span m="2425180">yet</span> <span m="2425330">been</span> <span m="2425480">acknowledged</span> <span m="2425960">is</span> <span m="2426440">called</span> <span m="2426680">an</span> <span m="2426770">outstanding</span> <span m="2427340">data</span> <span m="2427550">packet.</span> <span m="2428300">And</span> <span m="2428690">you</span> <span m="2428840">have</span> <span m="2429020">multiple</span> <span m="2429410">of</span> <span m="2429500">these</span> <span m="2429650">outstanding.</span> </p>
<p><span m="2430550">And</span> <span m="2430790">every</span> <span m="2431000">time</span> <span m="2431270">you</span> <span m="2431360">get</span> <span m="2431480">an</span> <span m="2431600">acknowledgment,</span> <span m="2432950">you</span> <span m="2433160">send</span> <span m="2433520">one</span> <span m="2433820">more</span> <span m="2434030">packet.</span> <span m="2435450">So</span> <span m="2435530">that's</span> <span m="2435680">shown</span> <span m="2435950">in</span> <span m="2436010">this</span> <span m="2436190">timeline</span> <span m="2436580">here,</span> <span m="2436860">right?</span> <span m="2437300">So</span> <span m="2437540">you</span> <span m="2437720">start</span> <span m="2438050">here.</span> <span m="2438590">You</span> <span m="2438650">send</span> <span m="2438860">a</span> <span m="2438920">packet.</span> <span m="2444130">I</span> <span m="2444190">don't</span> <span m="2444310">know</span> <span m="2444400">why</span> <span m="2444580">this</span> <span m="2444760">isn't</span> <span m="2445000">working.</span> <span m="2445750">Ah, there we</span> <span m="2446140">go.</span> <span m="2446920">You</span> <span m="2447010">send</span> <span m="2447220">a</span> <span m="2447280">packet.</span> <span m="2447880">You</span> <span m="2447970">get</span> <span m="2448090">an</span> <span m="2448180">acknowledgment.</span> <span m="2448690">When</span> <span m="2448810">you</span> <span m="2448870">get</span> <span m="2448990">an</span> <span m="2449080">acknowledgment,</span> <span m="2449530">you</span> <span m="2449620">send</span> <span m="2449830">another</span> <span m="2450070">packet.</span> <span m="2451180">Get</span> <span m="2451460">an</span> <span m="2451570">acknowledgment.</span> <span m="2452020">You</span> <span m="2452090">send</span> <span m="2452290">another</span> <span m="2452530">packet.</span> </p>
<p><span m="2452860">But</span> <span m="2452980">in</span> <span m="2453070">the</span> <span m="2453130">meantime,</span> <span m="2453560">there</span> <span m="2453580">are</span> <span m="2453670">these</span> <span m="2453820">other</span> <span m="2454300">acknowledgments</span> <span m="2454870">coming</span> <span m="2455170">in.</span> <span m="2455770">And</span> <span m="2455890">the</span> <span m="2455950">rule</span> <span m="2456130">is</span> <span m="2456280">very</span> <span m="2456490">simple--</span> <span m="2456980">every</span> <span m="2457090">time</span> <span m="2457330">you</span> <span m="2457420">get</span> <span m="2457570">an</span> <span m="2457690">acknowledgment</span> <span m="2458320">that</span> <span m="2458500">you</span> <span m="2458560">have</span> <span m="2458680">not</span> <span m="2458920">seen</span> <span m="2459190">before,</span> <span m="2460180">send</span> <span m="2460960">the</span> <span m="2461050">next</span> <span m="2461410">packet</span> <span m="2461860">in</span> <span m="2462010">sequence.</span> <span m="2462880">So</span> <span m="2463120">the</span> <span m="2463180">sender</span> <span m="2463480">just</span> <span m="2463690">keeps</span> <span m="2463900">sending</span> <span m="2464170">packets</span> <span m="2464530">in</span> <span m="2464650">sequence</span> <span m="2465070">order.</span> <span m="2465760">Every</span> <span m="2466000">time</span> <span m="2466180">it</span> <span m="2466240">gets</span> <span m="2466450">an</span> <span m="2466570">acknowledgment</span> <span m="2467020">that</span> <span m="2467140">it</span> <span m="2467200">hasn't</span> <span m="2468400">seen</span> <span m="2468730">before</span> <span m="2469720">for</span> <span m="2469870">a</span> <span m="2469930">packet</span> <span m="2470260">that</span> <span m="2470380">it</span> <span m="2470480">had</span> <span m="2470770">sent</span> <span m="2471100">before,</span> <span m="2472150">it</span> <span m="2472300">sends</span> <span m="2472660">the</span> <span m="2472750">next</span> <span m="2473080">incrementing</span> <span m="2473680">sequence</span> <span m="2474100">number.</span> </p>
<p><span m="2476410">So</span> <span m="2476970">this</span> <span m="2477150">painstaking</span> <span m="2477750">animation</span> <span m="2478350">will</span> <span m="2478530">attempt</span> <span m="2478800">to</span> <span m="2478890">show</span> <span m="2479070">you</span> <span m="2479190">that,</span> <span m="2480390">assuming</span> <span m="2480750">it's</span> <span m="2480900">correct.</span> <span m="2481920">So</span> <span m="2482190">the</span> <span m="2482310">window</span> <span m="2482610">here</span> <span m="2482790">is</span> <span m="2482940">five</span> <span m="2483210">packets,</span> <span m="2484100">OK?</span> <span m="2484860">I'll</span> <span m="2485160">tell</span> <span m="2485340">you</span> <span m="2485400">later</span> <span m="2486410">some</span> <span m="2486630">guidelines</span> <span m="2487050">on</span> <span m="2487170">how</span> <span m="2487260">to</span> <span m="2487380">pick</span> <span m="2487590">this</span> <span m="2487770">window</span> <span m="2488070">size.</span> <span m="2488940">But</span> <span m="2489120">this</span> <span m="2489570">number</span> <span m="2489840">of</span> <span m="2489900">packets</span> <span m="2490290">here</span> <span m="2490470">is</span> <span m="2490590">called</span> <span m="2490820">the</span> <span m="2490860">window,</span> <span m="2491280">the</span> <span m="2491400">number</span> <span m="2491820">of</span> <span m="2492030">outstanding</span> <span m="2492580">packets,</span> <span m="2493950">or</span> <span m="2494070">the</span> <span m="2494160">number</span> <span m="2494400">of</span> <span m="2494520">unacknowledged</span> <span m="2495090">packets.</span> <span m="2495600">It's</span> <span m="2495780">always</span> <span m="2496080">going</span> <span m="2496230">to</span> <span m="2496320">be</span> <span m="2496400">5.</span> <span m="2497990">It's</span> <span m="2498150">going</span> <span m="2498270">to</span> <span m="2498330">be</span> <span m="2498390">5</span> <span m="2498630">in</span> <span m="2498720">this</span> <span m="2498870">example.</span> <span m="2499290">It's</span> <span m="2499440">always</span> <span m="2499680">going</span> <span m="2499860">to</span> <span m="2499920">be</span> <span m="2500010">a</span> <span m="2500070">fixed</span> <span m="2500340">value</span> <span m="2500760">in</span> <span m="2500910">our</span> <span m="2501030">protocol,</span> <span m="2501900">OK?</span> </p>
<p><span m="2502560">So</span> <span m="2503640">you</span> <span m="2503790">send</span> <span m="2503970">the</span> <span m="2504060">first</span> <span m="2504330">packet.</span> <span m="2505200">When</span> <span m="2505350">you</span> <span m="2505440">get</span> <span m="2505560">an</span> <span m="2505650">acknowledgment</span> <span m="2506100">for</span> <span m="2506250">that</span> <span m="2506400">first</span> <span m="2506700">packet,</span> <span m="2507710">you</span> <span m="2507840">slide</span> <span m="2508230">the</span> <span m="2508320">window</span> <span m="2508590">forward</span> <span m="2508950">by</span> <span m="2509130">1,</span> <span m="2509580">and</span> <span m="2509700">you</span> <span m="2509760">send</span> <span m="2509970">packet</span> <span m="2510270">6.</span> <span m="2512260">When</span> <span m="2512380">you</span> <span m="2512440">get</span> <span m="2512560">an</span> <span m="2512650">acknowledgment</span> <span m="2513070">for</span> <span m="2513140">a</span> <span m="2513160">packet</span> <span m="2513560">2,</span> <span m="2513700">you</span> <span m="2513790">slide</span> <span m="2514090">the</span> <span m="2514180">window</span> <span m="2514390">forward,</span> <span m="2515680">and</span> <span m="2515800">you</span> <span m="2515870">send</span> <span m="2516100">packet</span> <span m="2516430">7.</span> <span m="2517630">When</span> <span m="2517780">you</span> <span m="2517840">get</span> <span m="2517990">an</span> <span m="2518080">acknowledgment</span> <span m="2518530">for</span> <span m="2518740">3,</span> <span m="2519070">you</span> <span m="2519190">slide</span> <span m="2519490">the</span> <span m="2519630">window</span> <span m="2519790">forward,</span> <span m="2522280">and</span> <span m="2522460">you</span> <span m="2522520">send</span> <span m="2522700">packet</span> <span m="2523000">8.</span> <span m="2525050">This</span> <span m="2525290">is--</span> <span m="2525943">sorry?</span> <span m="2526650">Yeah.</span> </p>
<p><span m="2526770">AUDIENCE:</span> <span m="2527014">So it</span> <span m="2527258">appears</span> <span m="2527746">[INAUDIBLE]</span> <span m="2528722">out of</span> <span m="2529210">order.</span> </p>
<p><span m="2531170">HARI BALAKRISHNAN:</span> <span m="2531260">That's</span> <span m="2531350">a</span> <span m="2531380">good</span> <span m="2531560">question.</span> <span m="2532790">I'll</span> <span m="2532970">get</span> <span m="2533120">to</span> <span m="2533240">that</span> <span m="2533480">in</span> <span m="2533600">a</span> <span m="2533660">moment.</span> <span m="2534570">The</span> <span m="2534620">answer</span> <span m="2534980">is</span> <span m="2535130">that</span> <span m="2535280">the</span> <span m="2535370">sender's</span> <span m="2535970">rule</span> <span m="2536300">is</span> <span m="2536450">always</span> <span m="2536810">the</span> <span m="2536900">same.</span> <span m="2537590">Yes,</span> <span m="2537880">you</span> <span m="2538070">get</span> <span m="2538220">acknowledgments</span> <span m="2538700">out</span> <span m="2538820">of</span> <span m="2538960">order.</span> <span m="2539180">As</span> <span m="2539330">long</span> <span m="2539570">as</span> <span m="2539810">it's</span> <span m="2539960">an</span> <span m="2540050">acknowledgment</span> <span m="2540590">for</span> <span m="2540770">a</span> <span m="2540830">packet--</span> <span m="2541640">sorry,</span> <span m="2541940">as</span> <span m="2542060">long</span> <span m="2542480">as</span> <span m="2542720">it's</span> <span m="2542870">an</span> <span m="2542960">acknowledgment</span> <span m="2543560">that</span> <span m="2543710">you</span> <span m="2543800">have</span> <span m="2543950">not</span> <span m="2544160">seen</span> <span m="2544370">before</span> <span m="2545450">for</span> <span m="2545750">a</span> <span m="2545810">packet</span> <span m="2546320">that</span> <span m="2546500">you</span> <span m="2546620">have</span> <span m="2546830">actually</span> <span m="2547190">sent,</span> <span m="2548570">you</span> <span m="2548810">slide</span> <span m="2549170">the</span> <span m="2549260">window</span> <span m="2549470">forward</span> <span m="2549830">by</span> <span m="2549980">1</span> <span m="2550220">and</span> <span m="2550340">send</span> <span m="2550610">a</span> <span m="2550680">new</span> <span m="2550790">packet,</span> <span m="2551966">OK?</span> <span m="2552440">And</span> <span m="2552680">you</span> <span m="2554090">keep</span> <span m="2554330">track</span> <span m="2554690">of</span> <span m="2554780">the</span> <span m="2554870">fact</span> <span m="2555140">that</span> <span m="2555300">you</span> <span m="2555420">received</span> <span m="2555770">an</span> <span m="2555860">acknowledgment,</span> <span m="2556370">so</span> <span m="2556520">you</span> <span m="2556670">know</span> <span m="2556940">that</span> <span m="2557120">you</span> <span m="2557240">should</span> <span m="2557390">never</span> <span m="2557630">retransmit</span> <span m="2558170">that</span> <span m="2558330">packet.</span> </p>
<p><span m="2561320">I</span> <span m="2561430">want to</span> <span m="2561700">define</span> <span m="2562060">this</span> <span m="2562270">thing</span> <span m="2562450">and</span> <span m="2562540">pause</span> <span m="2562930">here.</span> <span m="2563110">I</span> <span m="2563170">want you</span> <span m="2563470">to</span> <span m="2563530">understand</span> <span m="2563950">the</span> <span m="2564070">definition</span> <span m="2564520">of</span> <span m="2564610">a</span> <span m="2564670">window</span> <span m="2565840">and</span> <span m="2565990">internalize</span> <span m="2566560">it.</span> <span m="2567580">If</span> <span m="2567760">the</span> <span m="2567880">window</span> <span m="2568180">size</span> <span m="2568440">is</span> <span m="2568700">W,</span> <span m="2569590">what</span> <span m="2569830">it</span> <span m="2569950">means</span> <span m="2570400">is</span> <span m="2570640">that</span> <span m="2570790">the</span> <span m="2570910">maximum</span> <span m="2571450">number</span> <span m="2571870">of</span> <span m="2571990">unacknowledged</span> <span m="2572590">packets</span> <span m="2573040">that</span> <span m="2573220">you</span> <span m="2573310">can</span> <span m="2573460">have</span> <span m="2573910">in</span> <span m="2574120">the</span> <span m="2574210">connection</span> <span m="2574750">is</span> <span m="2574900">W.</span> <span m="2576280">There</span> <span m="2576430">are</span> <span m="2576520">many</span> <span m="2576820">different</span> <span m="2577120">ways</span> <span m="2577420">of</span> <span m="2578530">defining</span> <span m="2578920">a</span> <span m="2578980">window.</span> <span m="2579220">In</span> <span m="2579310">fact,</span> <span m="2579500">TCP</span> <span m="2579970">inside</span> <span m="2580400">it</span> <span m="2580540">has</span> <span m="2580810">two</span> <span m="2580990">windows.</span> <span m="2581860">This</span> <span m="2582070">definition</span> <span m="2582550">is</span> <span m="2582670">one</span> <span m="2582880">of</span> <span m="2582970">those</span> <span m="2583150">windows.</span> <span m="2583940">I</span> <span m="2584410">won't</span> <span m="2584760">talk</span> <span m="2585010">about</span> <span m="2585220">the</span> <span m="2585520">second</span> <span m="2585820">definition</span> <span m="2586260">here.</span> <span m="2586590">I'll</span> <span m="2586780">get</span> <span m="2586930">to</span> <span m="2587050">it</span> <span m="2587500">next</span> <span m="2587740">week.</span> <span m="2588290">It's</span> <span m="2588390">not</span> <span m="2588430">important</span> <span m="2588820">for</span> <span m="2588970">us</span> <span m="2589840">right</span> <span m="2590020">now.</span> </p>
<p><span m="2591140">So</span> <span m="2591280">again,</span> <span m="2591590">to</span> <span m="2591730">repeat,</span> <span m="2592090">if</span> <span m="2592180">the</span> <span m="2592270">window</span> <span m="2592480">size is</span> <span m="2592820">W,</span> <span m="2593200">it</span> <span m="2593290">means</span> <span m="2593560">that</span> <span m="2594070">the</span> <span m="2594160">maximum</span> <span m="2594700">number</span> <span m="2595030">of</span> <span m="2595120">unacknowledged</span> <span m="2595660">packets</span> <span m="2596350">in</span> <span m="2596670">the</span> <span m="2596830">system</span> <span m="2597550">in</span> <span m="2597640">the</span> <span m="2597730">protocol</span> <span m="2598090">is</span> <span m="2598180">W.</span> <span m="2599050">So</span> <span m="2599470">the</span> <span m="2599620">rule</span> <span m="2599950">of</span> <span m="2600040">the</span> <span m="2600100">sender</span> <span m="2600550">is</span> <span m="2600700">going</span> <span m="2600910">to</span> <span m="2601030">be</span> <span m="2601210">to</span> <span m="2601350">very</span> <span m="2601720">religiously</span> <span m="2602290">adhere</span> <span m="2602590">to</span> <span m="2603190">this</span> <span m="2603400">rule.</span> <span m="2604000">In</span> <span m="2604120">other</span> <span m="2604240">words,</span> <span m="2605060">every</span> <span m="2605170">time</span> <span m="2605410">it</span> <span m="2605500">gets</span> <span m="2605740">an</span> <span m="2605830">acknowledgment,</span> <span m="2606460">it</span> <span m="2606580">waits</span> <span m="2606910">and</span> <span m="2607000">sees</span> <span m="2607390">whether</span> <span m="2607630">it's</span> <span m="2607780">an</span> <span m="2607960">acknowledgment</span> <span m="2608440">for</span> <span m="2608590">a</span> <span m="2608650">packet</span> <span m="2609010">it</span> <span m="2609130">has</span> <span m="2609250">sent</span> <span m="2609520">before</span> <span m="2610030">that</span> <span m="2610180">it</span> <span m="2610270">has</span> <span m="2610360">not</span> <span m="2610570">seen</span> <span m="2610780">before.</span> </p>
<p><span m="2612100">If</span> <span m="2612250">you</span> <span m="2612370">get</span> <span m="2612520">an</span> <span m="2612610">acknowledgment</span> <span m="2613120">like</span> <span m="2613360">that,</span> <span m="2613790">it</span> <span m="2613890">means</span> <span m="2614140">that</span> <span m="2614860">some</span> <span m="2615160">packet</span> <span m="2615970">has</span> <span m="2616150">been</span> <span m="2616300">received,</span> <span m="2617320">which</span> <span m="2617500">means</span> <span m="2617770">you</span> <span m="2617890">can</span> <span m="2618040">get</span> <span m="2618220">rid</span> <span m="2618370">of</span> <span m="2618460">that</span> <span m="2618580">packet</span> <span m="2618910">from</span> <span m="2619300">the</span> <span m="2619390">stack</span> <span m="2619810">of</span> <span m="2620080">unacknowledged</span> <span m="2620650">packets</span> <span m="2621130">that</span> <span m="2621250">you</span> <span m="2621370">have</span> <span m="2622330">and</span> <span m="2622480">send</span> <span m="2622750">a</span> <span m="2622810">new</span> <span m="2622960">packet.</span> <span m="2623890">Because</span> <span m="2624280">you</span> <span m="2624370">can</span> <span m="2624490">send</span> <span m="2624670">a</span> <span m="2624700">new</span> <span m="2624850">packet</span> <span m="2625210">because</span> <span m="2625540">you</span> <span m="2626008">know</span> <span m="2626476">that</span> <span m="2627412">the</span> <span m="2627880">number</span> <span m="2628150">of</span> <span m="2628240">unacknowledged</span> <span m="2628720">packets</span> <span m="2629330">reduced</span> <span m="2629770">by</span> <span m="2629920">1</span> <span m="2630610">because</span> <span m="2630910">you</span> <span m="2631000">got</span> <span m="2631180">an</span> <span m="2631270">ACK,</span> <span m="2632230">which</span> <span m="2632380">means</span> <span m="2632560">you</span> <span m="2632620">can</span> <span m="2632740">now</span> <span m="2632920">send</span> <span m="2633190">a</span> <span m="2633280">new</span> <span m="2633400">packet,</span> <span m="2634250">OK? It's a</span> <span m="2634600">very</span> <span m="2634870">simple</span> <span m="2635170">rule</span> <span m="2635510">if</span> <span m="2635530">you</span> <span m="2635620">just</span> <span m="2635770">follow</span> <span m="2636050">that</span> <span m="2636190">idea</span> <span m="2636550">to</span> <span m="2636670">implement.</span> <span m="2637690">It</span> <span m="2637810">also</span> <span m="2638130">is</span> <span m="2638230">surprisingly</span> <span m="2638740">easy</span> <span m="2638980">to</span> <span m="2639070">get</span> <span m="2639190">wrong.</span> <span m="2639976">Yeah.</span> </p>
<p><span m="2640462">AUDIENCE:</span> <span m="2640705">So</span> <span m="2640948">the</span> <span m="2641920">window</span> <span m="2642406">doesn't</span> <span m="2642892">necessarily</span> <span m="2643378">have to</span> <span m="2643864">be</span> <span m="2644350">consecutive?</span> </p>
<p><span m="2645820">HARI BALAKRISHNAN:</span> <span m="2645895">The</span> <span m="2645970">window</span> <span m="2646390">doesn't</span> <span m="2646780">have</span> <span m="2647020">to</span> <span m="2647110">be</span> <span m="2647230">consecutive.</span> <span m="2647800">This</span> <span m="2647980">is</span> <span m="2648070">a</span> <span m="2648130">really,</span> <span m="2648530">really</span> <span m="2648670">good</span> <span m="2648820">point.</span> <span m="2649450">And</span> <span m="2649540">it's</span> <span m="2649660">very</span> <span m="2649870">tempting</span> <span m="2650260">to</span> <span m="2650350">implement</span> <span m="2650710">a</span> <span m="2650770">window</span> <span m="2651010">that's</span> <span m="2651190">consecutive.</span> <span m="2651640">And</span> <span m="2651730">you'll</span> <span m="2651850">find</span> <span m="2652120">that</span> <span m="2652270">after</span> <span m="2652480">a</span> <span m="2652510">while,</span> <span m="2652750">if</span> <span m="2652840">you</span> <span m="2652960">follow</span> <span m="2653920">that</span> <span m="2654160">idea,</span> <span m="2655300">and</span> <span m="2655420">you</span> <span m="2655510">do</span> <span m="2655660">it</span> <span m="2655750">wrongly,</span> <span m="2656140">the</span> <span m="2656230">protocol will</span> <span m="2656600">just</span> <span m="2656770">stall.</span> <span m="2657630">And</span> <span m="2657940">every</span> <span m="2658180">time,</span> <span m="2658420">there's</span> <span m="2658570">about</span> <span m="2658810">a</span> <span m="2658870">quarter</span> <span m="2659170">of</span> <span m="2659230">the</span> <span m="2659320">students,</span> <span m="2659620">the</span> <span m="2659710">first</span> <span m="2659920">time</span> <span m="2660070">they</span> <span m="2660180">implemented</span> <span m="2660580">this, it</span> <span m="2660800">just</span> <span m="2660970">stops</span> <span m="2661240">working</span> <span m="2661570">after</span> <span m="2661780">a</span> <span m="2661810">while</span> <span m="2662720">as</span> <span m="2662770">the</span> <span m="2662860">packet</span> <span m="2663160">loss</span> <span m="2663390">rates</span> <span m="2663580">grow.</span> </p>
<p><span m="2663730">So</span> <span m="2663880">it's</span> <span m="2664000">important</span> <span m="2664390">that</span> <span m="2664540">in</span> <span m="2664660">this</span> <span m="2664870">definition</span> <span m="2665320">of</span> <span m="2665410">the</span> <span m="2665470">protocol</span> <span m="2665890">in</span> <span m="2665980">the</span> <span m="2666040">way</span> <span m="2666220">it's</span> <span m="2666370">defined</span> <span m="2666790">here,</span> <span m="2667300">the</span> <span m="2667420">window</span> <span m="2668110">of</span> <span m="2668320">unacknowledged</span> <span m="2668920">packets--</span> <span m="2669370">it's</span> <span m="2669550">not</span> <span m="2670000">necessarily</span> <span m="2670540">consecutive.</span> <span m="2671260">So</span> <span m="2671590">you</span> <span m="2671770">could</span> <span m="2671950">have</span> <span m="2672460">packets</span> <span m="2672840">1,</span> <span m="2673311">2, 3,</span> <span m="2673782">4,</span> <span m="2674253">8,</span> <span m="2674724">9, 10,</span> <span m="2675195">11</span> <span m="2675670">outstanding</span> <span m="2676270">if</span> <span m="2676390">your</span> <span m="2676540">window</span> <span m="2676750">size is</span> <span m="2677140">8.</span> <span m="2677980">The</span> <span m="2678070">other</span> <span m="2678250">guys</span> <span m="2678520">may</span> <span m="2678640">have</span> <span m="2678730">gotten</span> <span m="2679000">acknowledged.</span> <span m="2680230">That's</span> <span m="2680470">absolutely</span> <span m="2680890">true,</span> <span m="2681880">yes.</span> <span m="2684150">OK?</span> </p>
<p><span m="2685290">All</span> <span m="2685390">right,</span> <span m="2685600">now</span> <span m="2685780">what</span> <span m="2685960">happens</span> <span m="2686290">under</span> <span m="2687010">all</span> <span m="2687190">these</span> <span m="2687340">other</span> <span m="2687580">weird</span> <span m="2687940">cases</span> <span m="2688270">that</span> <span m="2688390">are</span> <span m="2688450">going</span> <span m="2688590">to</span> <span m="2688900">happen</span> <span m="2689290">here?</span> <span m="2689600">So</span> <span m="2689770">let</span> <span m="2689890">me</span> <span m="2690040">first</span> <span m="2691090">show</span> <span m="2691360">you</span> <span m="2691510">a</span> <span m="2691570">timeline</span> <span m="2691990">of</span> <span m="2692110">how</span> <span m="2692610">a</span> <span m="2692750">timeout</span> <span m="2693190">is</span> <span m="2693310">dealt</span> <span m="2693550">with.</span> <span m="2695480">So</span> <span m="2695560">let's</span> <span m="2695740">say</span> <span m="2695980">in</span> <span m="2696130">this</span> <span m="2696760">case,</span> <span m="2697220">the</span> <span m="2697480">window</span> <span m="2697810">size</span> <span m="2698190">is</span> <span m="2698440">5</span> <span m="2698770">again</span> <span m="2699100">like</span> <span m="2699460">it</span> <span m="2699740">was</span> <span m="2699910">before.</span> <span m="2700640">So</span> <span m="2700720">everything</span> <span m="2701020">is</span> <span m="2701140">going</span> <span m="2701590">wonderfully</span> <span m="2702070">well</span> <span m="2702310">here.</span> <span m="2703000">And</span> <span m="2703090">let's</span> <span m="2703270">say</span> <span m="2703420">now</span> <span m="2703960">you</span> <span m="2704230">move</span> <span m="2704590">on.</span> <span m="2704830">You</span> <span m="2704950">send</span> <span m="2705180">packets</span> <span m="2705430">6,</span> <span m="2705775">7,</span> <span m="2706120">8.</span> <span m="2706330">And</span> <span m="2706420">let's</span> <span m="2706600">say</span> <span m="2706690">packet</span> <span m="2706980">8</span> <span m="2707110">is</span> <span m="2707200">lost.</span> <span m="2708370">What the</span> <span m="2708670">sender</span> <span m="2709000">is</span> <span m="2709090">going</span> <span m="2709240">to</span> <span m="2709330">do</span> <span m="2709480">is</span> <span m="2709600">it's</span> <span m="2709690">going</span> <span m="2709870">to</span> <span m="2709930">send</span> <span m="2710170">packet</span> <span m="2710440">9.</span> <span m="2711190">It's</span> <span m="2711340">going</span> <span m="2711520">to</span> <span m="2711580">send</span> <span m="2711760">packet</span> <span m="2712100">10</span> <span m="2714130">based</span> <span m="2714580">on</span> <span m="2714770">acknowledgments</span> <span m="2715450">for</span> <span m="2715600">4</span> <span m="2715990">and</span> <span m="2716140">3</span> <span m="2716830">that</span> <span m="2716980">it</span> <span m="2717100">received</span> <span m="2717460">before.</span> </p>
<p><span m="2718350">So,</span> <span m="2718900">sorry,</span> <span m="2719290">when</span> <span m="2719440">it</span> <span m="2719560">got</span> <span m="2719770">acknowledgment</span> <span m="2720220">3,</span> <span m="2720430">it</span> <span m="2720580">sent</span> <span m="2720820">packet</span> <span m="2721120">8.</span> <span m="2721405">8</span> <span m="2721690">was</span> <span m="2721840">lost.</span> <span m="2722200">The</span> <span m="2722260">sender</span> <span m="2722530">didn't</span> <span m="2722710">know</span> <span m="2722860">that</span> <span m="2723010">at</span> <span m="2723100">this</span> <span m="2723250">point.</span> <span m="2724060">When</span> <span m="2724240">it</span> <span m="2724300">got</span> <span m="2724510">an</span> <span m="2724600">acknowledgment</span> <span m="2725080">for</span> <span m="2725230">4,</span> <span m="2725560">it</span> <span m="2725650">sends</span> <span m="2725980">9.</span> <span m="2726340">When</span> <span m="2726450">it</span> <span m="2726550">got</span> <span m="2726730">an</span> <span m="2726830">acknowledgment</span> <span m="2727270">for</span> <span m="2727420">5,</span> <span m="2727780">it</span> <span m="2727870">sends</span> <span m="2728080">10.</span> <span m="2728890">When</span> <span m="2729070">it</span> <span m="2729130">gets</span> <span m="2729340">an</span> <span m="2729430">acknowledgment</span> <span m="2729880">for</span> <span m="2730030">6,</span> <span m="2730390">it</span> <span m="2730480">goes</span> <span m="2730720">ahead</span> <span m="2730930">and</span> <span m="2731050">sends</span> <span m="2731350">11.</span> <span m="2732070">When</span> <span m="2732220">it</span> <span m="2732280">gets</span> <span m="2732490">an</span> <span m="2732580">acknowledgment</span> <span m="2733180">for</span> <span m="2735280">7,</span> <span m="2735790">it</span> <span m="2735910">goes</span> <span m="2736210">ahead</span> <span m="2736480">and</span> <span m="2736570">sends</span> <span m="2736930">12.</span> <span m="2737830">So</span> <span m="2737980">at</span> <span m="2738100">this</span> <span m="2738310">point,</span> <span m="2739300">the</span> <span m="2739420">sender</span> <span m="2739780">actually</span> <span m="2740200">has</span> <span m="2740470">outstanding</span> <span m="2741400">12,</span> <span m="2741870">11,</span> <span m="2742340">10,</span> <span m="2742810">9,</span> <span m="2743380">8,</span> <span m="2744090">OK?</span> </p>
<p><span m="2745600">Now,</span> <span m="2746260">at</span> <span m="2746380">some</span> <span m="2746650">point,</span> <span m="2747010">it</span> <span m="2747070">discovers</span> <span m="2747670">that--</span> <span m="2749200">in</span> <span m="2749350">fact,</span> <span m="2749870">this</span> <span m="2749950">picture</span> <span m="2750190">continues.</span> <span m="2751390">In</span> <span m="2751510">this</span> <span m="2751690">picture,</span> <span m="2752020">what</span> <span m="2752170">happened</span> <span m="2752500">is</span> <span m="2752620">that</span> <span m="2752740">you</span> <span m="2752830">sent</span> <span m="2753040">out</span> <span m="2753190">9.</span> <span m="2753550">You've</span> <span m="2753670">got</span> <span m="2753850">an</span> <span m="2754000">acknowledgment</span> <span m="2754420">for</span> <span m="2754580">9.</span> <span m="2755050">And</span> <span m="2755200">at</span> <span m="2755290">that</span> <span m="2755470">point,</span> <span m="2755680">you</span> <span m="2755770">send</span> <span m="2756010">out</span> <span m="2756130">13</span> <span m="2757180">because</span> <span m="2757750">whenever</span> <span m="2758020">you</span> <span m="2758140">get</span> <span m="2758260">an</span> <span m="2758350">acknowledgment,</span> <span m="2758860">you</span> <span m="2758950">send</span> <span m="2759220">out</span> <span m="2759400">the</span> <span m="2759520">next</span> <span m="2759850">consecutive</span> <span m="2760360">packet</span> <span m="2760720">you</span> <span m="2760810">should</span> <span m="2760990">be</span> <span m="2761080">sending</span> <span m="2761380">out.</span> <span m="2761800">So</span> <span m="2762310">at</span> <span m="2762430">this</span> <span m="2762610">point</span> <span m="2762850">in</span> <span m="2762940">time,</span> <span m="2763150">the</span> <span m="2763240">sender</span> <span m="2763540">has</span> <span m="2763810">a</span> <span m="2763870">bunch</span> <span m="2764110">of</span> <span m="2764200">outstanding</span> <span m="2764650">packets</span> <span m="2765070">in</span> <span m="2765190">it,</span> <span m="2765340">and</span> <span m="2765460">it's</span> <span m="2765550">got</span> <span m="2765730">acknowledgment.</span> <span m="2766270">And</span> <span m="2766360">this</span> <span m="2766540">is</span> <span m="2766630">an</span> <span m="2766720">interesting</span> <span m="2767080">case</span> <span m="2767350">because</span> <span m="2768310">packet</span> <span m="2768640">8</span> <span m="2768820">was</span> <span m="2768970">lost.</span> <span m="2769710">9</span> <span m="2770110">was</span> <span m="2770260">sent</span> <span m="2770560">later,</span> <span m="2771070">and</span> <span m="2771160">9</span> <span m="2771430">got</span> <span m="2771700">acknowledged.</span> </p>
<p><span m="2772240">But</span> <span m="2772420">we</span> <span m="2772510">still</span> <span m="2772750">haven't</span> <span m="2772990">timed</span> <span m="2773330">out</span> <span m="2773530">on</span> <span m="2773650">8.</span> <span m="2774410">So</span> <span m="2774460">at</span> <span m="2774550">this</span> <span m="2774730">point</span> <span m="2774970">in</span> <span m="2775030">time,</span> <span m="2775270">the</span> <span m="2775450">outstanding</span> <span m="2776020">packets</span> <span m="2776410">in</span> <span m="2776500">the</span> <span m="2776560">window</span> <span m="2776920">are</span> <span m="2777100">13,</span> <span m="2777530">12,</span> <span m="2778390">11,</span> <span m="2779020">10,</span> <span m="2779380">and</span> <span m="2779590">8,</span> <span m="2781180">giving</span> <span m="2781420">you</span> <span m="2781540">that</span> <span m="2781690">nonconsecutive</span> <span m="2783310">observation</span> <span m="2783910">that</span> <span m="2784060">you</span> <span m="2784120">notice.</span> <span m="2784750">And</span> <span m="2784870">then</span> <span m="2785140">at</span> <span m="2785260">some</span> <span m="2785500">point</span> <span m="2785770">in</span> <span m="2785890">time,</span> <span m="2786280">based on</span> <span m="2786580">the round-trip</span> <span m="2786920">time,</span> <span m="2787300">based</span> <span m="2787540">on</span> <span m="2787630">the</span> <span m="2787730">black</span> <span m="2788020">box,</span> <span m="2788800">the</span> <span m="2788980">guy</span> <span m="2789220">timed</span> <span m="2789550">out,</span> <span m="2789850">and</span> <span m="2790000">8</span> <span m="2790180">got</span> <span m="2790460">retransmitted.</span> <span m="2791410">And</span> <span m="2791530">then</span> <span m="2791710">8</span> <span m="2791860">got</span> <span m="2792100">retransmitted.</span> <span m="2792690">You</span> <span m="2792770">got</span> <span m="2792940">an</span> <span m="2793030">acknowledgment</span> <span m="2793480">for</span> <span m="2793660">8,</span> <span m="2793870">and</span> <span m="2793960">the</span> <span m="2794050">protocol</span> <span m="2794500">sort</span> <span m="2794710">of</span> <span m="2794800">continues</span> <span m="2796240">in</span> <span m="2796750">that</span> <span m="2796900">fashion.</span> </p>
<p><span m="2798020">Does</span> <span m="2798380">this</span> <span m="2798640">makes</span> <span m="2798820">sense?</span> <span m="2799085">So</span> <span m="2799710">it's</span> <span m="2799990">actually</span> <span m="2800350">not</span> <span m="2800560">that</span> <span m="2800710">hard</span> <span m="2801370">when</span> <span m="2801520">you</span> <span m="2801610">think</span> <span m="2801790">about</span> <span m="2802060">it.</span> <span m="2802940">What</span> <span m="2803230">the</span> <span m="2803350">sender</span> <span m="2803740">does</span> <span m="2804250">is</span> <span m="2805510">a</span> <span m="2805570">very</span> <span m="2805780">simple</span> <span m="2806110">idea,</span> <span m="2806720">which</span> <span m="2806830">is</span> <span m="2807100">every</span> <span m="2807310">time</span> <span m="2807520">it</span> <span m="2807580">gets</span> <span m="2807820">a</span> <span m="2807850">new</span> <span m="2808120">acknowledgment</span> <span m="2808720">for</span> <span m="2808930">a</span> <span m="2808990">packet</span> <span m="2809350">it</span> <span m="2809440">had</span> <span m="2809560">sent</span> <span m="2809770">before</span> <span m="2810100">but</span> <span m="2810250">hadn't</span> <span m="2810550">seen</span> <span m="2810820">an</span> <span m="2810880">acknowledgment</span> <span m="2811330">for</span> <span m="2811510">before,</span> <span m="2811780">it</span> <span m="2811840">just</span> <span m="2812050">goes</span> <span m="2812260">ahead</span> <span m="2812440">and</span> <span m="2812560">sends</span> <span m="2812800">the</span> <span m="2812890">next</span> <span m="2813130">packet.</span> <span m="2814280">And</span> <span m="2814330">then</span> <span m="2814510">it</span> <span m="2814600">has</span> <span m="2814840">a</span> <span m="2814870">separate</span> <span m="2815260">process</span> <span m="2815650">by</span> <span m="2815800">which</span> <span m="2815980">it</span> <span m="2816070">maintains</span> <span m="2816460">this</span> <span m="2816610">timeout.</span> <span m="2817420">And</span> <span m="2817690">whenever</span> <span m="2818200">an</span> <span m="2818350">acknowledgment</span> <span m="2818830">does</span> <span m="2818980">not</span> <span m="2819160">arrive</span> <span m="2819460">within</span> <span m="2819700">a</span> <span m="2819730">timeout,</span> <span m="2820150">it</span> <span m="2820210">goes</span> <span m="2820450">ahead</span> <span m="2820630">and</span> <span m="2820990">retransmits</span> <span m="2821650">that</span> <span m="2821830">back.</span> </p>
<p><span m="2822640">Now,</span> <span m="2823180">when</span> <span m="2823450">it</span> <span m="2823570">retransmits</span> <span m="2824290">the</span> <span m="2824380">packet,</span> <span m="2824860">the</span> <span m="2825040">assumption</span> <span m="2825580">here</span> <span m="2825850">is</span> <span m="2826000">that</span> <span m="2826240">the</span> <span m="2826450">original</span> <span m="2826840">packet</span> <span m="2827170">was</span> <span m="2827350">actually</span> <span m="2827740">lost.</span> <span m="2828530">So</span> <span m="2828580">the</span> <span m="2828700">timeout</span> <span m="2829210">has</span> <span m="2829510">to</span> <span m="2829660">be</span> <span m="2829810">bigger</span> <span m="2830590">than--</span> <span m="2832900">for</span> <span m="2833110">the</span> <span m="2833200">system</span> <span m="2833530">to</span> <span m="2833650">work</span> <span m="2833890">well,</span> <span m="2834070">the</span> <span m="2834160">timeout</span> <span m="2834460">has</span> <span m="2834700">to</span> <span m="2834790">be</span> <span m="2834910">bigger</span> <span m="2835510">than</span> <span m="2836080">the</span> <span m="2836200">maximum</span> <span m="2836710">time</span> <span m="2837190">that</span> <span m="2837580">a</span> <span m="2837700">packet</span> <span m="2838060">can</span> <span m="2838240">sit</span> <span m="2838420">around</span> <span m="2838780">in</span> <span m="2838870">the</span> <span m="2838930">system.</span> <span m="2840110">So</span> <span m="2840190">if</span> <span m="2840320">the</span> <span m="2840370">timeout</span> <span m="2840760">is</span> <span m="2840850">too</span> <span m="2841030">small,</span> <span m="2841450">and</span> <span m="2841570">you</span> <span m="2841660">retransmit</span> <span m="2842240">8</span> <span m="2842470">too</span> <span m="2842800">early,</span> <span m="2843580">it</span> <span m="2843700">could</span> <span m="2843910">be</span> <span m="2844090">that</span> <span m="2844210">8</span> <span m="2844390">is</span> <span m="2844480">not</span> <span m="2844660">lost,</span> <span m="2844970">but</span> <span m="2845110">8</span> <span m="2845230">is</span> <span m="2845320">just</span> <span m="2845530">being</span> <span m="2845770">reordered</span> <span m="2846220">in</span> <span m="2846280">the</span> <span m="2846370">network</span> <span m="2846760">and</span> <span m="2846820">going</span> <span m="2847090">on</span> <span m="2847210">some</span> <span m="2847390">very</span> <span m="2847600">long</span> <span m="2847810">circulous</span> <span m="2848230">path.</span> <span m="2848360">You</span> <span m="2848490">know,</span> <span m="2848620">I</span> <span m="2848680">recently</span> <span m="2849070">read</span> <span m="2849310">that</span> <span m="2849760">someone</span> <span m="2850090">got</span> <span m="2850300">a</span> <span m="2850360">letter</span> <span m="2850660">in</span> <span m="2850780">New</span> <span m="2850900">York</span> <span m="2851140">70</span> <span m="2851470">years--</span> <span m="2852140">it</span> <span m="2852240">was</span> <span m="2852340">sent</span> <span m="2852400">in</span> <span m="2852500">1943,</span> <span m="2853210">and</span> <span m="2853330">it</span> <span m="2853390">showed</span> <span m="2853660">up,</span> <span m="2853930">like,</span> <span m="2854530">two</span> <span m="2854680">weeks</span> <span m="2854920">ago.</span> </p>
<p><span m="2855590">So,</span> <span m="2855880">I</span> <span m="2855940">mean,</span> <span m="2856090">it</span> <span m="2856180">could</span> <span m="2856300">happen</span> <span m="2856570">on</span> <span m="2856630">the</span> <span m="2856690">internet</span> <span m="2857020">too.</span> <span m="2857260">I</span> <span m="2857350">mean,</span> <span m="2857560">quite</span> <span m="2857830">literally,</span> <span m="2858220">if</span> <span m="2858340">you're</span> <span m="2858460">on</span> <span m="2858550">an</span> <span m="2858670">Amtrak</span> <span m="2859090">train,</span> <span m="2859390">and</span> <span m="2859490">you're</span> <span m="2859570">using</span> <span m="2859930">their</span> <span m="2860110">wireless</span> <span m="2860530">network,</span> <span m="2861400">some</span> <span m="2861640">packets</span> <span m="2862060">come</span> <span m="2862600">to</span> <span m="2862720">you</span> <span m="2863410">in</span> <span m="2864220">300</span> <span m="2864630">or</span> <span m="2864670">400</span> <span m="2865090">milliseconds,</span> <span m="2865820">which</span> <span m="2865930">is</span> <span m="2866110">arguably</span> <span m="2866530">very</span> <span m="2866740">long.</span> <span m="2867190">But</span> <span m="2867370">literally,</span> <span m="2867850">there</span> <span m="2867970">are</span> <span m="2868030">packets</span> <span m="2868390">that</span> <span m="2868510">will</span> <span m="2868600">come</span> <span m="2868750">back</span> <span m="2868930">to</span> <span m="2869020">you</span> <span m="2869110">a</span> <span m="2869170">minute</span> <span m="2869440">after</span> <span m="2869650">you</span> <span m="2869740">sent</span> <span m="2869980">them--</span> <span m="2871000">reach</span> <span m="2871240">the</span> <span m="2871300">receiver</span> <span m="2871660">a</span> <span m="2871720">minute</span> <span m="2872020">after</span> <span m="2872230">you</span> <span m="2872320">sent</span> <span m="2872560">them.</span> <span m="2872950">And</span> <span m="2873070">they</span> <span m="2873190">could</span> <span m="2873370">be</span> <span m="2873520">out</span> <span m="2873670">of</span> <span m="2873790">order.</span> </p>
<p><span m="2874160">So</span> <span m="2874210">in</span> <span m="2874300">fact,</span> <span m="2874640">this</span> <span m="2874720">is</span> <span m="2874870">my</span> <span m="2875200">student's,</span> <span m="2875530">and</span> <span m="2875620">I</span> <span m="2875680">call</span> <span m="2875890">this</span> <span m="2876040">the</span> <span m="2876130">great</span> <span m="2876370">Amtrak</span> <span m="2876790">network.</span> <span m="2877270">It's</span> <span m="2877300">really</span> <span m="2877540">good</span> <span m="2877750">because</span> <span m="2878440">it</span> <span m="2878590">gives</span> <span m="2878830">us</span> <span m="2878980">really</span> <span m="2879190">interesting</span> <span m="2879520">research</span> <span m="2879820">for</span> <span m="2879970">others</span> <span m="2880150">to</span> <span m="2880240">work</span> <span m="2880480">on.</span> <span m="2881830">But</span> <span m="2882040">the</span> <span m="2882130">people</span> <span m="2882370">who</span> <span m="2882460">are</span> <span m="2882550">on</span> <span m="2882730">that</span> <span m="2882880">train</span> <span m="2883150">probably--</span> <span m="2883840">it's</span> <span m="2883960">miserable.</span> </p>
<p><span m="2885220">So</span> <span m="2885400">anyway,</span> <span m="2885700">this</span> <span m="2885880">could</span> <span m="2886030">happen.</span> <span m="2887030">But,</span> <span m="2887410">and</span> <span m="2887530">so,</span> <span m="2887830">the</span> <span m="2888130">timeout</span> <span m="2888420">is</span> <span m="2888560">a</span> <span m="2888640">heuristic.</span> <span m="2888930">It</span> <span m="2889180">could</span> <span m="2889420">be</span> <span m="2889630">that</span> <span m="2889840">8</span> <span m="2890050">was</span> <span m="2890260">retransmitted</span> <span m="2891280">wrongly</span> <span m="2891850">in</span> <span m="2892000">a</span> <span m="2892060">spurious</span> <span m="2892570">way.</span> <span m="2893260">But</span> <span m="2893470">our</span> <span m="2893590">hope</span> <span m="2893890">is</span> <span m="2894040">that</span> <span m="2894190">if</span> <span m="2894280">the</span> <span m="2894340">timeout</span> <span m="2894730">is</span> <span m="2894850">long</span> <span m="2895120">enough,</span> <span m="2895940">it</span> <span m="2895960">could</span> <span m="2896140">be</span> <span m="2896350">that--</span> <span m="2897520">if</span> <span m="2897670">the timeout's</span> <span m="2898060">long</span> <span m="2898240">enough,</span> <span m="2898480">the</span> <span m="2898570">idea</span> <span m="2898870">is</span> <span m="2899050">that</span> <span m="2899170">you</span> <span m="2899260">retransmit</span> <span m="2899800">8</span> <span m="2899980">because</span> <span m="2900250">the</span> <span m="2900370">original</span> <span m="2900870">8</span> <span m="2901030">was</span> <span m="2901180">lost.</span> <span m="2901930">And</span> <span m="2902050">now</span> <span m="2902320">the</span> <span m="2902440">outstanding</span> <span m="2902920">packets</span> <span m="2903250">in</span> <span m="2903340">the</span> <span m="2903400">window</span> <span m="2903730">are</span> <span m="2904270">8,</span> <span m="2904810">13,</span> <span m="2905350">12,</span> <span m="2905780">11,</span> <span m="2906190">and</span> <span m="2906610">10.</span> <span m="2907300">But</span> <span m="2908140">the</span> <span m="2908560">8</span> <span m="2908980">here</span> <span m="2909400">is</span> <span m="2910090">not</span> <span m="2910330">that</span> <span m="2910660">8,</span> <span m="2910930">but</span> <span m="2911110">this</span> <span m="2911380">8.</span> <span m="2912220">But</span> <span m="2912430">as</span> <span m="2912520">long</span> <span m="2912760">as</span> <span m="2913180">the</span> <span m="2913840">contents</span> <span m="2914200">of</span> <span m="2914350">8</span> <span m="2914560">are</span> <span m="2914620">the</span> <span m="2914710">same,</span> <span m="2915580">it</span> <span m="2915820">doesn't</span> <span m="2916000">matter</span> <span m="2916210">which</span> <span m="2916420">8</span> <span m="2916570">it</span> <span m="2916660">is.</span> </p>
<p><span m="2917350">But</span> <span m="2917500">of</span> <span m="2917590">course,</span> <span m="2918110">if</span> <span m="2918190">the</span> <span m="2918340">timeout</span> <span m="2918700">is</span> <span m="2918790">too</span> <span m="2918940">small,</span> <span m="2919230">there</span> <span m="2919320">are</span> <span m="2919420">two</span> <span m="2919600">8's</span> <span m="2919810">sitting</span> <span m="2920080">in</span> <span m="2920140">the</span> <span m="2920230">network.</span> <span m="2921040">And</span> <span m="2921550">now</span> <span m="2921880">you</span> <span m="2922060">actually</span> <span m="2922390">have</span> <span m="2922540">more</span> <span m="2922870">than</span> <span m="2923080">W</span> <span m="2923440">packets</span> <span m="2923920">in</span> <span m="2924010">the</span> <span m="2924070">window.</span> <span m="2924960">But</span> <span m="2925030">as</span> <span m="2925120">far</span> <span m="2925270">as</span> <span m="2925360">the</span> <span m="2925450">sender</span> <span m="2925810">is</span> <span m="2925960">concerned,</span> <span m="2926470">it</span> <span m="2926560">has</span> <span m="2926770">exactly</span> <span m="2927280">those</span> <span m="2927550">8,</span> <span m="2927890">10,</span> <span m="2928230">11,</span> <span m="2928570">12,</span> <span m="2928830">and</span> <span m="2929090">13.</span> <span m="2929890">It's</span> <span m="2930070">true</span> <span m="2930280">that</span> <span m="2930410">there's</span> <span m="2930470">one</span> <span m="2930670">more</span> <span m="2930850">packet</span> <span m="2931180">if</span> <span m="2931270">the</span> <span m="2931330">timeout</span> <span m="2931660">happened</span> <span m="2931930">too</span> <span m="2932080">early.</span> <span m="2932710">That's</span> <span m="2932860">the</span> <span m="2932950">network's</span> <span m="2933250">problem.</span> <span m="2933670">As</span> <span m="2933760">far</span> <span m="2933910">as</span> <span m="2933970">the</span> <span m="2934060">sender</span> <span m="2934330">is</span> <span m="2934390">concerned,</span> <span m="2934780">it</span> <span m="2934840">has</span> <span m="2935080">five</span> <span m="2935380">outstanding</span> <span m="2935800">packets.</span> </p>
<p><span m="2937690">The</span> <span m="2937810">receiver</span> <span m="2938170">is</span> <span m="2938260">a</span> <span m="2938320">little</span> <span m="2938530">trickier</span> <span m="2938980">than</span> <span m="2939160">in</span> <span m="2939220">the</span> <span m="2939340">other</span> <span m="2939520">case</span> <span m="2940210">because</span> <span m="2940510">what</span> <span m="2940660">it</span> <span m="2940750">has</span> <span m="2940930">to</span> <span m="2941020">do--</span> <span m="2941260">I</span> <span m="2941350">mean,</span> <span m="2941500">it's</span> <span m="2941920">trickier</span> <span m="2942250">in</span> <span m="2942340">that</span> <span m="2942490">it</span> <span m="2942550">has</span> <span m="2942730">to</span> <span m="2942820">maintain</span> <span m="2943150">a</span> <span m="2943210">buffer</span> <span m="2944110">of</span> <span m="2944290">packets.</span> <span m="2944990">So</span> <span m="2945040">the</span> <span m="2945130">receiver</span> <span m="2945610">has</span> <span m="2945850">a</span> <span m="2945910">little</span> <span m="2946090">more</span> <span m="2946420">of</span> <span m="2946540">a</span> <span m="2946600">job</span> <span m="2946930">to</span> <span m="2947050">do.</span> <span m="2947680">In</span> <span m="2947800">the</span> <span m="2947890">previous</span> <span m="2948300">stop-and-wait</span> <span m="2948850">protocol,</span> <span m="2950900">any</span> <span m="2951150">time</span> <span m="2951370">it</span> <span m="2951460">got</span> <span m="2951670">an</span> <span m="2951790">out-of-order</span> <span m="2952330">packet,</span> <span m="2952720">it's</span> <span m="2952990">probably</span> <span m="2953380">because</span> <span m="2953710">the</span> <span m="2953830">sender</span> <span m="2954160">is</span> <span m="2954280">badly</span> <span m="2954730">implemented,</span> <span m="2955330">right?</span> <span m="2955750">If</span> <span m="2955930">the</span> <span m="2956050">last</span> <span m="2956320">sequence</span> <span m="2956730">number</span> <span m="2957010">I</span> <span m="2957100">deliver</span> <span m="2957460">to</span> <span m="2957580">the</span> <span m="2957670">application</span> <span m="2958150">was</span> <span m="2958270">17,</span> <span m="2958840">and</span> <span m="2958930">I</span> <span m="2958990">got</span> <span m="2959160">a</span> <span m="2959220">19,</span> <span m="2960070">it's</span> <span m="2960220">a</span> <span m="2960280">bug.</span> </p>
<p><span m="2961390">Whereas</span> <span m="2961690">here,</span> <span m="2962050">is</span> <span m="2962140">the</span> <span m="2962230">last</span> <span m="2962440">sequence</span> <span m="2962770">number</span> <span m="2963040">I</span> <span m="2963130">delivered</span> <span m="2963450">to</span> <span m="2963550">the</span> <span m="2963640">application</span> <span m="2964120">is</span> <span m="2964200">17,</span> <span m="2964870">and</span> <span m="2964990">I</span> <span m="2965050">get</span> <span m="2965200">a</span> <span m="2965260">19,</span> <span m="2966190">it</span> <span m="2966310">means</span> <span m="2966640">that,</span> <span m="2966760">well,</span> <span m="2966970">there's</span> <span m="2967120">a</span> <span m="2967180">window.</span> <span m="2967570">And</span> <span m="2967660">maybe</span> <span m="2967900">18</span> <span m="2968140">was</span> <span m="2968260">lost,</span> <span m="2968650">or</span> <span m="2968740">who</span> <span m="2968830">knows</span> <span m="2969010">what</span> <span m="2969160">happened,</span> <span m="2969520">right?</span> <span m="2969910">Maybe</span> <span m="2970150">18</span> <span m="2970360">will</span> <span m="2970450">show</span> <span m="2970660">up</span> <span m="2970810">later.</span> <span m="2971810">So</span> <span m="2971890">the</span> <span m="2971980">receiver</span> <span m="2972560">now</span> <span m="2972700">has</span> <span m="2973000">an</span> <span m="2973090">interesting</span> <span m="2973510">job.</span> </p>
<p><span m="2973840">And</span> <span m="2974020">this</span> <span m="2974200">is</span> <span m="2974290">important</span> <span m="2974810">because</span> <span m="2975040">when</span> <span m="2975160">you</span> <span m="2975250">implement</span> <span m="2975640">this</span> <span m="2975710">stuff</span> <span m="2976030">in</span> <span m="2976150">this</span> <span m="2976300">protocol</span> <span m="2976570">[INAUDIBLE],</span> <span m="2977170">you've</span> <span m="2977320">got</span> <span m="2977440">to</span> <span m="2977500">make</span> <span m="2977650">sure</span> <span m="2977860">that</span> <span m="2978010">whenever</span> <span m="2978970">you</span> <span m="2979240">deliver</span> <span m="2979630">packets</span> <span m="2980080">from</span> <span m="2980350">the</span> <span m="2980440">receiver</span> <span m="2980830">protocol</span> <span m="2981190">to</span> <span m="2981280">the</span> <span m="2981370">application,</span> <span m="2981880">you</span> <span m="2982000">deliver</span> <span m="2982360">it</span> <span m="2982460">in</span> <span m="2982810">order</span> <span m="2983760">and</span> <span m="2984150">update</span> <span m="2984600">the</span> <span m="2984690">last</span> <span m="2984930">sequence</span> <span m="2985290">number</span> <span m="2985530">you</span> <span m="2985650">delivered,</span> <span m="2986570">OK?</span> <span m="2987150">So</span> <span m="2987540">that's</span> <span m="2988500">important</span> <span m="2988920">to</span> <span m="2989010">do.</span> <span m="2989280">But</span> <span m="2989380">if</span> <span m="2989480">you</span> <span m="2989490">do</span> <span m="2989700">that</span> <span m="2990030">and</span> <span m="2990120">then</span> <span m="2990270">acknowledge</span> <span m="2990810">a</span> <span m="2990840">packet</span> <span m="2991530">when</span> <span m="2991770">it's</span> <span m="2991920">received,</span> <span m="2992640">just</span> <span m="2992820">send</span> <span m="2992970">an</span> <span m="2993060">acknowledgment</span> <span m="2993480">for</span> <span m="2993660">it.</span> <span m="2994110">The</span> <span m="2994200">protocol</span> <span m="2994650">will</span> <span m="2994800">continue,</span> <span m="2995310">and</span> <span m="2995460">it</span> <span m="2995560">will</span> <span m="2995640">work</span> <span m="2995870">well.</span> </p>
<p><span m="2996400">So</span> <span m="2996720">this</span> <span m="2996930">is</span> <span m="2997020">what</span> <span m="2997230">you'll</span> <span m="2997350">be</span> <span m="2997470">looking</span> <span m="2997770">at</span> <span m="2997930">in</span> <span m="2998260">the</span> <span m="2998370">lab,</span> <span m="2998610">the</span> <span m="2998700">piece</span> <span m="2998930">that's</span> <span m="2999030">going</span> <span m="2999180">to</span> <span m="2999240">go</span> <span m="2999360">out</span> <span m="2999500">today.</span> <span m="2999690">This</span> <span m="2999840">is</span> <span m="2999930">the</span> <span m="3000020">last</span> <span m="3000290">lab.</span> <span m="3001190">And</span> <span m="3001370">then</span> <span m="3001580">on</span> <span m="3002060">tomorrow</span> <span m="3002430">in</span> <span m="3002800">recitation,</span> <span m="3003420">we'll</span> <span m="3003520">look</span> <span m="3003560">at</span> <span m="3003650">how</span> <span m="3003860">the</span> <span m="3003980">timeout</span> <span m="3004400">is</span> <span m="3004460">selected.</span> <span m="3005420">And</span> <span m="3005540">then</span> <span m="3005690">on</span> <span m="3005810">Monday,</span> <span m="3006140">I'll</span> <span m="3006230">talk</span> <span m="3006470">more</span> <span m="3006680">about</span> <span m="3006950">an</span> <span m="3007070">analysis</span> <span m="3007580">of</span> <span m="3007700">this</span> <span m="3008000">protocol.</span> </p>
</div>
        <div id="vid_related" itemprop="description" class="tabContent hide">
<h2 class="subhead">Free Downloads</h2>
<h3 class="subsubhead">Video</h3>
<ul>
<li>iTunes U (<a href="https://itunes.apple.com/us/itunes-u/introduction-to-eecs-ii-digital/id835987738">MP4 - 173MB</a>)</li>
<li>Internet Archive (<a href="http://www.archive.org/download/MIT6.02F12/MIT6_02F12_lec21_300k.mp4">MP4 - 173MB</a>)</li>
</ul>
<br>
<h3 class="subsubhead">Caption</h3>
<ul>
<li>English-US (<a href="../../../contents/lecture-videos/lecture-21-reliable-transport/qpYjftJbGYI.srt">SRT</a>)</li>
</ul>
</div>
    
   </div>  




      					 
        <div class="" id="parent-fieldname-bottom_html_area">
            
            
        </div>
    
               </main><!--Course_inner_media tag close -->
           		</div>
<!--Course_wrapper tag close -->
            </div>
<!--left tag close -->
            <aside id="right">
                <!--Begin Right Portion -->
                    <div>
    



</div>

                	<div>
    



</div>


        <div class="" id="parent-fieldname-rsi_top_html_area">
            
            
        </div>
    

<!-- RSI google ad space-->



<div id="google_ads">    
    <script async="async" src="https://www.googletagservices.com/tag/js/gpt.js"></script>
    <script type="text/javascript">var googletag = googletag || {}; googletag.cmd = googletag.cmd || [];</script>
    <script type="text/javascript">
googletag.cmd.push(function() {googletag.defineSlot('/1064917/VIDEO_INDIVIDUAL_SLOT_A_DL', [[300, 250], [300, 300], [180, 200], [180, 150], [160, 600]], 'VIDEO_INDIVIDUAL_SLOT_A_DL').addService(googletag.pubads());googletag.defineSlot('/1064917/VIDEO_INDIVIDUAL_SLOT_B_DL', [[300, 250], [300, 300], [180, 200], [180, 150], [160, 600]], 'VIDEO_INDIVIDUAL_SLOT_B_DL').addService(googletag.pubads());googletag.defineSlot('/1064917/VIDEO_INDIVIDUAL_SLOT_C_DL', [[300, 250], [300, 300], [180, 200], [180, 150], [160, 600]], 'VIDEO_INDIVIDUAL_SLOT_C_DL').addService(googletag.pubads());
googletag.pubads().enableSingleRequest();
 googletag.enableServices();
});</script>
    <script language="javascript" type="text/javascript">
googletag.cmd.push(function() {googletag.pubads().set("TYPE","HOUSE");googletag.pubads().set("DEPARTMENT","6");googletag.pubads().set("CRS_BEG2","02");googletag.pubads().set("CRS_END","");googletag.pubads().set("SESSION","F");googletag.pubads().set("YEAR","12");})
</script>
    
    <div id="VIDEO_INDIVIDUAL_SLOT_A_DL">
    	<script>googletag.cmd.push(function() { googletag.display('VIDEO_INDIVIDUAL_SLOT_A_DL'); });</script>
    </div>
    <div id="VIDEO_INDIVIDUAL_SLOT_B_DL">
    	<script>googletag.cmd.push(function() { googletag.display('VIDEO_INDIVIDUAL_SLOT_B_DL'); });</script>
    </div>
    <div id="VIDEO_INDIVIDUAL_SLOT_C_DL">
    	<script>googletag.cmd.push(function() { googletag.display('VIDEO_INDIVIDUAL_SLOT_C_DL'); });</script>
    </div>
</div>

<!-- End RSI ads--> 


<div>
    



</div>

            </aside><!--Right div close -->
            <div class="clear"></div>
        </div>
<!--grid tag close -->
      </div>
		
		<footer id="bottom">
			<div id="grid">
				
<div id="portletwrapper-6f63772e626f74746f6d706f72746c65746d616e616765720a636f6e746578740a2f506c6f6e650a736974652d666f6f746572" class="portletWrapper kssattr-portlethash-6f63772e626f74746f6d706f72746c65746d616e616765720a636f6e746578740a2f506c6f6e650a736974652d666f6f746572">
<div class="portletStaticText portlet-static-site-footer"><div id="footer">
<nav aria-label="Footer">     <nav id="foot-c1" class="grid_2 alpha" aria-labelledby="f-find-courses">       <span class="footer" id="f-find-courses" aria-hidden="true">Find Courses</span>
<ul class="foot-bullet" role="presentation">
    <li><a href="https://ocw.mit.edu/courses/find-by-topic/">Find by Topic</a></li>
    <li><a href="https://ocw.mit.edu/courses/find-by-number/">Find by Course Number</a></li>
    <li><a href="https://ocw.mit.edu/courses/find-by-department/">Find by Department</a></li>
    <li><a href="https://ocw.mit.edu/courses/new-courses/">New Courses</a></li>
    <li><a href="https://ocw.mit.edu/courses/most-visited-courses/">Most Visited Courses</a></li>
    <li><a href="https://ocw.mit.edu/courses/ocw-scholar/">OCW Scholar Courses</a></li>
    <li><a href="https://ocw.mit.edu/courses/audio-video-courses/">Audio/Video Courses</a></li>
    <li><a href="https://ocw.mit.edu/courses/online-textbooks/">Online Textbooks</a></li>
    <li><a href="https://ocw.mit.edu/courses/instructor-insights/">Instructor Insights</a></li>
    <li><a href="https://ocw.mit.edu/resources/">Supplemental Resources</a></li>
    <li><a href="https://ocw.mit.edu/courses/mitx-related-courseware/">MITx &amp; Related OCW Courses</a></li>
    <li><a href="https://ocw.mit.edu/courses/mit-open-learning-library/">MIT Open Learning Library</a></li>
    <li><a href="https://ocw.mit.edu/courses/translated-courses/">Translated Courses</a></li>
</ul>
</nav>
<div id="foot-c2" class="grid_2"><nav aria-labelledby="f-for-educators">         <span id="f-for-educators" class="footer" aria-hidden="true">For Educators</span>
<ul class="foot-bullet" role="presentation">
    <li><a href="https://chalk-radio.simplecast.com/">Chalk Radio Podcast</a></li>
    <li><a href="https://ocw.mit.edu/educator/">OCW Educator Portal </a></li>
    <li><a href="https://ocw.mit.edu/courses/instructor-insights/">Instructor Insights by Department</a></li>
    <li><a href="https://openlearning.mit.edu/campus/digital-innovations/" aria-label="External Link: Residential Digital Innovations">Residential Digital Innovations </a></li>
    <li><a href="https://ocw.mit.edu/high-school/">OCW Highlights for High School</a></li>
    <li><a href="https://ocw.mit.edu/educator/additional-resources/">Additional Resources</a></li>
</ul>
</nav></div>
<nav class="grid_2" id="foot-c3" aria-labelledby="f-donate">       <span id="f-donate" class="footer" aria-hidden="true">Give Now</span>
<ul class="foot-bullet" role="presentation">
    <li><a href="https://ocw.mit.edu/give/">Make a Donation</a></li>
    <li><a href="https://ocw.mit.edu/give/why-give/">Why Give?</a></li>
    <li><a href="https://ocw.mit.edu/give/our-supporters/">Our Supporters</a></li>
    <li><a href="https://ocw.mit.edu/give/other-ways-to-contribute/">Other Ways to Contribute</a></li>
    <li><a href="https://ocw.mit.edu/support/">Become a Corporate Sponsor</a></li>
</ul>
</nav>
<div class="grid_2" id="foot-c4">
<nav aria-labelledby="f-about">         <span id="f-about" class="footer" aria-hidden="true">About</span>
<ul class="foot-bullet" role="presentation">
    <li><a href="https://ocw.mit.edu/about/">About OpenCourseWare</a></li>
    <li><a href="https://ocw.mit.edu/about/site-statistics/">Site Statistics</a></li>
    <li><a href="https://ocw.mit.edu/about/ocw-stories/">OCW Stories</a></li>
    <li><a href="https://ocw.mit.edu/about/newsletter/">Newsletter</a></li>
    <li><a href="https://www.ocw-openmatters.org/">Open Matters Blog</a></li>
</ul>
</nav><!--about-->       <nav aria-labelledby="f-tools">         <span id="f-tools" class="footer" aria-hidden="true">Tools</span>
<ul class="foot-bullet" role="presentation">
    <li><a href="https://ocw.mit.edu/help/">Help &amp; FAQs</a></li>
    <li><a href="https://ocw.mit.edu/about/contactus">Contact Us</a></li>
    <li><a href="https://accessibility.mit.edu/" target="_blank">Accessibility</a></li>
    <li><a href="https://ocw.mit.edu/help/site-map/">Site Map</a></li>
    <li><a href="../../../common/terms/index.htm">Privacy &amp; Terms of Use</a></li>
    <li><a href="https://ocw.mit.edu/help/rss/">RSS Feeds</a></li>
</ul>
</nav><!--tools-->
</div>
</nav> <aside style="min-height: 289px;" aria-labelledby="f-our-corporate-supporters" class="grid_4 omega" id="foot-c5">           <span aria-hidden="true" class="footer" id="f-our-corporate-supporters">Our Corporate Supporters</span>           <!-- HOME_CORP_LOGO_1 -->
<div id="div-gpt-ad-1388181177156-0" class="sponsors_google_ads_even"><script type="text/javascript">
              googletag.cmd.push(function() { googletag.display('div-gpt-ad-1388181177156-0'); });
            </script></div>
<!-- HOME_CORP_LOGO_2 -->
<div id="div-gpt-ad-1388181177156-1" class="sponsors_google_ads_odd"><script type="text/javascript">
              googletag.cmd.push(function() { googletag.display('div-gpt-ad-1388181177156-1'); });
            </script></div>
<!-- HOME_CORP_LOGO_3 -->
<div id="div-gpt-ad-1388181177156-2" class="sponsors_google_ads_even"><script type="text/javascript">
              googletag.cmd.push(function() { googletag.display('div-gpt-ad-1388181177156-2'); });
            </script></div>
<!-- HOME_CORP_LOGO_4 -->
<div id="div-gpt-ad-1388181177156-3" class="sponsors_google_ads_odd"><script type="text/javascript">
              googletag.cmd.push(function() { googletag.display('div-gpt-ad-1388181177156-3'); });
            </script></div>
<!-- HOME_CORP_LOGO_5 -->
<div id="div-gpt-ad-1388181177156-4" class="sponsors_google_ads_even"><script type="text/javascript">
              googletag.cmd.push(function() { googletag.display('div-gpt-ad-1388181177156-4'); });
              </script></div>
<!-- HOME_CORP_LOGO_6 -->
<div id="div-gpt-ad-1388181177156-5" class="sponsors_google_ads_odd"><script type="text/javascript">
              googletag.cmd.push(function() { googletag.display('div-gpt-ad-1388181177156-5'); });
              </script></div>
</aside>
<div class="grid_12 alpha omega" itemprop="publisher" itemscope="" itemtype="http://schema.org/CollegeOrUniversity">
<h4 class="footer" style="border-top: thin solid #d5c9ba; padding-top: 10px; margin-bottom: 10px;">About <span itemprop="name">MIT OpenCourseWare</span>
</h4>
<p style="color: #999; font-size: 1em; line-height: 1.5em; margin-top: 10px;" itemprop="description">MIT OpenCourseWare is an online publication of materials from over 2,500 MIT courses, freely sharing knowledge with learners and educators around the world. <a href="https://ocw.mit.edu/about/">Learn more »</a></p>
</div>
<div id="foot-copy" class="grid_12 alpha omega" style="border-top: none;">
<a href="http://web.mit.edu"><img src="../../../common/images/logo_mit.png" alt="Massachusetts Institute of Technology logo and name." style="width: 195; height: 44;"></a><a href="https://openlearning.mit.edu/"><img src="https://ocw.mit.edu/images/mitol_logo.png" alt="MIT Open Learning logo and name." style="width: 265; height: 50; vertical-align: top; padding-left:30px;"></a><a href="https://www.oeglobal.org/"><img src="https://ocw.mit.edu/images/oeg_logo.gif" alt="Open Education Consortium logo." style="width: 219px; height: 59px; vertical-align: top; padding-left:20px;"></a><a rel="license" itemprop="useRightsUrl" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img src="../../../common/images/cc_by-nc-sa.png" alt="Creative Commons logo with terms BY-NC-SA." style="width: 126px; height: 44px; margin-right: 0; padding-left: 20px;"></a>
<p class="copyright">© 2001–2018<br>
Massachusetts Institute of Technology</p>
<p style="font-size: 0.9em; margin-bottom: 15px;">Your use of the MIT OpenCourseWare site and materials is subject to our <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="license">Creative Commons License</a> and other <a href="../../../common/terms/index.htm" rel="cc:morePermissions">terms of use</a>.</p>
</div>
</div></div>

</div>





                
			</div> <!-- bottom grid end -->
		</footer><!-- footer bottom end -->


   </body>
 </html>
